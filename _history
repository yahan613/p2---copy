{"entries":[{"timestamp":1743008517804,"editorVersion":"7.0.57","changes":[{"type":"edited","filename":"main.blocks","patch":[{"start1":0,"length1":185,"diffs":[[1,"<xml xmlns=\"http://www.w3.org/1999/xhtml\">\n  <block type=\"pxt-on-start\"></block>\n  <block type=\"device_forever\"></block>\n</xml>"]]}]},{"type":"edited","filename":"main.ts","patch":[{"start1":0,"length1":421,"diffs":[[1,""]]},{"start1":1,"length1":306,"diffs":[[1,""]]}]},{"type":"edited","filename":"pxt.json","patch":[{"start1":225,"length1":38,"diffs":[[1,"    \"additionalFilePaths\": []\n"]]},{"start1":257,"length1":0,"diffs":[[1,"prj\"\n}\n"]]}]}]},{"timestamp":1743009374181,"editorVersion":"7.0.57","changes":[{"type":"edited","filename":"main.blocks","patch":[{"start1":0,"length1":10239,"diffs":[[1,"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables></variables><block type=\"pxt-on-start\" x=\"20\" y=\"20\"></block><block type=\"device_forever\" x=\"225\" y=\"20\"></block></xml>"]]}]},{"type":"edited","filename":"main.ts","patch":[{"start1":460,"length1":20,"diffs":[[1,"    basic.pause(1000)\n"]]},{"start1":507,"length1":85,"diffs":[[1,"    if ((y - 1000) <= -100) {\n        times = times + 1\n        basic.showNumber(times)\n"]]},{"start1":601,"length1":196,"diffs":[[1,""]]},{"start1":650,"length1":16,"diffs":[[1,""]]},{"start1":651,"length1":50,"diffs":[[1,""]]},{"start1":679,"length1":0,"diffs":[[1,"    Acceleration()\n"]]},{"start1":725,"length1":29,"diffs":[[1,""]]}]}]},{"timestamp":1743017150257,"editorVersion":"7.0.57","changes":[{"type":"edited","filename":"main.blocks","patch":[{"start1":0,"length1":5483,"diffs":[[1,"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"3Iq/FO?:PAUiUL=y{Q%b\">x</variable><variable id=\"%eIZQ5^H]NX7q*|17hL-\">y</variable><variable id=\"%IrzR}F*T,/PfvF0ZOo}\">z</variable><variable id=\"W(NcC;n;;[sD^J7*@tL}\">times</variable><variable id=\"O#qq1Sj:6D0:-0L1~A]e\">SPflag</variable></variables><block type=\"function_definition\" x=\"10\" y=\"10\"><mutation name=\"Acceleration\" functionid=\"JPJv{6HbzG!%r6ut:7q[\"></mutation><field name=\"function_name\">Acceleration</field><statement name=\"STACK\"><block type=\"variables_set\"><field name=\"VAR\" id=\"3Iq/FO?:PAUiUL=y{Q%b\">x</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_acceleration\"><field name=\"NAME\">Dimension.X</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"%eIZQ5^H]NX7q*|17hL-\">y</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_acceleration\"><field name=\"NAME\">Dimension.Y</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"%IrzR}F*T,/PfvF0ZOo}\">z</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_acceleration\"><field name=\"NAME\">Dimension.Z</field></block></value><next><block type=\"serial_writevalue\"><value name=\"name\"><shadow type=\"text\"><field name=\"TEXT\">X</field></shadow></value><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"3Iq/FO?:PAUiUL=y{Q%b\">x</field></block></value><next><block type=\"serial_writevalue\"><value name=\"name\"><shadow type=\"text\"><field name=\"TEXT\">Y</field></shadow></value><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"%eIZQ5^H]NX7q*|17hL-\">y</field></block></value><next><block type=\"serial_writevalue\"><value name=\"name\"><shadow type=\"text\"><field name=\"TEXT\">Z</field></shadow></value><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"%IrzR}F*T,/PfvF0ZOo}\">z</field></block></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">100</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"10\" y=\"10\"><mutation name=\"Count_Curl\" functionid=\"~JTl_5QUar?ETQ1VS=6D\"></mutation><field name=\"function_name\">Count_Curl</field><statement name=\"STACK\"><block type=\"device_pause\"><comment pinned=\"false\" h=\"80\" w=\"160\">彎舉</comment><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">1000</field></shadow></value><next><block type=\"controls_if\"><comment pinned=\"false\" h=\"80\" w=\"160\">sendBLEMessage();</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GTE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"%eIZQ5^H]NX7q*|17hL-\">y</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">600</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"W(NcC;n;;[sD^J7*@tL}\">times</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"W(NcC;n;;[sD^J7*@tL}\">times</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><next><block type=\"device_show_number\"><value name=\"number\"><block type=\"variables_get\"><field name=\"VAR\" id=\"W(NcC;n;;[sD^J7*@tL}\">times</field></block></value></block></next></block></statement></block></next></block></statement></block><block type=\"function_definition\" x=\"10\" y=\"10\"><mutation name=\"Count_ShoulderPress\" functionid=\"|VFv79ie+}/x21xkS0Vz\"></mutation><field name=\"function_name\">Count_ShoulderPress</field><statement name=\"STACK\"><block type=\"device_pause\"><comment pinned=\"false\" h=\"80\" w=\"160\">肩推</comment><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">1000</field></shadow></value><next><block type=\"controls_if\"><mutation elseif=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">sendBLEMessage();</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">OR</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">OR</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">OR</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"3Iq/FO?:PAUiUL=y{Q%b\">x</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">800</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"3Iq/FO?:PAUiUL=y{Q%b\">x</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">-800</field></shadow></value></block></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"%IrzR}F*T,/PfvF0ZOo}\">z</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">800</field></shadow></value></block></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"%IrzR}F*T,/PfvF0ZOo}\">z</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">-800</field></shadow></value></block></value></block></value><statement name=\"DO0\"><block type=\"device_print_message\"><value name=\"text\"><shadow type=\"text\"><field name=\"TEXT\">S</field></shadow></value></block></statement><value name=\"IF1\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GTE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"%eIZQ5^H]NX7q*|17hL-\">y</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1000</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">600</field></shadow></value></block></value><statement name=\"DO1\"><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">100</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"O#qq1Sj:6D0:-0L1~A]e\">SPflag</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></block></value></block></next></block></statement><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"O#qq1Sj:6D0:-0L1~A]e\">SPflag</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></block></value></block></value><statement name=\"DO0\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LTE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"%eIZQ5^H]NX7q*|17hL-\">y</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1000</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">600</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"W(NcC;n;;[sD^J7*@tL}\">times</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"W(NcC;n;;[sD^J7*@tL}\">times</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"O#qq1Sj:6D0:-0L1~A]e\">SPflag</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"logic_boolean\"><field name=\"BOOL\">FALSE</field></block></value></block></next></block></statement></block></statement></block></next></block></next></block></statement></block><block type=\"device_forever\" x=\"225\" y=\"20\"><comment pinned=\"false\" h=\"80\" w=\"160\">Count_ShoulderPress();</comment><statement name=\"HANDLER\"><block type=\"function_call\"><mutation name=\"Acceleration\" functionid=\"JPJv{6HbzG!%r6ut:7q[\"></mutation></block></statement></block></xml>"]]}]},{"type":"edited","filename":"main.ts","patch":[{"start1":0,"length1":116,"diffs":[[1,"function Acceleration() {\n"]]},{"start1":259,"length1":0,"diffs":[[1,"function Count_Curl() { //彎舉\n    basic.pause(1000)\n    // sendBLEMessage();\n    if (y >= 600) {\n        times = times + 1\n        basic.showNumber(times)\n    }\n}\n\nfunction Count_ShoulderPress() { //肩推\n    basic.pause(10)\n    // sendBLEMessage();\n    if (x > 800 || x < -800 || z > 800 || z < -800) {\n        basic.showString('S');\n    }\n    else if (SPflag == 1) {\n        if (y <= -1000) {  // -1200\n            times = times + 1;\n            SPflag = 2;\n        }\n    }\n    else if (y >= -900) { // -400\n        SPflag = 1;\n    }\n\n}\n\n\n"]]},{"start1":840,"length1":334,"diffs":[[1,"\nlet SPflag = 0;\n\nbasic.forever(function (){\n    Acceleration();\n"]]},{"start1":936,"length1":19,"diffs":[[1,"    Count_ShoulderPress();\n    basic.showNumber(times);\n"]]}]},{"type":"edited","filename":"pxt.json","patch":[{"start1":93,"length1":52,"diffs":[[1,"        \"radio\": \"*\",\n        \"microphone\": \"*\"\n"]]},{"start1":205,"length1":76,"diffs":[[1,"        .md\"\n   ts\"\n"]]},{"start1":232,"length1":35,"diffs":[[1,"    \"preferredEditor\": \"tsprj\"\n"]]}]},{"type":"added","filename":"Back.ts","value":"\nnamespace Back {\n    export function Count_ShoulderPress(x: number, y: number, z: number) { //肩推\n        basic.pause(10)\n        // sendBLEMessage();\n        if (x > 800 || x < -800 || z > 800 || z < -800) {\n            basic.showString('S');\n        }\n        else if (SPflag == 1) {\n            if (y <= -1000) { //包含重力加速度\n                times = times + 1;\n                SPflag = 2;\n            }\n        }\n        else if (y >= -900) { //包含重力加速度\n            SPflag = 1;\n        }\n    }\n}\n"},{"type":"added","filename":"Arm.ts","value":"namespace Arm{\n    export function Count_Curl(x: number, y: number, z: number) { //彎舉\n        basic.pause(100)\n        if (y >= 600) {\n            times = times + 1\n        }\n    }\n}"},{"type":"added","filename":"main.py","value":"def BluetoothSend():\n    bluetooth.uart_write_number(times)\n    basic.pause(1000)\ndef Acceleration():\n    global x, y, z\n    x = input.acceleration(Dimension.X)\n    y = input.acceleration(Dimension.Y)\n    z = input.acceleration(Dimension.Z)\n    serial.write_value(\"X\", x)\n    serial.write_value(\"Y\", y)\n    serial.write_value(\"Z\", z)\n    basic.pause(100)\ntimes = 0\nBTflag = 0\nSPflag = 0\nx = 0\ny = 0\nz = 0\nbluetooth.start_uart_service()\nbluetooth.set_transmit_power(7)\n\ndef on_forever():\n    Back.Count_ShoulderPress(x, y, z)\n    basic.show_number(times)\n    \n    def on_bluetooth_connected():\n        global BTflag\n        BTflag = 1\n    bluetooth.on_bluetooth_connected(on_bluetooth_connected)\n    \n    if BTflag == 1:\n        BluetoothSend()\nbasic.forever(on_forever)\n\ndef on_forever2():\n    Acceleration()\nbasic.forever(on_forever2)\n"}]},{"timestamp":1743079658370,"editorVersion":"7.0.61","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":482,"length1":2,"diffs":[[1,""]]},{"start1":510,"length1":60,"diffs":[[1,"    Back.Count_ShoulderPress(x, y, z)\nbasic.showNumber(times)\n"]]},{"start1":727,"length1":5,"diffs":[[1,""]]},{"start1":730,"length1":1,"diffs":[[1,""]]}]},{"type":"edited","filename":"pxt.json","patch":[{"start1":292,"length1":31,"diffs":[[1,"    \"preferredEditor\": \"blocksprj\"\n"]]}]},{"type":"edited","filename":"main.py","patch":[{"start1":365,"length1":29,"diffs":[[1,""]]},{"start1":376,"length1":0,"diffs":[[1,"SPflag = 0\nx = 0\ny = 0\nz = 0\n"]]},{"start1":487,"length1":115,"diffs":[[1,"    Back.Count_ShoulderPress(x, y, z)\n    basic.show_number(times)\n"]]},{"start1":559,"length1":86,"diffs":[[1,"    def on_bluetooth_connected():\n        global BTflag\n        BTflag = 1\n    bluetooth.on_bluetooth_connected(on_bluetooth_connected)\n"]]},{"start1":700,"length1":82,"diffs":[[1,"    if BTflag == 1:\n        BluetoothSend()\n"]]},{"start1":770,"length1":0,"diffs":[[1,"\ndef on_forever2():\n    Acceleration()\nbasic.forever(on_forever2)\n"]]}]}]},{"timestamp":1743950914086,"editorVersion":"7.0.61","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":0,"length1":0,"diffs":[[1,"function BluetoothSend () {\n    bluetooth.uartWriteNumber(times)\n    basic.pause(1000)\n}\n"]]},{"start1":423,"length1":14,"diffs":[[1,""]]},{"start1":483,"length1":172,"diffs":[[1,""]]},{"start1":484,"length1":306,"diffs":[[1,""]]},{"start1":541,"length1":29,"diffs":[[1,"    basic.showNumber(times);/*\n    bluetooth.onBluetoothConnected(function on_bluetooth_connected() {\n        \n        BTflag = 1\n    })\nif (BTflag == 1) {\n        BluetoothSend()\n    }\n})*/\n"]]},{"start1":783,"length1":5,"diffs":[[1,""]]},{"start1":786,"length1":154,"diffs":[[1,""]]}]},{"type":"edited","filename":"pxt.json","patch":[{"start1":120,"length1":52,"diffs":[[1,"        \"bluetooth\": \"*\"\n"]]}]}]},{"timestamp":1745262252232,"editorVersion":"7.0.61","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":789,"length1":39,"diffs":[[1,"    bluetooth.uartWriteNumber(times);\n\n    //bluetooth.uartWriteNumber(times)\n"]]}]}]},{"timestamp":1746756430599,"editorVersion":"7.0.61","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":0,"length1":31,"diffs":[[1,"function Acceleration () {\n"]]},{"start1":260,"length1":1,"diffs":[[1,""]]},{"start1":334,"length1":13,"diffs":[[1,"let test = 0;\n"]]},{"start1":407,"length1":67,"diffs":[[1,"\nbluetooth.onBluetoothConnected(function () {\n"]]},{"start1":490,"length1":94,"diffs":[[1,"    BluetoothSend();\n"]]},{"start1":514,"length1":73,"diffs":[[1,"bluetooth.onBluetoothDisconnected(function () {\n"]]},{"start1":580,"length1":16,"diffs":[[1,""]]},{"start1":581,"length1":222,"diffs":[[1,"// 傳送次數資料給藍牙裝置\n"]]},{"start1":623,"length1":64,"diffs":[[1,"    if(test == 0) {\n        basic.pause(5000)  // 等接收端準備好\n        //bluetooth.uartWriteNumber(12512);\n        test = 1;\n"]]},{"start1":789,"length1":57,"diffs":[[1,"    bluetooth.uartWriteNumber(times);\\\n    pause(100);\n"]]},{"start1":848,"length1":96,"diffs":[[1,"basic.forever(function () {\n    Arm.Count_Curl(x, y, z);\n    basic.showNumber(times);\n"]]},{"start1":937,"length1":39,"diffs":[[1,"\nbasic.forever(function () {\n"]]},{"start1":985,"length1":0,"diffs":[[1,"    \n"]]},{"start1":993,"length1":51,"diffs":[[1,"\ncontrol.inBackground(function () {\n"]]},{"start1":1113,"length1":39,"diffs":[[1,""]]}]},{"type":"edited","filename":"main.py","patch":[{"start1":0,"length1":0,"diffs":[[1,"def BluetoothSend():\n    bluetooth.uart_write_number(times)\n    basic.pause(1000)\n"]]},{"start1":405,"length1":9,"diffs":[[1,""]]},{"start1":468,"length1":52,"diffs":[[1,""]]},{"start1":469,"length1":838,"diffs":[[1,""]]},{"start1":487,"length1":28,"diffs":[[1,"    Arm\n    \"\"\"\n    basic.showNumber(times)\n    bluetooth.onBluetoothConnected(function on_bluetooth_connected() {\n    \n    BTflag = 1\n    })\n    if (BTflag == 1) {\n    BluetoothSend()\n    }\n    })\n    \"\"\"\n    \n    def on_forever2():\n        Acceleration()\n    basic.forever(on_forever2)\n    \n"]]},{"start1":806,"length1":253,"diffs":[[1,""]]}]}]},{"timestamp":1746764172946,"editorVersion":"7.0.61","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":703,"length1":0,"diffs":[[1,"//  傳送次數資料給藍牙裝置\n"]]},{"start1":720,"length1":16,"diffs":[[1,""]]},{"start1":802,"length1":258,"diffs":[[1,"    let received = bluetooth.uartReadUntil(serial.delimiters(Delimiters.NewLine))\n    basic.showString(received)\n    //BluetoothSend();\n"]]},{"start1":942,"length1":1,"diffs":[[1,""]]}]}]},{"timestamp":1746904974983,"editorVersion":"7.0.61","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":26,"length1":260,"diffs":[[1,"    \n    x = input.acceleration(Dimension.X)\n    y = input.acceleration(Dimension.Y)\n    z = input.acceleration(Dimension.Z)\n    serial.writeValue(\"X\", x)\n    serial.writeValue(\"Y\", y)\n    serial.writeValue(\"Z\", z)\n    basic.pause(100)\n"]]},{"start1":324,"length1":51,"diffs":[[1,"let BTflag = 0\n"]]},{"start1":500,"length1":0,"diffs":[[1,"    BTflag = 1\n"]]},{"start1":549,"length1":0,"diffs":[[1,"    //serial.writeValue(\"test\", test)\n    //BluetoothSend()\n"]]},{"start1":612,"length1":1,"diffs":[[1,""]]},{"start1":1013,"length1":266,"diffs":[[1,"        basic.showNumber(value)  // 顯示數字\n"]]},{"start1":1064,"length1":158,"diffs":[[1,"\nfunction BluetoothSend() {\n    if (test == 0) {\n        basic.pause(5000)\n        test = 1\n        serial.writeValue(\"test\", test)\n    }\n    \n    bluetooth.uartWriteNumber(times)\n    pause(100)\n"]]},{"start1":1301,"length1":275,"diffs":[[1,"    Arm.Count_Curl(x, y, z)\n    //basic.showNumber(times)\n"]]},{"start1":1401,"length1":52,"diffs":[[1,"    Acceleration()\n"]]},{"start1":1423,"length1":53,"diffs":[[1,"control.inBackground(function on_in_background() {\n"]]},{"start1":1631,"length1":2,"diffs":[[1,""]]}]},{"type":"edited","filename":"Back.ts","patch":[{"start1":122,"length1":0,"diffs":[[1,"        // sendBLEMessage();\n"]]}]},{"type":"edited","filename":"Arm.ts","patch":[{"start1":111,"length1":24,"diffs":[[1,"        if (y >= 600) {\n"]]}]}]},{"timestamp":1746964816381,"editorVersion":"7.0.61","changes":[{"type":"edited","filename":"main.blocks","patch":[{"start1":0,"length1":10550,"diffs":[[1,"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"$W#TD3}i@Qp2NSg=g8)0\">times</variable><variable id=\"aN(`Fs;zaZS[EB-l}~m!\">x</variable><variable id=\"1J~7m7k?7MyBG%XO7{P_\">y</variable><variable id=\"N]R+O:rLGJ8m}jRb_DUr\">z</variable><variable id=\"(P=Wxr;_%1o1^M~0{ztt\">BTflag</variable><variable id=\"*PuPK72H3QE4)l{D[==J\">SPflag</variable></variables><block type=\"pxt-on-start\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let z = 0\" numlines=\"1\" declaredvars=\"z\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let y = 0\" numlines=\"1\" declaredvars=\"y\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let x = 0\" numlines=\"1\" declaredvars=\"x\"></mutation><next><block type=\"variables_set\"><field name=\"VAR\" id=\"*PuPK72H3QE4)l{D[==J\">SPflag</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let BTflag = 0\" numlines=\"1\" declaredvars=\"BTflag\"></mutation><next><block type=\"bluetooth_start_uart_service\"><next><block type=\"bluetooth_settransmitpower\"><value name=\"power\"><shadow type=\"math_number\"><field name=\"NUM\">7</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"device_forever\" x=\"371\" y=\"0\"><statement name=\"HANDLER\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"Back.Count_ShoulderPress(x, y, z)\" numlines=\"1\"></mutation><next><block type=\"device_show_number\"><value name=\"number\"><block type=\"variables_get\"><field name=\"VAR\" id=\"$W#TD3}i@Qp2NSg=g8)0\">times</field></block></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"bluetooth.onBluetoothConnected(function on_bluetooth_connected() {\" line1=\"        \" line2=\"        BTflag = 1\" line3=\"    })\" numlines=\"4\"></mutation><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"(P=Wxr;_%1o1^M~0{ztt\">BTflag</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"function_call\"><mutation name=\"BluetoothSend\" functionid=\"ja9i%l,)@bF,Vh].1xx?\"></mutation></block></statement></block></next></block></next></block></next></block></statement></block><block type=\"device_forever\" x=\"1029\" y=\"0\"><statement name=\"HANDLER\"><block type=\"function_call\"><mutation name=\"Acceleration\" functionid=\"7VmaBmNeew;*8B.~nU%R\"></mutation></block></statement></block><block type=\"function_definition\" x=\"1255\" y=\"0\"><mutation name=\"Acceleration\" functionid=\"7VmaBmNeew;*8B.~nU%R\"></mutation><field name=\"function_name\">Acceleration</field><statement name=\"STACK\"><block type=\"variables_set\"><field name=\"VAR\" id=\"aN(`Fs;zaZS[EB-l}~m!\">x</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_acceleration\"><field name=\"NAME\">Dimension.X</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"1J~7m7k?7MyBG%XO7{P_\">y</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_acceleration\"><field name=\"NAME\">Dimension.Y</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"N]R+O:rLGJ8m}jRb_DUr\">z</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_acceleration\"><field name=\"NAME\">Dimension.Z</field></block></value><next><block type=\"serial_writevalue\"><value name=\"name\"><shadow type=\"text\"><field name=\"TEXT\">X</field></shadow></value><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"aN(`Fs;zaZS[EB-l}~m!\">x</field></block></value><next><block type=\"serial_writevalue\"><value name=\"name\"><shadow type=\"text\"><field name=\"TEXT\">Y</field></shadow></value><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"1J~7m7k?7MyBG%XO7{P_\">y</field></block></value><next><block type=\"serial_writevalue\"><value name=\"name\"><shadow type=\"text\"><field name=\"TEXT\">Z</field></shadow></value><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"N]R+O:rLGJ8m}jRb_DUr\">z</field></block></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">100</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"0\" y=\"525\"><mutation name=\"BluetoothSend\" functionid=\"ja9i%l,)@bF,Vh].1xx?\"></mutation><field name=\"function_name\">BluetoothSend</field><statement name=\"STACK\"><block type=\"bluetooth_uart_writenumber\"><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"$W#TD3}i@Qp2NSg=g8)0\">times</field></block></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">1000</field></shadow></value></block></next></block></statement></block></xml>"]]}]},{"type":"edited","filename":"main.ts","patch":[{"start1":0,"length1":472,"diffs":[[1,"function Acceleration() {\n        x = input.acceleration(Dimension.X)\n        y = input.acceleration(Dimension.Y)\n        z = input.acceleration(Dimension.Z)\n        serial.writeValue(\"X\", x)\n        serial.writeValue(\"Y\", y)\n        serial.writeValue(\"Z\", z)\n        basic.pause(100) \n"]]},{"start1":288,"length1":45,"diffs":[[1,"\nlet times = 0\nlet z = 0\nlet y = 0\nlet x = 0\nlet SPflag = 0\nlet BTflag = 0 //連接成功，開始偵測\nlet ID = 100; //運動動作ID\n\nlet test = 0\nbluetooth.startUartService()\nbluetooth.setTransmitPower(7)\nbluetooth.onBluetoothConnected(function on_bluetooth_connected() {\n"]]},{"start1":597,"length1":48,"diffs":[[1,"\nbluetooth.onBluetoothDisconnected(function on_bluetooth_disconnected() {\n"]]},{"start1":689,"length1":15,"diffs":[[1,"\n//  傳送動作ID給藍牙裝置\n"]]},{"start1":788,"length1":99,"diffs":[[1,"    let raw = bluetooth.uartReadUntil(serial.delimiters(Delimiters.NewLine))\n    let value = parseInt(raw)\n\n"]]},{"start1":938,"length1":56,"diffs":[[1,"        basic.showIcon(IconNames.Sad) // 顯示錯誤訊息\n"]]},{"start1":999,"length1":19,"diffs":[[1,"        ID = value;\n"]]},{"start1":1274,"length1":24,"diffs":[[1,"\nfunction Countdown(){\n"]]},{"start1":1337,"length1":20,"diffs":[[1,"    basic.showNumber(2)\n"]]},{"start1":1377,"length1":20,"diffs":[[1,"    basic.showNumber(1)\n"]]},{"start1":1417,"length1":11,"diffs":[[1,"    BTflag = 1;\n"]]},{"start1":1435,"length1":299,"diffs":[[1,"\n\nbasic.forever(function on_forever() {\n    if(BTflag == 1){\n"]]},{"start1":1651,"length1":24,"diffs":[[1,"        basic.showNumber(times)\n"]]},{"start1":1743,"length1":6,"diffs":[[1,"    } \n"]]},{"start1":1753,"length1":28,"diffs":[[1,"basic.forever(function on_forever2() {\n"]]},{"start1":1847,"length1":0,"diffs":[[1,"/*control.inBackground(function on_in_background() {\n    while (true) {\n        if (BTflag == 1) {\n            BluetoothSend()\n        }\n        \n        // BluetoothReceive()\n        basic.pause(100)\n    }\n})\n*/"]]}]},{"type":"edited","filename":"pxt.json","patch":[{"start1":294,"length1":39,"diffs":[[1,"        \"main.py\"\n"]]},{"start1":319,"length1":286,"diffs":[[1,"    \"preferredEditor\": \"tsprj\"\n"]]}]},{"type":"edited","filename":"Back.ts","patch":[{"start1":18,"length1":82,"diffs":[[1,"    export function Count_ShoulderPress(x: number, y: number, z: number) { //肩推\n"]]}]},{"type":"edited","filename":"Arm.ts","patch":[{"start1":135,"length1":29,"diffs":[[1,"            times = times + 1\n"]]}]},{"type":"added","filename":"custom.ts","value":"\n"}]},{"timestamp":1747335612792,"editorVersion":"7.0.61","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":1775,"length1":15,"diffs":[[1,""]]}]}]},{"timestamp":1747371336688,"editorVersion":"7.0.61","changes":[{"type":"edited","filename":"main.blocks","patch":[{"start1":0,"length1":8268,"diffs":[[1,"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"`IeWwjN`pk)|MGv5Rqhh\">x</variable><variable id=\"1%Jq$@L9$U=Q%`IeS+dh\">y</variable><variable id=\"_Wa|5f^1[O?p|reEQp;3\">z</variable><variable id=\"vF${i8,0N=(06oj%vCc=\">BTflag</variable><variable id=\",!akF+$K6N2i-BQL!)P+\">raw</variable><variable id=\"zbpjQ^cTYsQ#YMKf7Qy9\">value</variable><variable id=\"|mFykunz{uYY6nT7[=ED\">ID</variable><variable id=\"k0ek~99^yQb.5Q(;COcy\">times</variable><variable id=\"KA`.gc?mmK{?a`VV;~4Z\">test</variable><variable id=\"_K5H(!_,ezTHUdB/p1AA\">SPflag</variable></variables><comment x=\"701\" y=\"875\" w=\"480\" h=\"360\">\ncontrol.inBackground(function on_in_background() {\n"]]},{"start1":690,"length1":1,"diffs":[[1,""]]},{"start1":709,"length1":1,"diffs":[[1,""]]},{"start1":725,"length1":1,"diffs":[[1,""]]},{"start1":750,"length1":1,"diffs":[[1,""]]},{"start1":767,"length1":1,"diffs":[[1,""]]},{"start1":769,"length1":3045,"diffs":[[1,"})\n</comment><block type=\"pxt-on-start\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"KA`.gc?mmK{?a`VV;~4Z\">test</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let BTflag = 0\" numlines=\"1\" declaredvars=\"BTflag\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">連接成功，開始偵測</comment><next><block type=\"variables_set\"><field name=\"VAR\" id=\"_K5H(!_,ezTHUdB/p1AA\">SPflag</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let x = 0\" numlines=\"1\" declaredvars=\"x\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let y = 0\" numlines=\"1\" declaredvars=\"y\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let z = 0\" numlines=\"1\" declaredvars=\"z\"></mutation><next><block type=\"variables_set\"><field name=\"VAR\" id=\"|mFykunz{uYY6nT7[=ED\">ID</field><comment pinned=\"false\" h=\"80\" w=\"160\">運動動作ID</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">100</field></shadow></value><next><block type=\"bluetooth_start_uart_service\"><next><block type=\"bluetooth_settransmitpower\"><value name=\"power\"><shadow type=\"math_number\"><field name=\"NUM\">7</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"bluetooth_on_connected\" x=\"371\" y=\"0\"><statement name=\"HANDLER\"><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">7000</field></shadow></value><next><block type=\"basic_show_icon\"><field name=\"i\">IconNames.Yes</field></block></next></block></statement></block><block type=\"bluetooth_on_data_received\" x=\"626\" y=\"0\"><comment pinned=\"false\" h=\"80\" w=\"160\">傳送動作ID給藍牙裝置</comment><value name=\"delimiters\"><shadow type=\"serial_delimiter_conv\"><field name=\"del\">Delimiters.NewLine</field></shadow></value><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\",!akF+$K6N2i-BQL!)P+\">raw</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"bluetooth_uart_read\"><value name=\"del\"><shadow type=\"serial_delimiter_conv\"><field name=\"del\">Delimiters.NewLine</field></shadow></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"zbpjQ^cTYsQ#YMKf7Qy9\">value</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"string_parseint\"><value name=\"text\"><block type=\"variables_get\"><field name=\"VAR\" id=\",!akF+$K6N2i-BQL!)P+\">raw</field></block></value></block></value><next><block type=\"controls_if\"><mutation else=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">檢查是否為有效的數字</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">isNaN(value)</field></block></value><statement name=\"DO0\"><block type=\"basic_show_icon\"><field name=\"i\">IconNames.Sad</field><comment pinned=\"false\" h=\"80\" w=\"160\">顯示錯誤訊息</comment></block></statement><statement name=\"ELSE\"><block type=\"variables_set\"><field name=\"VAR\" id=\"|mFykunz{uYY6nT7[=ED\">ID</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"zbpjQ^cTYsQ#YMKf7Qy9\">value</field></block></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"switch(value){\" line1=\"            case 1:\" line2=\"                Countdown();\" line3=\"                break;\" line4=\"            case 0:\" line5=\"                BTflag = 0;\" line6=\"                basic.showIcon(IconNames.Asleep)\" line7=\"            default:\" line8=\"                break;\" line9=\"        }\" numlines=\"10\"></mutation></block></next></block></statement></block></next></block></next></block></statement></block><block type=\"bluetooth_on_disconnected\" x=\"1232\" y=\"0\"><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"vF${i8,0N=(06oj%vCc=\">BTflag</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></statement></block><block type=\"device_forever\" x=\"1512\" y=\"0\"><statement name=\"HANDLER\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"vF${i8,0N=(06oj%vCc=\">BTflag</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"switch(ID){\" line1=\"           case 1:\" line2=\"                Arm.Count_Curl(x, y, z)\" line3=\"                break;\" line4=\"            default:\" line5=\"                break\" line6=\"        }\" numlines=\"7\"></mutation><next><block type=\"device_show_number\"><value name=\"number\"><block type=\"variables_get\"><field name=\"VAR\" id=\"k0ek~99^yQb.5Q(;COcy\">times</field></block></value><next><block type=\"bluetooth_uart_writenumber\"><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"k0ek~99^yQb.5Q(;COcy\">times</field></block></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"pause(100)\" numlines=\"1\"></mutation></block></next></block></next></block></next></block></statement></block></statement></block><block type=\"device_forever\" x=\"1949\" y=\"0\"><statement name=\"HANDLER\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"vF${i8,0N=(06oj%vCc=\">BTflag</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"function_call\"><mutation name=\"Acceleration\" functionid=\"dL:9MD,?~@*|@w4z_X|?\"></mutation></block></statement></block></statement></block><block type=\"function_definition\" x=\"0\" y=\"875\"><mutation name=\"Acceleration\" functionid=\"dL:9MD,?~@*|@w4z_X|?\"></mutation><field name=\"function_name\">Acceleration</field><statement name=\"STACK\"><block type=\"variables_set\"><field name=\"VAR\" id=\"`IeWwjN`pk)|MGv5Rqhh\">x</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_acceleration\"><field name=\"NAME\">Dimension.X</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"1%Jq$@L9$U=Q%`IeS+dh\">y</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_acceleration\"><field name=\"NAME\">Dimension.Y</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"_Wa|5f^1[O?p|reEQp;3\">z</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_acceleration\"><field name=\"NAME\">Dimension.Z</field></block></value><next><block type=\"serial_writevalue\"><value name=\"name\"><shadow type=\"text\"><field name=\"TEXT\">X</field></shadow></value><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"`IeWwjN`pk)|MGv5Rqhh\">x</field></block></value><next><block type=\"serial_writevalue\"><value name=\"name\"><shadow type=\"text\"><field name=\"TEXT\">Y</field></shadow></value><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"1%Jq$@L9$U=Q%`IeS+dh\">y</field></block></value><next><block type=\"serial_writevalue\"><value name=\"name\"><shadow type=\"text\"><field name=\"TEXT\">Z</field></shadow></value><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"_Wa|5f^1[O?p|reEQp;3\">z</field></block></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">100</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"422\" y=\"875\"><mutation name=\"Countdown\" functionid=\"1~r7/,O].n+5ZYtvi{?s\"></mutation><field name=\"function_name\">Countdown</field><statement name=\"STACK\"><block type=\"device_show_number\"><value name=\"number\"><shadow type=\"math_number\"><field name=\"NUM\">3</field></shadow></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"pause(1000)\" numlines=\"1\"></mutation><next><block type=\"device_show_number\"><value name=\"number\"><shadow type=\"math_number\"><field name=\"NUM\">2</field></shadow></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"pause(1000)\" numlines=\"1\"></mutation><next><block type=\"device_show_number\"><value name=\"number\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"pause(1000)\" numlines=\"1\"></mutation><next><block type=\"variables_set\"><field name=\"VAR\" id=\"vF${i8,0N=(06oj%vCc=\">BTflag</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block></xml>"]]}]},{"type":"edited","filename":"main.ts","patch":[{"start1":0,"length1":206,"diffs":[[1,"/**\n * control.inBackground(function on_in_background() {\n * \n * while (true) {\n * \n * if (BTflag == 1) {\n * \n * BluetoothSend()\n * \n * }\n * \n * // BluetoothReceive()\n * \n * basic.pause(100)\n * \n * }\n * \n * })\n */\n"]]},{"start1":1374,"length1":13,"diffs":[[1,""]]},{"start1":1388,"length1":0,"diffs":[[1,"let raw = \"\"\n"]]},{"start1":1498,"length1":25,"diffs":[[1,"let times = 0 //計算偵測總次數\n"]]},{"start1":1570,"length1":38,"diffs":[[1,""]]},{"start1":1651,"length1":23,"diffs":[[1,"        let times = 0\n"]]},{"start1":1693,"length1":67,"diffs":[[1,"           case 1:\n                Arm.Count_Curl(x, y, z)\n"]]},{"start1":1775,"length1":99,"diffs":[[1,"            ca\n"]]},{"start1":1811,"length1":23,"diffs":[[1,"                break\n"]]},{"start1":1843,"length1":67,"diffs":[[1,"basic.showNumber(times)\n        bluetooth.uartWriteNumber(times)\n"]]},{"start1":1964,"length1":23,"diffs":[[1,"    if (BTflag == 1) {\n"]]},{"start1":2016,"length1":5,"diffs":[[1,""]]},{"start1":2019,"length1":277,"diffs":[[1,""]]}]}]},{"timestamp":1747378807242,"editorVersion":"7.0.61","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":1563,"length1":0,"diffs":[[1,"// bluetooth.setDeviceName(\"TofuBit\")\n"]]},{"start1":1682,"length1":0,"diffs":[[1,"        let times2 = 0\n"]]},{"start1":1968,"length1":65,"diffs":[[1,"basic.showNumber(times2)\n        bluetooth.uartWriteNumber(times2)\n"]]},{"start1":2091,"length1":23,"diffs":[[1,"    if (BTflag == 0) {\n"]]}]},{"type":"edited","filename":"pxt.json","patch":[{"start1":468,"length1":140,"diffs":[[1,"                    \"open\": 1,\n                    \"whitelist\": 0,\n                    \"security_level\": null\n"]]}]},{"type":"edited","filename":"Back.ts","patch":[{"start1":217,"length1":11,"diffs":[[1,"        }\n"]]}]},{"type":"edited","filename":"Arm.ts","patch":[{"start1":111,"length1":24,"diffs":[[1,"        if (y >= 550) {\n"]]}]}]},{"timestamp":1752776845280,"editorVersion":"8.0.8","changes":[{"type":"edited","filename":"Back.ts","patch":[{"start1":217,"length1":13,"diffs":[[1,"        } \n"]]}]}]},{"timestamp":1752776846163,"editorVersion":"8.0.8","changes":[{"type":"edited","filename":"Back.ts","patch":[{"start1":217,"length1":11,"diffs":[[1,"        } kk\n"]]}]}]},{"timestamp":1752776847405,"editorVersion":"8.0.8","changes":[{"type":"edited","filename":"main.blocks","patch":[{"start1":0,"length1":10458,"diffs":[[1,"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"sb2bZ+g4c_#t|_loZLQd\">x</variable><variable id=\"#_0ccTzB2{8#UDLwlhhg\">y</variable><variable id=\"5gGIyo90]!sHc[RgtFJM\">z</variable><variable id=\"964$A`2{Cc+AM^W2k#Bt\">BTflag</variable><variable id=\"u;aSP@j/4WvkbOzNbngh\">raw</variable><variable id=\"zXk3N^64@;fc7GMB(Fsd\">value</variable><variable id=\"kU7Q`R?qrenz4h5?=0V7\">ID</variable><variable id=\"5$1o0}NLIi,0xf1Z{7)G\">times2</variable><variable id=\"E^G^urU^i!f;N6MDdn^k\">test</variable><variable id=\"K;vjAhooSk8])$u:h6rn\">SPflag</variable><variable id=\"emTM-^*~I8NDg~?;8MxH\">times</variable></variables><block type=\"pxt-on-start\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let value = 0\" numlines=\"1\" declaredvars=\"value\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let ID = 0\" numlines=\"1\" declaredvars=\"ID\"></mutation><next><block type=\"variables_set\"><field name=\"VAR\" id=\"E^G^urU^i!f;N6MDdn^k\">test</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let BTflag = 0\" numlines=\"1\" declaredvars=\"BTflag\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">連接成功，開始偵測</comment><next><block type=\"variables_set\"><field name=\"VAR\" id=\"K;vjAhooSk8])$u:h6rn\">SPflag</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let x = 0\" numlines=\"1\" declaredvars=\"x\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let y = 0\" numlines=\"1\" declaredvars=\"y\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let z = 0\" numlines=\"1\" declaredvars=\"z\"></mutation><next><block type=\"variables_set\"><field name=\"VAR\" id=\"emTM-^*~I8NDg~?;8MxH\">times</field><comment pinned=\"false\" h=\"80\" w=\"160\">計算偵測總次數</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"kU7Q`R?qrenz4h5?=0V7\">ID</field><comment pinned=\"false\" h=\"80\" w=\"160\">運動動作ID</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">100</field></shadow></value><next><block type=\"bluetooth_start_uart_service\"><next><block type=\"bluetooth_settransmitpower\"><comment pinned=\"false\" h=\"80\" w=\"160\">bluetooth.setDeviceName(\"TofuBit\")</comment><value name=\"power\"><shadow type=\"math_number\"><field name=\"NUM\">7</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"bluetooth_on_connected\" x=\"371\" y=\"0\"><statement name=\"HANDLER\"><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">7000</field></shadow></value><next><block type=\"basic_show_icon\"><field name=\"i\">IconNames.Yes</field></block></next></block></statement></block><block type=\"bluetooth_on_data_received\" x=\"626\" y=\"0\"><comment pinned=\"false\" h=\"80\" w=\"160\">傳送動作ID給藍牙裝置</comment><value name=\"delimiters\"><shadow type=\"serial_delimiter_conv\"><field name=\"del\">Delimiters.NewLine</field></shadow></value><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"u;aSP@j/4WvkbOzNbngh\">raw</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"bluetooth_uart_read\"><value name=\"del\"><shadow type=\"serial_delimiter_conv\"><field name=\"del\">Delimiters.NewLine</field></shadow></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"zXk3N^64@;fc7GMB(Fsd\">value</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"string_parseint\"><value name=\"text\"><block type=\"variables_get\"><field name=\"VAR\" id=\"u;aSP@j/4WvkbOzNbngh\">raw</field></block></value></block></value><next><block type=\"controls_if\"><mutation else=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">檢查是否為有效的數字</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">isNaN(value)</field></block></value><statement name=\"DO0\"><block type=\"basic_show_icon\"><field name=\"i\">IconNames.Sad</field><comment pinned=\"false\" h=\"80\" w=\"160\">顯示錯誤訊息</comment></block></statement><statement name=\"ELSE\"><block type=\"variables_set\"><field name=\"VAR\" id=\"kU7Q`R?qrenz4h5?=0V7\">ID</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"zXk3N^64@;fc7GMB(Fsd\">value</field></block></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"switch(value){\" line1=\"            case 1:\" line2=\"                Countdown();\" line3=\"                break;\" line4=\"            case 0:\" line5=\"                BTflag = 0;\" line6=\"                basic.showIcon(IconNames.Asleep)\" line7=\"            default:\" line8=\"                break;\" line9=\"        }\" numlines=\"10\"></mutation></block></next></block></statement></block></next></block></next></block></statement></block><block type=\"bluetooth_on_disconnected\" x=\"1232\" y=\"0\"><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"964$A`2{Cc+AM^W2k#Bt\">BTflag</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></statement></block><block type=\"device_forever\" x=\"1512\" y=\"0\"><statement name=\"HANDLER\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"964$A`2{Cc+AM^W2k#Bt\">BTflag</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"switch(ID){\" line1=\"           case 1: //手臂彎舉\" line2=\"                Arm.Count_Curl(x, y, z);\" line3=\"                break;\" line4=\"            case 2: //肩推\" line5=\"                Back.Count_ShoulderPress(x, y, z);\" line6=\"                break;\" line7=\"            default:\" line8=\"                break;\" line9=\"        }\" numlines=\"10\"></mutation><next><block type=\"device_show_number\"><value name=\"number\"><block type=\"variables_get\"><field name=\"VAR\" id=\"5$1o0}NLIi,0xf1Z{7)G\">times2</field></block></value><next><block type=\"bluetooth_uart_writenumber\"><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"5$1o0}NLIi,0xf1Z{7)G\">times2</field></block></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"pause(100)\" numlines=\"1\"></mutation></block></next></block></next></block></next></block></statement></block></statement></block><block type=\"device_forever\" x=\"0\" y=\"875\"><statement name=\"HANDLER\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"964$A`2{Cc+AM^W2k#Bt\">BTflag</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"function_call\"><mutation name=\"Acceleration\" functionid=\"sU!dT0t%tiSUiKE5r)e.\"></mutation></block></statement></block></statement></block><block type=\"function_definition\" x=\"406\" y=\"875\"><mutation name=\"Acceleration\" functionid=\"sU!dT0t%tiSUiKE5r)e.\"></mutation><field name=\"function_name\">Acceleration</field><comment pinned=\"false\" h=\"80\" w=\"160\">control.inBackground(function on_in_background() {\n"]]},{"start1":8368,"length1":3044,"diffs":[[1,"})</comment><statement name=\"STACK\"><block type=\"variables_set\"><field name=\"VAR\" id=\"sb2bZ+g4c_#t|_loZLQd\">x</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_acceleration\"><field name=\"NAME\">Dimension.X</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"#_0ccTzB2{8#UDLwlhhg\">y</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_acceleration\"><field name=\"NAME\">Dimension.Y</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"5gGIyo90]!sHc[RgtFJM\">z</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_acceleration\"><field name=\"NAME\">Dimension.Z</field></block></value><next><block type=\"serial_writevalue\"><value name=\"name\"><shadow type=\"text\"><field name=\"TEXT\">X</field></shadow></value><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"sb2bZ+g4c_#t|_loZLQd\">x</field></block></value><next><block type=\"serial_writevalue\"><value name=\"name\"><shadow type=\"text\"><field name=\"TEXT\">Y</field></shadow></value><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"#_0ccTzB2{8#UDLwlhhg\">y</field></block></value><next><block type=\"serial_writevalue\"><value name=\"name\"><shadow type=\"text\"><field name=\"TEXT\">Z</field></shadow></value><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"5gGIyo90]!sHc[RgtFJM\">z</field></block></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">100</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"828\" y=\"875\"><mutation name=\"Countdown\" functionid=\"$5%riA@$CS_.Cixg;dgY\"></mutation><field name=\"function_name\">Countdown</field><statement name=\"STACK\"><block type=\"device_show_number\"><value name=\"number\"><shadow type=\"math_number\"><field name=\"NUM\">3</field></shadow></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"pause(1000)\" numlines=\"1\"></mutation><next><block type=\"device_show_number\"><value name=\"number\"><shadow type=\"math_number\"><field name=\"NUM\">2</field></shadow></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"pause(1000)\" numlines=\"1\"></mutation><next><block type=\"device_show_number\"><value name=\"number\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"pause(1000)\" numlines=\"1\"></mutation><next><block type=\"variables_set\"><field name=\"VAR\" id=\"964$A`2{Cc+AM^W2k#Bt\">BTflag</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block></xml>"]]}]}]},{"timestamp":1752777716795,"editorVersion":"8.0.8","changes":[{"type":"edited","filename":"pxt.json","patch":[{"start1":340,"length1":36,"diffs":[[1,"    \"preferredEditor\": \"tsprj\",\n"]]}]}]},{"timestamp":1752777717073,"editorVersion":"8.0.8","changes":[{"type":"edited","filename":"main.blocks","patch":[{"start1":0,"length1":631,"diffs":[[1,"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"vJz|6UYYYjRVeiLXlbHB\">x</variable><variable id=\"eCQ:)biMP%vty.^C_/N[\">y</variable><variable id=\"D8wV,Qbg_s{hOFHB%bwa\">z</variable><variable id=\"{.9VKjwV`#sUsCPq*0Yb\">BTflag</variable><variable id=\")B39X[MJOqtn?M{i@4.2\">raw</variable><variable id=\"K52EvMj3j6S)=?$+bCc0\">value</variable><variable id=\"+||}0kRcFBcV?A{4+(Ew\">ID</variable><variable id=\"`Gf.ZcYj65F#Drn*|q`s\">times</variable><variable id=\"}nD!Nara.~SxEU%qv%Ai\">SPflag</variable><variable id=\"-MX8sd#E!#LR$sNVfzZl\">test</variable></variables><comment x=\"0\" y=\"0\" w=\"160\" h=\"120\">\n"]]},{"start1":628,"length1":53,"diffs":[[1,"</comment><comment x=\"0\" y=\"0\" w=\"320\" h=\"160\">\n"]]},{"start1":764,"length1":9749,"diffs":[[1,"</comment><block type=\"bluetooth_on_connected\" x=\"10\" y=\"10\"><statement name=\"HANDLER\"><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">7000</field></shadow></value><next><block type=\"basic_show_icon\"><field name=\"i\">IconNames.Yes</field></block></next></block></statement></block><block type=\"bluetooth_on_disconnected\" x=\"10\" y=\"10\"><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"{.9VKjwV`#sUsCPq*0Yb\">BTflag</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></statement></block><block type=\"bluetooth_on_data_received\" x=\"10\" y=\"10\"><comment pinned=\"false\" h=\"80\" w=\"160\">傳送動作ID給藍牙裝置</comment><value name=\"delimiters\"><shadow type=\"serial_delimiter_conv\"><field name=\"del\">Delimiters.NewLine</field></shadow></value><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\")B39X[MJOqtn?M{i@4.2\">raw</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"bluetooth_uart_read\"><value name=\"del\"><shadow type=\"serial_delimiter_conv\"><field name=\"del\">Delimiters.NewLine</field></shadow></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"K52EvMj3j6S)=?$+bCc0\">value</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"string_parseint\"><value name=\"text\"><block type=\"variables_get\"><field name=\"VAR\" id=\")B39X[MJOqtn?M{i@4.2\">raw</field></block></value></block></value><next><block type=\"controls_if\"><mutation else=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">檢查是否為有效的數字</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">isNaN(value)</field></block></value><statement name=\"DO0\"><block type=\"basic_show_icon\"><field name=\"i\">IconNames.Sad</field><comment pinned=\"false\" h=\"80\" w=\"160\">顯示錯誤訊息</comment></block></statement><statement name=\"ELSE\"><block type=\"variables_set\"><field name=\"VAR\" id=\"+||}0kRcFBcV?A{4+(Ew\">ID</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"K52EvMj3j6S)=?$+bCc0\">value</field></block></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"switch(value){\" line1=\"            case 1:\" line2=\"                Countdown();\" line3=\"                break;\" line4=\"            case 0:\" line5=\"                BTflag = 0;\" line6=\"                basic.showIcon(IconNames.Asleep)\" line7=\"            default:\" line8=\"                break;\" line9=\"        }\" numlines=\"10\"></mutation></block></next></block></statement></block></next></block></next></block></statement></block><block type=\"device_forever\" x=\"10\" y=\"10\"><statement name=\"HANDLER\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"{.9VKjwV`#sUsCPq*0Yb\">BTflag</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"switch(ID){\" line1=\"           case 1: //手臂彎舉\" line2=\"                Arm.Count_Curl(x, y, z);\" line3=\"                break;\" line4=\"            case 2: //肩推\" line5=\"                Back.Count_ShoulderPress(x, y, z);\" line6=\"                break;\" line7=\"            default:\" line8=\"                break;\" line9=\"        }\" numlines=\"10\"></mutation><next><block type=\"device_show_number\"><value name=\"number\"><block type=\"variables_get\"><field name=\"VAR\" id=\"`Gf.ZcYj65F#Drn*|q`s\">times</field></block></value><next><block type=\"bluetooth_uart_writenumber\"><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"`Gf.ZcYj65F#Drn*|q`s\">times</field></block></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"pause(100)\" numlines=\"1\"></mutation></block></next></block></next></block></next></block></statement></block></statement></block><block type=\"device_forever\" x=\"10\" y=\"10\"><statement name=\"HANDLER\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"{.9VKjwV`#sUsCPq*0Yb\">BTflag</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"function_call\"><mutation name=\"Acceleration\" functionid=\"QlTm+Wt0#:1PAAvL{###\"></mutation></block></statement></block></statement></block><block type=\"function_definition\" x=\"10\" y=\"10\"><mutation name=\"Count_Elbow_extension\" functionid=\"s#bLm_?VX1#!|!m},Yi_\"><arg name=\"x\" id=\"kauyf4bhf6a0jhgs4qlm6\" type=\"number\"></arg><arg name=\"y\" id=\"3j7zotcadwmmbyp19kdj\" type=\"number\"></arg><arg name=\"z\" id=\"br4dc99rpmqa2smkfupmu\" type=\"number\"></arg></mutation><field name=\"function_name\">Count_Elbow_extension</field><value name=\"kauyf4bhf6a0jhgs4qlm6\"><block type=\"argument_reporter_number\"><field name=\"VALUE\">x</field></block></value><value name=\"3j7zotcadwmmbyp19kdj\"><block type=\"argument_reporter_number\"><field name=\"VALUE\">y</field></block></value><value name=\"br4dc99rpmqa2smkfupmu\"><block type=\"argument_reporter_number\"><field name=\"VALUE\">z</field></block></value><statement name=\"STACK\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GTE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">x</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1050</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GTE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">y</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">-300</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"`Gf.ZcYj65F#Drn*|q`s\">times</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"`Gf.ZcYj65F#Drn*|q`s\">times</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value></block></statement></block></statement><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">100</field></shadow></value></block></next></block></statement></block><block type=\"pxt-on-start\" x=\"10\" y=\"10\"><statement name=\"HANDLER\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let z = 0\" numlines=\"1\" declaredvars=\"z\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let y = 0\" numlines=\"1\" declaredvars=\"y\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let x = 0\" numlines=\"1\" declaredvars=\"x\"></mutation><next><block type=\"variables_set\"><field name=\"VAR\" id=\"}nD!Nara.~SxEU%qv%Ai\">SPflag</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let BTflag = 0\" numlines=\"1\" declaredvars=\"BTflag\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">連接成功，開始偵測</comment><next><block type=\"variables_set\"><field name=\"VAR\" id=\"-MX8sd#E!#LR$sNVfzZl\">test</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let ID = 0\" numlines=\"1\" declaredvars=\"ID\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let value = 0\" numlines=\"1\" declaredvars=\"value\"></mutation><next><block type=\"variables_set\"><field name=\"VAR\" id=\"+||}0kRcFBcV?A{4+(Ew\">ID</field><comment pinned=\"false\" h=\"80\" w=\"160\">運動動作ID</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">100</field></shadow></value><next><block type=\"bluetooth_start_uart_service\"><next><block type=\"bluetooth_settransmitpower\"><value name=\"power\"><shadow type=\"math_number\"><field name=\"NUM\">7</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"406\" y=\"875\"><mutation name=\"Acceleration\" functionid=\"QlTm+Wt0#:1PAAvL{###\"></mutation><field name=\"function_name\">Acceleration</field><comment pinned=\"false\" h=\"80\" w=\"160\">control.inBackground(function on_in_background() {\n"]]},{"start1":10559,"length1":3044,"diffs":[[1,"})</comment><statement name=\"STACK\"><block type=\"variables_set\"><field name=\"VAR\" id=\"vJz|6UYYYjRVeiLXlbHB\">x</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_acceleration\"><field name=\"NAME\">Dimension.X</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"eCQ:)biMP%vty.^C_/N[\">y</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_acceleration\"><field name=\"NAME\">Dimension.Y</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"D8wV,Qbg_s{hOFHB%bwa\">z</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_acceleration\"><field name=\"NAME\">Dimension.Z</field></block></value><next><block type=\"serial_writevalue\"><value name=\"name\"><shadow type=\"text\"><field name=\"TEXT\">X</field></shadow></value><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"vJz|6UYYYjRVeiLXlbHB\">x</field></block></value><next><block type=\"serial_writevalue\"><value name=\"name\"><shadow type=\"text\"><field name=\"TEXT\">Y</field></shadow></value><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"eCQ:)biMP%vty.^C_/N[\">y</field></block></value><next><block type=\"serial_writevalue\"><value name=\"name\"><shadow type=\"text\"><field name=\"TEXT\">Z</field></shadow></value><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"D8wV,Qbg_s{hOFHB%bwa\">z</field></block></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">100</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"828\" y=\"875\"><mutation name=\"Countdown\" functionid=\"0pREG*_nrxO`m^!*5c,Z\"></mutation><field name=\"function_name\">Countdown</field><statement name=\"STACK\"><block type=\"device_show_number\"><value name=\"number\"><shadow type=\"math_number\"><field name=\"NUM\">3</field></shadow></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"pause(1000)\" numlines=\"1\"></mutation><next><block type=\"device_show_number\"><value name=\"number\"><shadow type=\"math_number\"><field name=\"NUM\">2</field></shadow></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"pause(1000)\" numlines=\"1\"></mutation><next><block type=\"device_show_number\"><value name=\"number\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"pause(1000)\" numlines=\"1\"></mutation><next><block type=\"variables_set\"><field name=\"VAR\" id=\"{.9VKjwV`#sUsCPq*0Yb\">BTflag</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block></xml>"]]}]},{"type":"edited","filename":"main.ts","patch":[{"start1":0,"length1":139,"diffs":[[1,""]]},{"start1":466,"length1":182,"diffs":[[1,""]]},{"start1":1379,"length1":59,"diffs":[[1,"let value = 0\nlet ID = 0\nlet test = 0\n"]]},{"start1":1445,"length1":38,"diffs":[[1,"let SPflag = 0\nlet x = 0\nlet y = 0\nlet z = 0\n// 計算偵測總次數\nlet times = 0\n"]]},{"start1":2080,"length1":0,"diffs":[[1,"    \n"]]},{"start1":2088,"length1":0,"diffs":[[1,"\nfunction Count_Elbow_extension(x: number, y: number, z: number){\n    if (x >= 1050) {\n        if(y>=-300){\n            times = times + 1\n        }\n    }\n    basic.pause(100)\n}\n/*basic.forever(function () {\n    Count_Elbow_extension(x , y, z);\n    basic.showNumber(times)\n})\n*/"]]}]},{"type":"edited","filename":"pxt.json","patch":[{"start1":340,"length1":32,"diffs":[[1,"    \"preferredEditor\": \"blocksprj\",\n"]]},{"start1":472,"length1":110,"diffs":[[1,"                    \"open\": 0,\n                    \"whitelist\": 1,\n                    \"security_level\": \"SECURITY_MODE_ENCRYPTION_NO_MITM\"\n"]]}]}]},{"timestamp":1752777801426,"editorVersion":"8.0.8","changes":[{"type":"edited","filename":"pxt.json","patch":[{"start1":340,"length1":36,"diffs":[[1,"    \"preferredEditor\": \"tsprj\",\n"]]}]}]},{"timestamp":1752779513357,"editorVersion":"8.0.8","changes":[{"type":"edited","filename":"pxt.json","patch":[{"start1":340,"length1":32,"diffs":[[1,"    \"preferredEditor\": \"blocksprj\",\n"]]}]}]},{"timestamp":1752779582029,"editorVersion":"8.0.8","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":1213,"length1":34,"diffs":[[1,"        basic.showIcon(IconNames.Sad)\n"]]}]}]},{"timestamp":1752780356965,"editorVersion":"8.0.8","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":1213,"length1":35,"diffs":[[1,"        basic.showIcon(IconNames)\n"]]}]}]},{"timestamp":1752780357013,"editorVersion":"8.0.8","changes":[{"type":"edited","filename":"main.ts","patch":[{"start1":1213,"length1":38,"diffs":[[1,"        basic.showIcon(IconNamesㄡ)\n"]]}]},{"type":"edited","filename":"pxt.json","patch":[{"start1":468,"length1":140,"diffs":[[1,"                    \"open\": 1,\n                    \"whitelist\": 0,\n                    \"security_level\": null\n"]]}]}]},{"timestamp":1752781062684,"editorVersion":"8.0.8","changes":[{"type":"edited","filename":"main.blocks","patch":[{"start1":0,"length1":651,"diffs":[[1,"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"vJz|6UYYYjRVeiLXlbHB\">x</variable><variable id=\"eCQ:)biMP%vty.^C_/N[\">y</variable><variable id=\"D8wV,Qbg_s{hOFHB%bwa\">z</variable><variable id=\"{.9VKjwV`#sUsCPq*0Yb\">BTflag</variable><variable id=\")B39X[MJOqtn?M{i@4.2\">raw</variable><variable id=\"K52EvMj3j6S)=?$+bCc0\">value</variable><variable id=\"+||}0kRcFBcV?A{4+(Ew\">ID</variable><variable id=\"`Gf.ZcYj65F#Drn*|q`s\">times</variable><variable id=\"}nD!Nara.~SxEU%qv%Ai\">SPflag</variable><variable id=\"-MX8sd#E!#LR$sNVfzZl\">test</variable></variables><comment x=\"1241\" y=\"875\" w=\"177.59375\" h=\"120\">\n"]]},{"start1":639,"length1":79,"diffs":[[1,"</comment><comment x=\"1463\" y=\"875\" w=\"320\" h=\"160\">\n"]]},{"start1":780,"length1":16,"diffs":[[1,"</comment><block type=\"pxt-on-start\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let z = 0\" numlines=\"1\" declaredvars=\"z\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let y = 0\" numlines=\"1\" declaredvars=\"y\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let x = 0\" numlines=\"1\" declaredvars=\"x\"></mutation><next><block type=\"variables_set\"><field name=\"VAR\" id=\"}nD!Nara.~SxEU%qv%Ai\">SPflag</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let BTflag = 0\" numlines=\"1\" declaredvars=\"BTflag\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">連接成功，開始偵測</comment><next><block type=\"variables_set\"><field name=\"VAR\" id=\"-MX8sd#E!#LR$sNVfzZl\">test</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let ID = 0\" numlines=\"1\" declaredvars=\"ID\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let value = 0\" numlines=\"1\" declaredvars=\"value\"></mutation><next><block type=\"variables_set\"><field name=\"VAR\" id=\"+||}0kRcFBcV?A{4+(Ew\">ID</field><comment pinned=\"false\" h=\"80\" w=\"160\">運動動作ID</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">100</field></shadow></value><next><block type=\"bluetooth_start_uart_service\"><next><block type=\"bluetooth_settransmitpower\"><value name=\"power\"><shadow type=\"math_number\"><field name=\"NUM\">7</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"bluetooth_on_connected\" x=\"371\" y=\"0\"><statement name=\"HANDLER\"><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">7000</field></shadow></value><next><block type=\"basic_show_icon\"><field name=\"i\">IconNames.Yes</field></block></next></block></statement></block><block type=\"bluetooth_on_data_received\" x=\"626\" y=\"0\"><comment pinned=\"false\" h=\"80\" w=\"160\">傳送動作ID給藍牙裝置</comment><value name=\"delimiters\"><shadow type=\"serial_delimiter_conv\"><field name=\"del\">Delimiters.NewLine</field></shadow></value><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\")B39X[MJOqtn?M{i@4.2\">raw</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"bluetooth_uart_read\"><value name=\"del\"><shadow type=\"serial_delimiter_conv\"><field name=\"del\">Delimiters.NewLine</field></shadow></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"K52EvMj3j6S)=?$+bCc0\">value</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"string_parseint\"><value name=\"text\"><block type=\"variables_get\"><field name=\"VAR\" id=\")B39X[MJOqtn?M{i@4.2\">raw</field></block></value></block></value><next><block type=\"controls_if\"><mutation else=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">檢查是否為有效的數字</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">isNaN(value)</field></block></value><statement name=\"DO0\"><block type=\"basic_show_icon\"><field name=\"i\">IconNames.Sad</field><comment pinned=\"false\" h=\"80\" w=\"160\">顯示錯誤訊息</comment></block></statement><statement name=\"ELSE\"><block type=\"variables_set\"><field name=\"VAR\" id=\"+||}0kRcFBcV?A{4+(Ew\">ID</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"K52EvMj3j6S)=?$+bCc0\">value</field></block></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"switch(value){\" line1=\"            case 1:\" line2=\"                Countdown();\" line3=\"                break;\" line4=\"            case 0:\" line5=\"                BTflag = 0;\" line6=\"                basic.showIcon(IconNames.Asleep)\" line7=\"            default:\" line8=\"                break;\" line9=\"        }\" numlines=\"10\"></mutation></block></next></block></statement></block></next></block></next></block></statement></block><block type=\"bluetooth_on_disconnected\" x=\"1232\" y=\"0\"><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"{.9VKjwV`#sUsCPq*0Yb\">BTflag</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></statement></block><block type=\"device_forever\" x=\"1512\" y=\"0\"><statement name=\"HANDLER\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"{.9VKjwV`#sUsCPq*0Yb\">BTflag</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"switch(ID){\" line1=\"           case 1: //手臂彎舉\" line2=\"                Arm.Count_Curl(x, y, z);\" line3=\"                break;\" line4=\"            case 2: //肩推\" line5=\"                Back.Count_ShoulderPress(x, y, z);\" line6=\"                break;\" line7=\"            default:\" line8=\"                break;\" line9=\"        }\" numlines=\"10\"></mutation><next><block type=\"device_show_number\"><value name=\"number\"><block type=\"variables_get\"><field name=\"VAR\" id=\"`Gf.ZcYj65F#Drn*|q`s\">times</field></block></value><next><block type=\"bluetooth_uart_writenumber\"><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"`Gf.ZcYj65F#Drn*|q`s\">times</field></block></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"pause(100)\" numlines=\"1\"></mutation></block></next></block></next></block></next></block></statement></block></statement></block><block type=\"device_forever\" x=\"2045\" y=\"0\"><statement name=\"HANDLER\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"{.9VKjwV`#sUsCPq*0Yb\">BTflag</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"function_call\"><mutation name=\"Acceleration\" functionid=\"QlTm+Wt0#:1PAAvL{###\"></mutation></block></statement></block></statement></block><block type=\"function_definition\" x=\"0\" y=\"875\"><mutation name=\"Count_Elbow_extension\" functionid=\"s#bLm_?VX1#!|!m},Yi_\"><arg name=\"x\" id=\"kauyf4bhf6a0jhgs4qlm6\" type=\"number\"></arg><arg name=\"y\" id=\"3j7zotcadwmmbyp19kdj\" type=\"number\"></arg><arg name=\"z\" id=\"br4dc99rpmqa2smkfupmu\" type=\"number\"></arg></mutation><field name=\"function_name\">Count_Elbow_extension</field><value name=\"kauyf4bhf6a0jhgs4qlm6\"><block type=\"argument_reporter_number\" deletable=\"false\"><field name=\"VALUE\">x</field></block></value><value name=\"3j7zotcadwmmbyp19kdj\"><block type=\"argument_reporter_number\" deletable=\"false\"><field name=\"VALUE\">y</field></block></value><value name=\"br4dc99rpmqa2smkfupmu\"><block type=\"argument_reporter_number\" deletable=\"false\"><field name=\"VALUE\">z</field></block></value><statement name=\"STACK\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GTE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">x</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1050</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GTE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">y</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">-300</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"`Gf.ZcYj65F#Drn*|q`s\">times</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"`Gf.ZcYj65F#Drn*|q`s\">times</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value></block></statement></block></statement><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">100</field></shadow></value></block></next></block></statement></block><block type=\"function_definition\" x=\"540\" y=\"875\"><mutation name=\"Acceleration\" functionid=\"QlTm+Wt0#:1PAAvL{###\"></mutation><field name=\"function_name\">Acceleration</field><comment pinned=\"false\" h=\"80\" w=\"160\">control.inBackground(function on_in_background() {\n\nwhile (true) {\n\nif (BTflag == 1) {\n\nBluetoothSend()\n\n}\n\n// BluetoothReceive()\n\nbasic.pause(100)\n\n}\n\n})</comment><statement name=\"STACK\"><block type=\"variables_set\"><field name=\"VAR\" id=\"vJz|6UYYYjRVeiLXlbHB\">x</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_acceleration\"><field name=\"NAME\">Dimension.X</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"eCQ:)biMP%vty.^C_/N[\">y</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_acceleration\"><field name=\"NAME\">Dimension.Y</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"D8wV,Qbg_s{hOFHB%bwa\">z</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_acceleration\"><field name=\"NAME\">Dimension.Z</field></block></value><next><block type=\"serial_writevalue\"><value name=\"name\"><shadow type=\"text\"><field name=\"TEXT\">X</field></shadow></value><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"vJz|6UYYYjRVeiLXlbHB\">x</field></block></value><next><block type=\"serial_writevalue\"><value name=\"name\"><shadow type=\"text\"><field name=\"TEXT\">Y</field></shadow></value><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"eCQ:)biMP%vty.^C_/N[\">y</field></block></value><next><block type=\"serial_writevalue\"><value name=\"name\"><shadow type=\"text\"><field name=\"TEXT\">Z</field></shadow></value><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"D8wV,Qbg_s{hOFHB%bwa\">z</field></block></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">100</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"962\" y=\"875\"><mutation name=\"Countdown\" functionid=\"0pREG*_nrxO`m^!*5c,Z\"></mutation><field name=\"function_name\">Countdown</field><statement name=\"STACK\"><block type=\"device_show_number\"><value name=\"number\"><shadow type=\"math_number\"><field name=\"NUM\">3</field></shadow></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"pause(1000)\" numlines=\"1\"></mutation><next><block type=\"device_show_number\"><value name=\"number\"><shadow type=\"math_number\"><field name=\"NUM\">2</field></shadow></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"pause(1000)\" numlines=\"1\"></mutation><next><block type=\"device_show_number\"><value name=\"number\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"pause(1000)\" numlines=\"1\"></mutation><next><block type=\"variables_set\"><field name=\"VAR\" id=\"{.9VKjwV`#sUsCPq*0Yb\">BTflag</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block></xml>"]]}]}]},{"timestamp":1752781465925,"editorVersion":"8.0.8","changes":[{"type":"edited","filename":"pxt.json","patch":[{"start1":340,"length1":44,"diffs":[[1,""]]}]},{"type":"added","filename":"test.ts","value":"// tests go here; this will not be compiled when this package is used as an extension.\n"}]}],"snapshots":[{"timestamp":1743008517803,"editorVersion":"7.0.57","text":{"main.blocks":"<xml xmlns=\"http://www.w3.org/1999/xhtml\">\n  <block type=\"pxt-on-start\"></block>\n  <block type=\"device_forever\"></block>\n</xml>","main.ts":"\n","README.md":"","pxt.json":"{\n    \"name\": \"p2\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"microphone\": \"*\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\"\n    ],\n    \"additionalFilePaths\": []\n}\n"}},{"timestamp":1743016399782,"editorVersion":"7.0.57","text":{"main.blocks":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"3Iq/FO?:PAUiUL=y{Q%b\">x</variable><variable id=\"%eIZQ5^H]NX7q*|17hL-\">y</variable><variable id=\"%IrzR}F*T,/PfvF0ZOo}\">z</variable><variable id=\"W(NcC;n;;[sD^J7*@tL}\">times</variable><variable id=\"O#qq1Sj:6D0:-0L1~A]e\">SPflag</variable></variables><block type=\"function_definition\" x=\"10\" y=\"10\"><mutation name=\"Acceleration\" functionid=\"JPJv{6HbzG!%r6ut:7q[\"></mutation><field name=\"function_name\">Acceleration</field><statement name=\"STACK\"><block type=\"variables_set\"><field name=\"VAR\" id=\"3Iq/FO?:PAUiUL=y{Q%b\">x</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_acceleration\"><field name=\"NAME\">Dimension.X</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"%eIZQ5^H]NX7q*|17hL-\">y</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_acceleration\"><field name=\"NAME\">Dimension.Y</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"%IrzR}F*T,/PfvF0ZOo}\">z</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_acceleration\"><field name=\"NAME\">Dimension.Z</field></block></value><next><block type=\"serial_writevalue\"><value name=\"name\"><shadow type=\"text\"><field name=\"TEXT\">X</field></shadow></value><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"3Iq/FO?:PAUiUL=y{Q%b\">x</field></block></value><next><block type=\"serial_writevalue\"><value name=\"name\"><shadow type=\"text\"><field name=\"TEXT\">Y</field></shadow></value><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"%eIZQ5^H]NX7q*|17hL-\">y</field></block></value><next><block type=\"serial_writevalue\"><value name=\"name\"><shadow type=\"text\"><field name=\"TEXT\">Z</field></shadow></value><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"%IrzR}F*T,/PfvF0ZOo}\">z</field></block></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">100</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"10\" y=\"10\"><mutation name=\"Count_Curl\" functionid=\"~JTl_5QUar?ETQ1VS=6D\"></mutation><field name=\"function_name\">Count_Curl</field><statement name=\"STACK\"><block type=\"device_pause\"><comment pinned=\"false\" h=\"80\" w=\"160\">彎舉</comment><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">1000</field></shadow></value><next><block type=\"controls_if\"><comment pinned=\"false\" h=\"80\" w=\"160\">sendBLEMessage();</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GTE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"%eIZQ5^H]NX7q*|17hL-\">y</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">600</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"W(NcC;n;;[sD^J7*@tL}\">times</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"W(NcC;n;;[sD^J7*@tL}\">times</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><next><block type=\"device_show_number\"><value name=\"number\"><block type=\"variables_get\"><field name=\"VAR\" id=\"W(NcC;n;;[sD^J7*@tL}\">times</field></block></value></block></next></block></statement></block></next></block></statement></block><block type=\"function_definition\" x=\"10\" y=\"10\"><mutation name=\"Count_ShoulderPress\" functionid=\"|VFv79ie+}/x21xkS0Vz\"></mutation><field name=\"function_name\">Count_ShoulderPress</field><statement name=\"STACK\"><block type=\"device_pause\"><comment pinned=\"false\" h=\"80\" w=\"160\">肩推</comment><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">1000</field></shadow></value><next><block type=\"controls_if\"><mutation elseif=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">sendBLEMessage();</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">OR</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">OR</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_operation\"><field name=\"OP\">OR</field><value name=\"A\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"3Iq/FO?:PAUiUL=y{Q%b\">x</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">800</field></shadow></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"3Iq/FO?:PAUiUL=y{Q%b\">x</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">-800</field></shadow></value></block></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"%IrzR}F*T,/PfvF0ZOo}\">z</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">800</field></shadow></value></block></value></block></value><value name=\"B\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LT</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"%IrzR}F*T,/PfvF0ZOo}\">z</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">-800</field></shadow></value></block></value></block></value><statement name=\"DO0\"><block type=\"device_print_message\"><value name=\"text\"><shadow type=\"text\"><field name=\"TEXT\">S</field></shadow></value></block></statement><value name=\"IF1\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GTE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"%eIZQ5^H]NX7q*|17hL-\">y</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1000</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">600</field></shadow></value></block></value><statement name=\"DO1\"><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">100</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"O#qq1Sj:6D0:-0L1~A]e\">SPflag</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></block></value></block></next></block></statement><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"O#qq1Sj:6D0:-0L1~A]e\">SPflag</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></block></value></block></value><statement name=\"DO0\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">LTE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"%eIZQ5^H]NX7q*|17hL-\">y</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1000</field></shadow></value></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">600</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"W(NcC;n;;[sD^J7*@tL}\">times</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"W(NcC;n;;[sD^J7*@tL}\">times</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"O#qq1Sj:6D0:-0L1~A]e\">SPflag</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"logic_boolean\"><field name=\"BOOL\">FALSE</field></block></value></block></next></block></statement></block></statement></block></next></block></next></block></statement></block><block type=\"device_forever\" x=\"225\" y=\"20\"><comment pinned=\"false\" h=\"80\" w=\"160\">Count_ShoulderPress();</comment><statement name=\"HANDLER\"><block type=\"function_call\"><mutation name=\"Acceleration\" functionid=\"JPJv{6HbzG!%r6ut:7q[\"></mutation></block></statement></block></xml>","main.ts":"function Acceleration() {\n    x = input.acceleration(Dimension.X)\n    y = input.acceleration(Dimension.Y)\n    z = input.acceleration(Dimension.Z)\n    serial.writeValue(\"X\", x)\n    serial.writeValue(\"Y\", y)\n    serial.writeValue(\"Z\", z)\n    basic.pause(100)\n}\nfunction Count_Curl() { //彎舉\n    basic.pause(1000)\n    // sendBLEMessage();\n    if (y >= 600) {\n        times = times + 1\n        basic.showNumber(times)\n    }\n}\n\nfunction Count_ShoulderPress() { //肩推\n    basic.pause(100)\n    // sendBLEMessage();\n    if (x > 800 || x < -800 || z > 800 || z < -800) {\n        basic.showString('S');\n    }\n    else if (SPflag == 1) {\n        if ((y + 1000) <= 500) {  // -1500\n            times = times + 1;\n            SPflag = 2;\n        }\n    }\n    else if (y >= -500) { // -400\n        SPflag = 1;\n    }\n\n}\n\n\nlet times = 0\nlet z = 0\nlet y = 0\nlet x = 0\n\nlet SPflag = 0;\n\nbasic.forever(function (){\n    Acceleration();\n})\nbasic.forever(function () {\n    Count_ShoulderPress();\n    basic.showNumber(times);\n})\n","README.md":"","pxt.json":"{\n    \"name\": \"p2\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"radio\": \"*\",\n        \"microphone\": \"*\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\"\n    ],\n    \"preferredEditor\": \"tsprj\"\n}\n"}},{"timestamp":1743078504164,"editorVersion":"7.0.57","text":{"main.blocks":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"Dsa@!dVjnSTjY7Z?P]u|\">x</variable><variable id=\"3Bf$otbCTtBA0#6}]BQ+\">y</variable><variable id=\"3b./OcI:x|^YcPfmKG5t\">z</variable><variable id=\"~5*hRb+n/VIjqtH3h36`\">times</variable><variable id=\"V,o|iBn,=,sb~!?eEI50\">BTflag</variable><variable id=\"qD1L8x2mZWyNi4o#A3xC\">SPflag</variable></variables><block type=\"pxt-on-start\" x=\"20\" y=\"20\"><statement name=\"HANDLER\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let BTflag = 0\" numlines=\"1\" declaredvars=\"BTflag\"></mutation><next><block type=\"variables_set\"><field name=\"VAR\" id=\"qD1L8x2mZWyNi4o#A3xC\">SPflag</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let x = 0\" numlines=\"1\" declaredvars=\"x\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let y = 0\" numlines=\"1\" declaredvars=\"y\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let z = 0\" numlines=\"1\" declaredvars=\"z\"></mutation><next><block type=\"bluetooth_start_uart_service\"><next><block type=\"bluetooth_settransmitpower\"><value name=\"power\"><shadow type=\"math_number\"><field name=\"NUM\">7</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"device_forever\" x=\"391\" y=\"20\"><statement name=\"HANDLER\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"Back.Count_ShoulderPress(x, y, z)\" numlines=\"1\"></mutation><next><block type=\"device_show_number\"><value name=\"number\"><block type=\"variables_get\"><field name=\"VAR\" id=\"~5*hRb+n/VIjqtH3h36`\">times</field></block></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"bluetooth.onBluetoothConnected(function on_bluetooth_connected() {\" line1=\"        \" line2=\"        BTflag = 1\" line3=\"    })\" numlines=\"4\"></mutation><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"V,o|iBn,=,sb~!?eEI50\">BTflag</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"function_call\"><mutation name=\"BluetoothSend\" functionid=\"Q[dLTte/.n89v[LP~pAa\"></mutation></block></statement></block></next></block></next></block></next></block></statement></block><block type=\"device_forever\" x=\"1049\" y=\"20\"><statement name=\"HANDLER\"><block type=\"function_call\"><mutation name=\"Acceleration\" functionid=\"9C?WTH^{0ZpUA`irR34(\"></mutation></block></statement></block><block type=\"function_definition\" x=\"1275\" y=\"20\"><mutation name=\"Acceleration\" functionid=\"9C?WTH^{0ZpUA`irR34(\"></mutation><field name=\"function_name\">Acceleration</field><statement name=\"STACK\"><block type=\"variables_set\"><field name=\"VAR\" id=\"Dsa@!dVjnSTjY7Z?P]u|\">x</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_acceleration\"><field name=\"NAME\">Dimension.X</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"3Bf$otbCTtBA0#6}]BQ+\">y</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_acceleration\"><field name=\"NAME\">Dimension.Y</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"3b./OcI:x|^YcPfmKG5t\">z</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_acceleration\"><field name=\"NAME\">Dimension.Z</field></block></value><next><block type=\"serial_writevalue\"><value name=\"name\"><shadow type=\"text\"><field name=\"TEXT\">X</field></shadow></value><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"Dsa@!dVjnSTjY7Z?P]u|\">x</field></block></value><next><block type=\"serial_writevalue\"><value name=\"name\"><shadow type=\"text\"><field name=\"TEXT\">Y</field></shadow></value><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"3Bf$otbCTtBA0#6}]BQ+\">y</field></block></value><next><block type=\"serial_writevalue\"><value name=\"name\"><shadow type=\"text\"><field name=\"TEXT\">Z</field></shadow></value><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"3b./OcI:x|^YcPfmKG5t\">z</field></block></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">100</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"20\" y=\"545\"><mutation name=\"BluetoothSend\" functionid=\"Q[dLTte/.n89v[LP~pAa\"></mutation><field name=\"function_name\">BluetoothSend</field><statement name=\"STACK\"><block type=\"bluetooth_uart_writenumber\"><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"~5*hRb+n/VIjqtH3h36`\">times</field></block></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">1000</field></shadow></value></block></next></block></statement></block></xml>","main.ts":"function BluetoothSend () {\n    bluetooth.uartWriteNumber(times)\n    basic.pause(1000)\n}\nfunction Acceleration () {\n    x = input.acceleration(Dimension.X)\n    y = input.acceleration(Dimension.Y)\n    z = input.acceleration(Dimension.Z)\n    serial.writeValue(\"X\", x)\n    serial.writeValue(\"Y\", y)\n    serial.writeValue(\"Z\", z)\n    basic.pause(100)\n}\nlet times = 0\nlet BTflag = 0\nlet SPflag = 0\nlet x = 0\nlet y = 0\nlet z = 0\nbluetooth.startUartService()\nbluetooth.setTransmitPower(7)\nbasic.forever(function () {\n    Back.Count_ShoulderPress(x, y, z)\nbasic.showNumber(times)\n    bluetooth.onBluetoothConnected(function on_bluetooth_connected() {\n        \n        BTflag = 1\n    })\nif (BTflag == 1) {\n        BluetoothSend()\n    }\n})\nbasic.forever(function () {\n    Acceleration()\n})\n","README.md":"","Back.ts":"\nnamespace Back {\n    export function Count_ShoulderPress(x: number, y: number, z: number) { //肩推\n        basic.pause(10)\n        // sendBLEMessage();\n        if (x > 800 || x < -800 || z > 800 || z < -800) {\n            basic.showString('S');\n        }\n        else if (SPflag == 1) {\n            if (y <= -1000) { //包含重力加速度\n                times = times + 1;\n                SPflag = 2;\n            }\n        }\n        else if (y >= -900) { //包含重力加速度\n            SPflag = 1;\n        }\n    }\n}\n","Arm.ts":"namespace Arm{\n    export function Count_Curl(x: number, y: number, z: number) { //彎舉\n        basic.pause(100)\n        if (y >= 600) {\n            times = times + 1\n        }\n    }\n}","main.py":"def Acceleration():\n    global x, y, z\n    x = input.acceleration(Dimension.X)\n    y = input.acceleration(Dimension.Y)\n    z = input.acceleration(Dimension.Z)\n    serial.write_value(\"X\", x)\n    serial.write_value(\"Y\", y)\n    serial.write_value(\"Z\", z)\n    basic.pause(100)\ndef BluetoothSend():\n    bluetooth.uart_write_number(times)\n    basic.pause(1000)\nbluetooth.start_uart_service()\nbluetooth.set_transmit_power(7)\ntimes = 0\nz = 0\ny = 0\nx = 0\nSPflag = 0\nBTflag = 0\n\ndef on_forever():\n    Acceleration()\nbasic.forever(on_forever)\n\ndef on_forever2():\n    Back.Count_ShoulderPress(x, y, z)\n    basic.show_number(times)\n    \n    def on_bluetooth_connected():\n        global BTflag\n        BTflag = 1\n    bluetooth.on_bluetooth_connected(on_bluetooth_connected)\n    \n    if BTflag == 1:\n        BluetoothSend()\nbasic.forever(on_forever2)\n","pxt.json":"{\n    \"name\": \"p2 - Copy\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"microphone\": \"*\",\n        \"bluetooth\": \"*\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\",\n        \"Back.ts\",\n        \"Arm.ts\",\n        \"main.py\"\n    ],\n    \"preferredEditor\": \"tsprj\"\n}\n"}},{"timestamp":1743950478128,"editorVersion":"7.0.61","text":{"main.blocks":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"$W#TD3}i@Qp2NSg=g8)0\">times</variable><variable id=\"aN(`Fs;zaZS[EB-l}~m!\">x</variable><variable id=\"1J~7m7k?7MyBG%XO7{P_\">y</variable><variable id=\"N]R+O:rLGJ8m}jRb_DUr\">z</variable><variable id=\"(P=Wxr;_%1o1^M~0{ztt\">BTflag</variable><variable id=\"*PuPK72H3QE4)l{D[==J\">SPflag</variable></variables><block type=\"pxt-on-start\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let z = 0\" numlines=\"1\" declaredvars=\"z\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let y = 0\" numlines=\"1\" declaredvars=\"y\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let x = 0\" numlines=\"1\" declaredvars=\"x\"></mutation><next><block type=\"variables_set\"><field name=\"VAR\" id=\"*PuPK72H3QE4)l{D[==J\">SPflag</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let BTflag = 0\" numlines=\"1\" declaredvars=\"BTflag\"></mutation><next><block type=\"bluetooth_start_uart_service\"><next><block type=\"bluetooth_settransmitpower\"><value name=\"power\"><shadow type=\"math_number\"><field name=\"NUM\">7</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"device_forever\" x=\"371\" y=\"0\"><statement name=\"HANDLER\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"Back.Count_ShoulderPress(x, y, z)\" numlines=\"1\"></mutation><next><block type=\"device_show_number\"><value name=\"number\"><block type=\"variables_get\"><field name=\"VAR\" id=\"$W#TD3}i@Qp2NSg=g8)0\">times</field></block></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"bluetooth.onBluetoothConnected(function on_bluetooth_connected() {\" line1=\"        \" line2=\"        BTflag = 1\" line3=\"    })\" numlines=\"4\"></mutation><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"(P=Wxr;_%1o1^M~0{ztt\">BTflag</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"function_call\"><mutation name=\"BluetoothSend\" functionid=\"ja9i%l,)@bF,Vh].1xx?\"></mutation></block></statement></block></next></block></next></block></next></block></statement></block><block type=\"device_forever\" x=\"1029\" y=\"0\"><statement name=\"HANDLER\"><block type=\"function_call\"><mutation name=\"Acceleration\" functionid=\"7VmaBmNeew;*8B.~nU%R\"></mutation></block></statement></block><block type=\"function_definition\" x=\"1255\" y=\"0\"><mutation name=\"Acceleration\" functionid=\"7VmaBmNeew;*8B.~nU%R\"></mutation><field name=\"function_name\">Acceleration</field><statement name=\"STACK\"><block type=\"variables_set\"><field name=\"VAR\" id=\"aN(`Fs;zaZS[EB-l}~m!\">x</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_acceleration\"><field name=\"NAME\">Dimension.X</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"1J~7m7k?7MyBG%XO7{P_\">y</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_acceleration\"><field name=\"NAME\">Dimension.Y</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"N]R+O:rLGJ8m}jRb_DUr\">z</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_acceleration\"><field name=\"NAME\">Dimension.Z</field></block></value><next><block type=\"serial_writevalue\"><value name=\"name\"><shadow type=\"text\"><field name=\"TEXT\">X</field></shadow></value><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"aN(`Fs;zaZS[EB-l}~m!\">x</field></block></value><next><block type=\"serial_writevalue\"><value name=\"name\"><shadow type=\"text\"><field name=\"TEXT\">Y</field></shadow></value><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"1J~7m7k?7MyBG%XO7{P_\">y</field></block></value><next><block type=\"serial_writevalue\"><value name=\"name\"><shadow type=\"text\"><field name=\"TEXT\">Z</field></shadow></value><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"N]R+O:rLGJ8m}jRb_DUr\">z</field></block></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">100</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"0\" y=\"525\"><mutation name=\"BluetoothSend\" functionid=\"ja9i%l,)@bF,Vh].1xx?\"></mutation><field name=\"function_name\">BluetoothSend</field><statement name=\"STACK\"><block type=\"bluetooth_uart_writenumber\"><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"$W#TD3}i@Qp2NSg=g8)0\">times</field></block></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">1000</field></shadow></value></block></next></block></statement></block></xml>","main.ts":"","README.md":"","Back.ts":"\nnamespace Back {\n    export function Count_ShoulderPress(x: number, y: number, z: number) { //肩推\n        basic.pause(10)\n        // sendBLEMessage();\n        if (x > 800 || x < -800 || z > 800 || z < -800) {\n            basic.showString('S');\n        }\n        else if (SPflag == 1) {\n            if (y <= -1000) { //包含重力加速度\n                times = times + 1;\n                SPflag = 2;\n            }\n        }\n        else if (y >= -900) { //包含重力加速度\n            SPflag = 1;\n        }\n    }\n}\n","Arm.ts":"namespace Arm{\n    export function Count_Curl(x: number, y: number, z: number) { //彎舉\n        basic.pause(100)\n        if (y >= 600) {\n            times = times + 1\n        }\n    }\n}","main.py":"def BluetoothSend():\n    bluetooth.uart_write_number(times)\n    basic.pause(1000)\ndef Acceleration():\n    global x, y, z\n    x = input.acceleration(Dimension.X)\n    y = input.acceleration(Dimension.Y)\n    z = input.acceleration(Dimension.Z)\n    serial.write_value(\"X\", x)\n    serial.write_value(\"Y\", y)\n    serial.write_value(\"Z\", z)\n    basic.pause(100)\ntimes = 0\nBTflag = 0\nSPflag = 0\nx = 0\ny = 0\nz = 0\nbluetooth.start_uart_service()\nbluetooth.set_transmit_power(7)\n\ndef on_forever():\n    Back.Count_ShoulderPress(x, y, z)\n    basic.show_number(times)\n    \n    def on_bluetooth_connected():\n        global BTflag\n        BTflag = 1\n    bluetooth.on_bluetooth_connected(on_bluetooth_connected)\n    \n    if BTflag == 1:\n        BluetoothSend()\nbasic.forever(on_forever)\n\ndef on_forever2():\n    Acceleration()\nbasic.forever(on_forever2)\n","pxt.json":"{\n    \"name\": \"p2 - Copy\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"microphone\": \"*\",\n        \"bluetooth\": \"*\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\",\n        \"Back.ts\",\n        \"Arm.ts\",\n        \"main.py\"\n    ],\n    \"preferredEditor\": \"blocksprj\"\n}\n"}},{"timestamp":1745262142201,"editorVersion":"7.0.61","text":{"main.blocks":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"$W#TD3}i@Qp2NSg=g8)0\">times</variable><variable id=\"aN(`Fs;zaZS[EB-l}~m!\">x</variable><variable id=\"1J~7m7k?7MyBG%XO7{P_\">y</variable><variable id=\"N]R+O:rLGJ8m}jRb_DUr\">z</variable><variable id=\"(P=Wxr;_%1o1^M~0{ztt\">BTflag</variable><variable id=\"*PuPK72H3QE4)l{D[==J\">SPflag</variable></variables><block type=\"pxt-on-start\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let z = 0\" numlines=\"1\" declaredvars=\"z\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let y = 0\" numlines=\"1\" declaredvars=\"y\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let x = 0\" numlines=\"1\" declaredvars=\"x\"></mutation><next><block type=\"variables_set\"><field name=\"VAR\" id=\"*PuPK72H3QE4)l{D[==J\">SPflag</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let BTflag = 0\" numlines=\"1\" declaredvars=\"BTflag\"></mutation><next><block type=\"bluetooth_start_uart_service\"><next><block type=\"bluetooth_settransmitpower\"><value name=\"power\"><shadow type=\"math_number\"><field name=\"NUM\">7</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"device_forever\" x=\"371\" y=\"0\"><statement name=\"HANDLER\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"Back.Count_ShoulderPress(x, y, z)\" numlines=\"1\"></mutation><next><block type=\"device_show_number\"><value name=\"number\"><block type=\"variables_get\"><field name=\"VAR\" id=\"$W#TD3}i@Qp2NSg=g8)0\">times</field></block></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"bluetooth.onBluetoothConnected(function on_bluetooth_connected() {\" line1=\"        \" line2=\"        BTflag = 1\" line3=\"    })\" numlines=\"4\"></mutation><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"(P=Wxr;_%1o1^M~0{ztt\">BTflag</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"function_call\"><mutation name=\"BluetoothSend\" functionid=\"ja9i%l,)@bF,Vh].1xx?\"></mutation></block></statement></block></next></block></next></block></next></block></statement></block><block type=\"device_forever\" x=\"1029\" y=\"0\"><statement name=\"HANDLER\"><block type=\"function_call\"><mutation name=\"Acceleration\" functionid=\"7VmaBmNeew;*8B.~nU%R\"></mutation></block></statement></block><block type=\"function_definition\" x=\"1255\" y=\"0\"><mutation name=\"Acceleration\" functionid=\"7VmaBmNeew;*8B.~nU%R\"></mutation><field name=\"function_name\">Acceleration</field><statement name=\"STACK\"><block type=\"variables_set\"><field name=\"VAR\" id=\"aN(`Fs;zaZS[EB-l}~m!\">x</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_acceleration\"><field name=\"NAME\">Dimension.X</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"1J~7m7k?7MyBG%XO7{P_\">y</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_acceleration\"><field name=\"NAME\">Dimension.Y</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"N]R+O:rLGJ8m}jRb_DUr\">z</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_acceleration\"><field name=\"NAME\">Dimension.Z</field></block></value><next><block type=\"serial_writevalue\"><value name=\"name\"><shadow type=\"text\"><field name=\"TEXT\">X</field></shadow></value><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"aN(`Fs;zaZS[EB-l}~m!\">x</field></block></value><next><block type=\"serial_writevalue\"><value name=\"name\"><shadow type=\"text\"><field name=\"TEXT\">Y</field></shadow></value><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"1J~7m7k?7MyBG%XO7{P_\">y</field></block></value><next><block type=\"serial_writevalue\"><value name=\"name\"><shadow type=\"text\"><field name=\"TEXT\">Z</field></shadow></value><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"N]R+O:rLGJ8m}jRb_DUr\">z</field></block></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">100</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"0\" y=\"525\"><mutation name=\"BluetoothSend\" functionid=\"ja9i%l,)@bF,Vh].1xx?\"></mutation><field name=\"function_name\">BluetoothSend</field><statement name=\"STACK\"><block type=\"bluetooth_uart_writenumber\"><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"$W#TD3}i@Qp2NSg=g8)0\">times</field></block></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">1000</field></shadow></value></block></next></block></statement></block></xml>","main.ts":"function Acceleration () {\n    x = input.acceleration(Dimension.X)\n    y = input.acceleration(Dimension.Y)\n    z = input.acceleration(Dimension.Z)\n    serial.writeValue(\"X\", x)\n    serial.writeValue(\"Y\", y)\n    serial.writeValue(\"Z\", z)\n    basic.pause(100)\n}\nlet times = 0\nlet z = 0\nlet y = 0\nlet x = 0\nlet SPflag = 0\nlet BTflag = 0\nlet test = 0;\nbluetooth.startUartService()\nbluetooth.setTransmitPower(7)\n\nbluetooth.onBluetoothConnected(function () {\n    basic.pause(7000)\n    BTflag = 1\n    BluetoothSend();\n})\nbluetooth.onBluetoothDisconnected(function () {\n    BTflag = 0\n})\n\n// 傳送次數資料給藍牙裝置\nfunction BluetoothSend() {\n    if(test == 0) {\n        basic.pause(5000)  // 等接收端準備好\n        bluetooth.uartWriteNumber(12512);\n        test = 1;\n        serial.writeValue(\"test\", test)\n    }\n\n    //bluetooth.uartWriteNumber(times)\n    pause(100);\n}\n\n\nbasic.forever(function () {\n    Arm.Count_Curl(x, y, z);\n    basic.showNumber(times);\n})\n\nbasic.forever(function () {\n    Acceleration()\n    \n})\n\ncontrol.inBackground(function () {\n    while (true) {\n        if (BTflag == 1) {\n            BluetoothSend()\n        }\n        basic.pause(1000)\n    }\n})\n","README.md":"","Back.ts":"\nnamespace Back {\n    export function Count_ShoulderPress(x: number, y: number, z: number) { //肩推\n        basic.pause(10)\n        // sendBLEMessage();\n        if (x > 800 || x < -800 || z > 800 || z < -800) {\n            basic.showString('S');\n        }\n        else if (SPflag == 1) {\n            if (y <= -1000) { //包含重力加速度\n                times = times + 1;\n                SPflag = 2;\n            }\n        }\n        else if (y >= -900) { //包含重力加速度\n            SPflag = 1;\n        }\n    }\n}\n","Arm.ts":"namespace Arm{\n    export function Count_Curl(x: number, y: number, z: number) { //彎舉\n        basic.pause(100)\n        if (y >= 600) {\n            times = times + 1\n        }\n    }\n}","main.py":"def BluetoothSend():\n    bluetooth.uart_write_number(times)\n    basic.pause(1000)\ndef Acceleration():\n    global x, y, z\n    x = input.acceleration(Dimension.X)\n    y = input.acceleration(Dimension.Y)\n    z = input.acceleration(Dimension.Z)\n    serial.write_value(\"X\", x)\n    serial.write_value(\"Y\", y)\n    serial.write_value(\"Z\", z)\n    basic.pause(100)\ntimes = 0\nz = 0\ny = 0\nx = 0\nSPflag = 0\nBTflag = 0\nbluetooth.start_uart_service()\nbluetooth.set_transmit_power(7)\n\ndef on_forever():\n    Arm\n    \"\"\"\n    basic.showNumber(times)\n    bluetooth.onBluetoothConnected(function on_bluetooth_connected() {\n    \n    BTflag = 1\n    })\n    if (BTflag == 1) {\n    BluetoothSend()\n    }\n    })\n    \"\"\"\n    \n    def on_forever2():\n        Acceleration()\n    basic.forever(on_forever2)\n    \nbasic.forever(on_forever)\n","pxt.json":"{\n    \"name\": \"p2 - Copy\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"microphone\": \"*\",\n        \"bluetooth\": \"*\",\n        \"datalogger\": \"*\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\",\n        \"Back.ts\",\n        \"Arm.ts\",\n        \"main.py\"\n    ],\n    \"preferredEditor\": \"tsprj\"\n}\n"}},{"timestamp":1746764158714,"editorVersion":"7.0.61","text":{"main.blocks":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"$W#TD3}i@Qp2NSg=g8)0\">times</variable><variable id=\"aN(`Fs;zaZS[EB-l}~m!\">x</variable><variable id=\"1J~7m7k?7MyBG%XO7{P_\">y</variable><variable id=\"N]R+O:rLGJ8m}jRb_DUr\">z</variable><variable id=\"(P=Wxr;_%1o1^M~0{ztt\">BTflag</variable><variable id=\"*PuPK72H3QE4)l{D[==J\">SPflag</variable></variables><block type=\"pxt-on-start\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let z = 0\" numlines=\"1\" declaredvars=\"z\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let y = 0\" numlines=\"1\" declaredvars=\"y\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let x = 0\" numlines=\"1\" declaredvars=\"x\"></mutation><next><block type=\"variables_set\"><field name=\"VAR\" id=\"*PuPK72H3QE4)l{D[==J\">SPflag</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let BTflag = 0\" numlines=\"1\" declaredvars=\"BTflag\"></mutation><next><block type=\"bluetooth_start_uart_service\"><next><block type=\"bluetooth_settransmitpower\"><value name=\"power\"><shadow type=\"math_number\"><field name=\"NUM\">7</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"device_forever\" x=\"371\" y=\"0\"><statement name=\"HANDLER\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"Back.Count_ShoulderPress(x, y, z)\" numlines=\"1\"></mutation><next><block type=\"device_show_number\"><value name=\"number\"><block type=\"variables_get\"><field name=\"VAR\" id=\"$W#TD3}i@Qp2NSg=g8)0\">times</field></block></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"bluetooth.onBluetoothConnected(function on_bluetooth_connected() {\" line1=\"        \" line2=\"        BTflag = 1\" line3=\"    })\" numlines=\"4\"></mutation><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"(P=Wxr;_%1o1^M~0{ztt\">BTflag</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"function_call\"><mutation name=\"BluetoothSend\" functionid=\"ja9i%l,)@bF,Vh].1xx?\"></mutation></block></statement></block></next></block></next></block></next></block></statement></block><block type=\"device_forever\" x=\"1029\" y=\"0\"><statement name=\"HANDLER\"><block type=\"function_call\"><mutation name=\"Acceleration\" functionid=\"7VmaBmNeew;*8B.~nU%R\"></mutation></block></statement></block><block type=\"function_definition\" x=\"1255\" y=\"0\"><mutation name=\"Acceleration\" functionid=\"7VmaBmNeew;*8B.~nU%R\"></mutation><field name=\"function_name\">Acceleration</field><statement name=\"STACK\"><block type=\"variables_set\"><field name=\"VAR\" id=\"aN(`Fs;zaZS[EB-l}~m!\">x</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_acceleration\"><field name=\"NAME\">Dimension.X</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"1J~7m7k?7MyBG%XO7{P_\">y</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_acceleration\"><field name=\"NAME\">Dimension.Y</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"N]R+O:rLGJ8m}jRb_DUr\">z</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_acceleration\"><field name=\"NAME\">Dimension.Z</field></block></value><next><block type=\"serial_writevalue\"><value name=\"name\"><shadow type=\"text\"><field name=\"TEXT\">X</field></shadow></value><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"aN(`Fs;zaZS[EB-l}~m!\">x</field></block></value><next><block type=\"serial_writevalue\"><value name=\"name\"><shadow type=\"text\"><field name=\"TEXT\">Y</field></shadow></value><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"1J~7m7k?7MyBG%XO7{P_\">y</field></block></value><next><block type=\"serial_writevalue\"><value name=\"name\"><shadow type=\"text\"><field name=\"TEXT\">Z</field></shadow></value><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"N]R+O:rLGJ8m}jRb_DUr\">z</field></block></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">100</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"0\" y=\"525\"><mutation name=\"BluetoothSend\" functionid=\"ja9i%l,)@bF,Vh].1xx?\"></mutation><field name=\"function_name\">BluetoothSend</field><statement name=\"STACK\"><block type=\"bluetooth_uart_writenumber\"><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"$W#TD3}i@Qp2NSg=g8)0\">times</field></block></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">1000</field></shadow></value></block></next></block></statement></block></xml>","main.ts":"function Acceleration() {\n    \n    x = input.acceleration(Dimension.X)\n    y = input.acceleration(Dimension.Y)\n    z = input.acceleration(Dimension.Z)\n    serial.writeValue(\"X\", x)\n    serial.writeValue(\"Y\", y)\n    serial.writeValue(\"Z\", z)\n    basic.pause(100)\n}\n\nlet times = 0\nlet z = 0\nlet y = 0\nlet x = 0\nlet SPflag = 0\nlet BTflag = 0\nlet test = 0\nbluetooth.startUartService()\nbluetooth.setTransmitPower(7)\nbluetooth.onBluetoothConnected(function on_bluetooth_connected() {\n    basic.pause(7000)\n    BTflag = 1\n    basic.showIcon(IconNames.Yes)\n    //serial.writeValue(\"test\", test)\n    //BluetoothSend()\n})\nbluetooth.onBluetoothDisconnected(function on_bluetooth_disconnected() {\n    BTflag = 0\n})\n//  傳送次數資料給藍牙裝置\n\nbluetooth.onUartDataReceived(serial.delimiters(Delimiters.NewLine), function () {\n    let received = bluetooth.uartReadUntil(serial.delimiters(Delimiters.NewLine))\n    basic.showString(received)\n    //BluetoothSend();\n})\n\nfunction BluetoothSend() {\n    if (test == 0) {\n        basic.pause(5000)\n        test = 1\n        serial.writeValue(\"test\", test)\n    }\n    \n    bluetooth.uartWriteNumber(times)\n    pause(100)\n}\n\n\nbasic.forever(function on_forever() {\n    Arm.Count_Curl(x, y, z)\n    //basic.showNumber(times)\n})\nbasic.forever(function on_forever2() {\n    Acceleration()\n})\ncontrol.inBackground(function on_in_background() {\n    while (true) {\n        if (BTflag == 1) {\n            BluetoothSend()\n        }\n        \n        // BluetoothReceive()\n        basic.pause(100)\n    }\n})\n","README.md":"","Back.ts":"\nnamespace Back {\n    export function Count_ShoulderPress(x: number, y: number, z: number) { //肩推\n        basic.pause(10)\n        // sendBLEMessage();\n        if (x > 800 || x < -800 || z > 800 || z < -800) {\n            basic.showString('S');\n        }\n        else if (SPflag == 1) {\n            if (y <= -1000) { //包含重力加速度\n                times = times + 1;\n                SPflag = 2;\n            }\n        }\n        else if (y >= -900) { //包含重力加速度\n            SPflag = 1;\n        }\n    }\n}\n","Arm.ts":"namespace Arm{\n    export function Count_Curl(x: number, y: number, z: number) { //彎舉\n        basic.pause(100)\n        if (y >= 600) {\n            times = times + 1\n        }\n    }\n}","main.py":"def Acceleration():\n    global x, y, z\n    x = input.acceleration(Dimension.X)\n    y = input.acceleration(Dimension.Y)\n    z = input.acceleration(Dimension.Z)\n    serial.write_value(\"X\", x)\n    serial.write_value(\"Y\", y)\n    serial.write_value(\"Z\", z)\n    basic.pause(100)\ntimes = 0\nz = 0\ny = 0\nx = 0\nSPflag = 0\nBTflag = 0\ntest = 0\nbluetooth.start_uart_service()\nbluetooth.set_transmit_power(7)\n# serial.writeValue(\"test\", test)\n# BluetoothSend()\n\ndef on_bluetooth_connected():\n    global BTflag\n    basic.pause(7000)\n    BTflag = 1\n    basic.show_icon(IconNames.YES)\nbluetooth.on_bluetooth_connected(on_bluetooth_connected)\n\ndef on_bluetooth_disconnected():\n    global BTflag\n    BTflag = 0\nbluetooth.on_bluetooth_disconnected(on_bluetooth_disconnected)\n\n# 傳送次數資料給藍牙裝置\n# BluetoothSend();\n\ndef on_uart_data_received():\n    received = bluetooth.uart_read_until(serial.delimiters(Delimiters.NEW_LINE))\n    basic.show_string(received)\n    serial.write_string(received)\nbluetooth.on_uart_data_received(serial.delimiters(Delimiters.NEW_LINE),\n    on_uart_data_received)\n\ndef BluetoothSend():\n    global test\n    if test == 0:\n        basic.pause(5000)\n        test = 1\n        serial.write_value(\"test\", test)\n    bluetooth.uart_write_number(times)\n    pause(100)\n# basic.showNumber(times)\n\ndef on_forever():\n    Arm.Count_Curl(x, y, z)\nbasic.forever(on_forever)\n\ndef on_forever2():\n    Acceleration()\nbasic.forever(on_forever2)\n\ndef on_in_background():\n    while True:\n        if BTflag == 1:\n            BluetoothSend()\n        # BluetoothReceive()\n        basic.pause(100)\ncontrol.in_background(on_in_background)\n","pxt.json":"{\n    \"name\": \"p2 - Copy\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"microphone\": \"*\",\n        \"bluetooth\": \"*\",\n        \"datalogger\": \"*\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\",\n        \"Back.ts\",\n        \"Arm.ts\",\n        \"main.py\"\n    ],\n    \"preferredEditor\": \"tsprj\"\n}\n"}},{"timestamp":1746904524398,"editorVersion":"7.0.61","text":{"main.blocks":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"$W#TD3}i@Qp2NSg=g8)0\">times</variable><variable id=\"aN(`Fs;zaZS[EB-l}~m!\">x</variable><variable id=\"1J~7m7k?7MyBG%XO7{P_\">y</variable><variable id=\"N]R+O:rLGJ8m}jRb_DUr\">z</variable><variable id=\"(P=Wxr;_%1o1^M~0{ztt\">BTflag</variable><variable id=\"*PuPK72H3QE4)l{D[==J\">SPflag</variable></variables><block type=\"pxt-on-start\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let z = 0\" numlines=\"1\" declaredvars=\"z\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let y = 0\" numlines=\"1\" declaredvars=\"y\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let x = 0\" numlines=\"1\" declaredvars=\"x\"></mutation><next><block type=\"variables_set\"><field name=\"VAR\" id=\"*PuPK72H3QE4)l{D[==J\">SPflag</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let BTflag = 0\" numlines=\"1\" declaredvars=\"BTflag\"></mutation><next><block type=\"bluetooth_start_uart_service\"><next><block type=\"bluetooth_settransmitpower\"><value name=\"power\"><shadow type=\"math_number\"><field name=\"NUM\">7</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"device_forever\" x=\"371\" y=\"0\"><statement name=\"HANDLER\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"Back.Count_ShoulderPress(x, y, z)\" numlines=\"1\"></mutation><next><block type=\"device_show_number\"><value name=\"number\"><block type=\"variables_get\"><field name=\"VAR\" id=\"$W#TD3}i@Qp2NSg=g8)0\">times</field></block></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"bluetooth.onBluetoothConnected(function on_bluetooth_connected() {\" line1=\"        \" line2=\"        BTflag = 1\" line3=\"    })\" numlines=\"4\"></mutation><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"(P=Wxr;_%1o1^M~0{ztt\">BTflag</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"function_call\"><mutation name=\"BluetoothSend\" functionid=\"ja9i%l,)@bF,Vh].1xx?\"></mutation></block></statement></block></next></block></next></block></next></block></statement></block><block type=\"device_forever\" x=\"1029\" y=\"0\"><statement name=\"HANDLER\"><block type=\"function_call\"><mutation name=\"Acceleration\" functionid=\"7VmaBmNeew;*8B.~nU%R\"></mutation></block></statement></block><block type=\"function_definition\" x=\"1255\" y=\"0\"><mutation name=\"Acceleration\" functionid=\"7VmaBmNeew;*8B.~nU%R\"></mutation><field name=\"function_name\">Acceleration</field><statement name=\"STACK\"><block type=\"variables_set\"><field name=\"VAR\" id=\"aN(`Fs;zaZS[EB-l}~m!\">x</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_acceleration\"><field name=\"NAME\">Dimension.X</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"1J~7m7k?7MyBG%XO7{P_\">y</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_acceleration\"><field name=\"NAME\">Dimension.Y</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"N]R+O:rLGJ8m}jRb_DUr\">z</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_acceleration\"><field name=\"NAME\">Dimension.Z</field></block></value><next><block type=\"serial_writevalue\"><value name=\"name\"><shadow type=\"text\"><field name=\"TEXT\">X</field></shadow></value><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"aN(`Fs;zaZS[EB-l}~m!\">x</field></block></value><next><block type=\"serial_writevalue\"><value name=\"name\"><shadow type=\"text\"><field name=\"TEXT\">Y</field></shadow></value><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"1J~7m7k?7MyBG%XO7{P_\">y</field></block></value><next><block type=\"serial_writevalue\"><value name=\"name\"><shadow type=\"text\"><field name=\"TEXT\">Z</field></shadow></value><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"N]R+O:rLGJ8m}jRb_DUr\">z</field></block></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">100</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"0\" y=\"525\"><mutation name=\"BluetoothSend\" functionid=\"ja9i%l,)@bF,Vh].1xx?\"></mutation><field name=\"function_name\">BluetoothSend</field><statement name=\"STACK\"><block type=\"bluetooth_uart_writenumber\"><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"$W#TD3}i@Qp2NSg=g8)0\">times</field></block></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">1000</field></shadow></value></block></next></block></statement></block></xml>","main.ts":"function Acceleration() {\n    \n    x = input.acceleration(Dimension.X)\n    y = input.acceleration(Dimension.Y)\n    z = input.acceleration(Dimension.Z)\n    serial.writeValue(\"X\", x)\n    serial.writeValue(\"Y\", y)\n    serial.writeValue(\"Z\", z)\n    basic.pause(100)\n}\n\nlet times = 0\nlet z = 0\nlet y = 0\nlet x = 0\nlet SPflag = 0\nlet BTflag = 0\nlet test = 0\nbluetooth.startUartService()\nbluetooth.setTransmitPower(7)\nbluetooth.onBluetoothConnected(function on_bluetooth_connected() {\n    basic.pause(7000)\n    BTflag = 1\n    basic.showIcon(IconNames.Yes)\n    //serial.writeValue(\"test\", test)\n    //BluetoothSend()\n})\nbluetooth.onBluetoothDisconnected(function on_bluetooth_disconnected() {\n    BTflag = 0\n})\n\n//  傳送動作ID給藍牙裝置\nbluetooth.onUartDataReceived(serial.delimiters(Delimiters.NewLine), function () {\n    let received = bluetooth.uartReadUntil(serial.delimiters(Delimiters.NewLine))\n    basic.showString(received)\n    //BluetoothSend();\n}) \n\nbluetooth.onUartDataReceived(serial.delimiters(Delimiters.NewLine), function () {\n    let raw = bluetooth.uartReadUntil(serial.delimiters(Delimiters.NewLine))\n    let value = parseInt(raw)\n    basic.showNumber(value)\n})\n\n\nfunction BluetoothSend() {\n    if (test == 0) {\n        basic.pause(5000)\n        test = 1\n        serial.writeValue(\"test\", test)\n    }\n    \n    bluetooth.uartWriteNumber(times)\n    pause(100)\n}\n\n\nbasic.forever(function on_forever() {\n    Arm.Count_Curl(x, y, z)\n    //basic.showNumber(times)\n})\nbasic.forever(function on_forever2() {\n    Acceleration()\n})\ncontrol.inBackground(function on_in_background() {\n    while (true) {\n        if (BTflag == 1) {\n            BluetoothSend()\n        }\n        \n        // BluetoothReceive()\n        basic.pause(100)\n    }\n})\n","README.md":"","Back.ts":"\nnamespace Back {\n    export function Count_ShoulderPress(x: number, y: number, z: number) { //肩推\n        basic.pause(10)\n        // sendBLEMessage();\n        if (x > 800 || x < -800 || z > 800 || z < -800) {\n            basic.showString('S');\n        }\n        else if (SPflag == 1) {\n            if (y <= -1000) { //包含重力加速度\n                times = times + 1;\n                SPflag = 2;\n            }\n        }\n        else if (y >= -900) { //包含重力加速度\n            SPflag = 1;\n        }\n    }\n}\n","Arm.ts":"namespace Arm{\n    export function Count_Curl(x: number, y: number, z: number) { //彎舉\n        basic.pause(100)\n        if (y >= 600) {\n            times = times + 1\n        }\n    }\n}","main.py":"def Acceleration():\n    global x, y, z\n    x = input.acceleration(Dimension.X)\n    y = input.acceleration(Dimension.Y)\n    z = input.acceleration(Dimension.Z)\n    serial.write_value(\"X\", x)\n    serial.write_value(\"Y\", y)\n    serial.write_value(\"Z\", z)\n    basic.pause(100)\ntimes = 0\nz = 0\ny = 0\nx = 0\nSPflag = 0\nBTflag = 0\ntest = 0\nbluetooth.start_uart_service()\nbluetooth.set_transmit_power(7)\n# serial.writeValue(\"test\", test)\n# BluetoothSend()\n\ndef on_bluetooth_connected():\n    global BTflag\n    basic.pause(7000)\n    BTflag = 1\n    basic.show_icon(IconNames.YES)\nbluetooth.on_bluetooth_connected(on_bluetooth_connected)\n\ndef on_bluetooth_disconnected():\n    global BTflag\n    BTflag = 0\nbluetooth.on_bluetooth_disconnected(on_bluetooth_disconnected)\n\n# 傳送次數資料給藍牙裝置\n# BluetoothSend();\n\ndef on_uart_data_received():\n    received = bluetooth.uart_read_until(serial.delimiters(Delimiters.NEW_LINE))\n    basic.show_string(received)\n    serial.write_string(received)\nbluetooth.on_uart_data_received(serial.delimiters(Delimiters.NEW_LINE),\n    on_uart_data_received)\n\ndef BluetoothSend():\n    global test\n    if test == 0:\n        basic.pause(5000)\n        test = 1\n        serial.write_value(\"test\", test)\n    bluetooth.uart_write_number(times)\n    pause(100)\n# basic.showNumber(times)\n\ndef on_forever():\n    Arm.Count_Curl(x, y, z)\nbasic.forever(on_forever)\n\ndef on_forever2():\n    Acceleration()\nbasic.forever(on_forever2)\n\ndef on_in_background():\n    while True:\n        if BTflag == 1:\n            BluetoothSend()\n        # BluetoothReceive()\n        basic.pause(100)\ncontrol.in_background(on_in_background)\n","pxt.json":"{\n    \"name\": \"p2 - Copy\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"microphone\": \"*\",\n        \"bluetooth\": \"*\",\n        \"datalogger\": \"*\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\",\n        \"Back.ts\",\n        \"Arm.ts\",\n        \"main.py\"\n    ],\n    \"preferredEditor\": \"tsprj\"\n}\n"}},{"timestamp":1746964066614,"editorVersion":"7.0.61","text":{"main.blocks":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"$W#TD3}i@Qp2NSg=g8)0\">times</variable><variable id=\"aN(`Fs;zaZS[EB-l}~m!\">x</variable><variable id=\"1J~7m7k?7MyBG%XO7{P_\">y</variable><variable id=\"N]R+O:rLGJ8m}jRb_DUr\">z</variable><variable id=\"(P=Wxr;_%1o1^M~0{ztt\">BTflag</variable><variable id=\"*PuPK72H3QE4)l{D[==J\">SPflag</variable></variables><block type=\"pxt-on-start\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let z = 0\" numlines=\"1\" declaredvars=\"z\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let y = 0\" numlines=\"1\" declaredvars=\"y\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let x = 0\" numlines=\"1\" declaredvars=\"x\"></mutation><next><block type=\"variables_set\"><field name=\"VAR\" id=\"*PuPK72H3QE4)l{D[==J\">SPflag</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let BTflag = 0\" numlines=\"1\" declaredvars=\"BTflag\"></mutation><next><block type=\"bluetooth_start_uart_service\"><next><block type=\"bluetooth_settransmitpower\"><value name=\"power\"><shadow type=\"math_number\"><field name=\"NUM\">7</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"device_forever\" x=\"371\" y=\"0\"><statement name=\"HANDLER\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"Back.Count_ShoulderPress(x, y, z)\" numlines=\"1\"></mutation><next><block type=\"device_show_number\"><value name=\"number\"><block type=\"variables_get\"><field name=\"VAR\" id=\"$W#TD3}i@Qp2NSg=g8)0\">times</field></block></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"bluetooth.onBluetoothConnected(function on_bluetooth_connected() {\" line1=\"        \" line2=\"        BTflag = 1\" line3=\"    })\" numlines=\"4\"></mutation><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"(P=Wxr;_%1o1^M~0{ztt\">BTflag</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"function_call\"><mutation name=\"BluetoothSend\" functionid=\"ja9i%l,)@bF,Vh].1xx?\"></mutation></block></statement></block></next></block></next></block></next></block></statement></block><block type=\"device_forever\" x=\"1029\" y=\"0\"><statement name=\"HANDLER\"><block type=\"function_call\"><mutation name=\"Acceleration\" functionid=\"7VmaBmNeew;*8B.~nU%R\"></mutation></block></statement></block><block type=\"function_definition\" x=\"1255\" y=\"0\"><mutation name=\"Acceleration\" functionid=\"7VmaBmNeew;*8B.~nU%R\"></mutation><field name=\"function_name\">Acceleration</field><statement name=\"STACK\"><block type=\"variables_set\"><field name=\"VAR\" id=\"aN(`Fs;zaZS[EB-l}~m!\">x</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_acceleration\"><field name=\"NAME\">Dimension.X</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"1J~7m7k?7MyBG%XO7{P_\">y</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_acceleration\"><field name=\"NAME\">Dimension.Y</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"N]R+O:rLGJ8m}jRb_DUr\">z</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_acceleration\"><field name=\"NAME\">Dimension.Z</field></block></value><next><block type=\"serial_writevalue\"><value name=\"name\"><shadow type=\"text\"><field name=\"TEXT\">X</field></shadow></value><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"aN(`Fs;zaZS[EB-l}~m!\">x</field></block></value><next><block type=\"serial_writevalue\"><value name=\"name\"><shadow type=\"text\"><field name=\"TEXT\">Y</field></shadow></value><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"1J~7m7k?7MyBG%XO7{P_\">y</field></block></value><next><block type=\"serial_writevalue\"><value name=\"name\"><shadow type=\"text\"><field name=\"TEXT\">Z</field></shadow></value><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"N]R+O:rLGJ8m}jRb_DUr\">z</field></block></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">100</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"0\" y=\"525\"><mutation name=\"BluetoothSend\" functionid=\"ja9i%l,)@bF,Vh].1xx?\"></mutation><field name=\"function_name\">BluetoothSend</field><statement name=\"STACK\"><block type=\"bluetooth_uart_writenumber\"><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"$W#TD3}i@Qp2NSg=g8)0\">times</field></block></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">1000</field></shadow></value></block></next></block></statement></block></xml>","main.ts":"function Acceleration() {\n        x = input.acceleration(Dimension.X)\n        y = input.acceleration(Dimension.Y)\n        z = input.acceleration(Dimension.Z)\n        serial.writeValue(\"X\", x)\n        serial.writeValue(\"Y\", y)\n        serial.writeValue(\"Z\", z)\n        basic.pause(100) \n}\n\nlet times = 0\nlet z = 0\nlet y = 0\nlet x = 0\nlet SPflag = 0\nlet BTflag = 0 //連接成功，開始偵測\nlet ID = 100; //運動動作ID\n\nlet test = 0\nbluetooth.startUartService()\nbluetooth.setTransmitPower(7)\nbluetooth.onBluetoothConnected(function on_bluetooth_connected() {\n    basic.pause(7000)\n    BTflag = 1\n    basic.showIcon(IconNames.Yes)\n})\n\nbluetooth.onBluetoothDisconnected(function on_bluetooth_disconnected() {\n    BTflag = 0\n})\n\n//  傳送動作ID給藍牙裝置\nbluetooth.onUartDataReceived(serial.delimiters(Delimiters.NewLine), function () {\n    let raw = bluetooth.uartReadUntil(serial.delimiters(Delimiters.NewLine))\n    let value = parseInt(raw)\n\n    // 檢查是否為有效的數字\n    if (isNaN(value)) {\n        basic.showIcon(IconNames.Sad) // 顯示錯誤訊息\n    } else {\n        ID = value;\n        switch(value){\n            case 1:\n                Countdown();\n                pause(3000)\n                BTflag = 1;\n                break;\n            default:\n                break;\n        }\n    }\n})\n\nfunction Countdown(){\n    basic.showNumber(3)\n    pause(1000)\n    basic.showNumber(2)\n    pause(1000)\n    basic.showNumber(1)\n    pause(1000)\n}\n\n/*function BluetoothSend() {\n    if (test == 0) {\n        basic.pause(5000)\n        test = 1\n        serial.writeValue(\"test\", test)\n    }\n    bluetooth.uartWriteNumber(times)\n    pause(100)\n}\n*/\n\nbasic.forever(function on_forever() {\n    if(BTflag == 1){\n        switch(ID){\n           case 1:\n                Arm.Count_Curl(x, y, z)\n                break;\n            default:\n                break\n        }\n        //basic.showNumber(times)\n    } \n})\nbasic.forever(function on_forever2() {\n    if (BTflag == 1) {\n        Acceleration()\n    }\n})\n/*control.inBackground(function on_in_background() {\n    while (true) {\n        if (BTflag == 1) {\n            BluetoothSend()\n        }\n        \n        // BluetoothReceive()\n        basic.pause(100)\n    }\n})\n*/","README.md":"","Back.ts":"\nnamespace Back {\n    export function Count_ShoulderPress(x: number, y: number, z: number) { //肩推\n        basic.pause(10)\n        if (x > 800 || x < -800 || z > 800 || z < -800) {\n            basic.showString('S');\n        }\n        else if (SPflag == 1) {\n            if (y <= -1000) { //包含重力加速度\n                times = times + 1;\n                SPflag = 2;\n            }\n        }\n        else if (y >= -900) { //包含重力加速度\n            SPflag = 1;\n        }\n    }\n}\n","Arm.ts":"namespace Arm{\n    export function Count_Curl(x: number, y: number, z: number) { //彎舉\n        basic.pause(100)\n        if (y >= 600) {\n            times = times + 1\n        }\n    }\n}","main.py":"def Acceleration():\n    global x, y, z\n    x = input.acceleration(Dimension.X)\n    y = input.acceleration(Dimension.Y)\n    z = input.acceleration(Dimension.Z)\n    serial.write_value(\"X\", x)\n    serial.write_value(\"Y\", y)\n    serial.write_value(\"Z\", z)\n    basic.pause(100)\ntimes = 0\nz = 0\ny = 0\nx = 0\nSPflag = 0\nBTflag = 0\ntest = 0\nbluetooth.start_uart_service()\nbluetooth.set_transmit_power(7)\n# serial.writeValue(\"test\", test)\n# BluetoothSend()\n\ndef on_bluetooth_connected():\n    global BTflag\n    basic.pause(7000)\n    BTflag = 1\n    basic.show_icon(IconNames.YES)\nbluetooth.on_bluetooth_connected(on_bluetooth_connected)\n\ndef on_bluetooth_disconnected():\n    global BTflag\n    BTflag = 0\nbluetooth.on_bluetooth_disconnected(on_bluetooth_disconnected)\n\n# 傳送次數資料給藍牙裝置\n# BluetoothSend();\n\ndef on_uart_data_received():\n    received = bluetooth.uart_read_until(serial.delimiters(Delimiters.NEW_LINE))\n    basic.show_string(received)\n    serial.write_string(received)\nbluetooth.on_uart_data_received(serial.delimiters(Delimiters.NEW_LINE),\n    on_uart_data_received)\n\ndef BluetoothSend():\n    global test\n    if test == 0:\n        basic.pause(5000)\n        test = 1\n        serial.write_value(\"test\", test)\n    bluetooth.uart_write_number(times)\n    pause(100)\n# basic.showNumber(times)\n\ndef on_forever():\n    Arm.Count_Curl(x, y, z)\nbasic.forever(on_forever)\n\ndef on_forever2():\n    Acceleration()\nbasic.forever(on_forever2)\n\ndef on_in_background():\n    while True:\n        if BTflag == 1:\n            BluetoothSend()\n        # BluetoothReceive()\n        basic.pause(100)\ncontrol.in_background(on_in_background)\n","pxt.json":"{\n    \"name\": \"p2 - Copy\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"microphone\": \"*\",\n        \"bluetooth\": \"*\",\n        \"datalogger\": \"*\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\",\n        \"Back.ts\",\n        \"Arm.ts\",\n        \"main.py\"\n    ],\n    \"preferredEditor\": \"tsprj\"\n}\n"}},{"timestamp":1747334745629,"editorVersion":"7.0.61","text":{"main.blocks":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"$W#TD3}i@Qp2NSg=g8)0\">times</variable><variable id=\"aN(`Fs;zaZS[EB-l}~m!\">x</variable><variable id=\"1J~7m7k?7MyBG%XO7{P_\">y</variable><variable id=\"N]R+O:rLGJ8m}jRb_DUr\">z</variable><variable id=\"(P=Wxr;_%1o1^M~0{ztt\">BTflag</variable><variable id=\"*PuPK72H3QE4)l{D[==J\">SPflag</variable></variables><block type=\"pxt-on-start\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let z = 0\" numlines=\"1\" declaredvars=\"z\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let y = 0\" numlines=\"1\" declaredvars=\"y\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let x = 0\" numlines=\"1\" declaredvars=\"x\"></mutation><next><block type=\"variables_set\"><field name=\"VAR\" id=\"*PuPK72H3QE4)l{D[==J\">SPflag</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let BTflag = 0\" numlines=\"1\" declaredvars=\"BTflag\"></mutation><next><block type=\"bluetooth_start_uart_service\"><next><block type=\"bluetooth_settransmitpower\"><value name=\"power\"><shadow type=\"math_number\"><field name=\"NUM\">7</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"device_forever\" x=\"371\" y=\"0\"><statement name=\"HANDLER\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"Back.Count_ShoulderPress(x, y, z)\" numlines=\"1\"></mutation><next><block type=\"device_show_number\"><value name=\"number\"><block type=\"variables_get\"><field name=\"VAR\" id=\"$W#TD3}i@Qp2NSg=g8)0\">times</field></block></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"bluetooth.onBluetoothConnected(function on_bluetooth_connected() {\" line1=\"        \" line2=\"        BTflag = 1\" line3=\"    })\" numlines=\"4\"></mutation><next><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"(P=Wxr;_%1o1^M~0{ztt\">BTflag</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"function_call\"><mutation name=\"BluetoothSend\" functionid=\"ja9i%l,)@bF,Vh].1xx?\"></mutation></block></statement></block></next></block></next></block></next></block></statement></block><block type=\"device_forever\" x=\"1029\" y=\"0\"><statement name=\"HANDLER\"><block type=\"function_call\"><mutation name=\"Acceleration\" functionid=\"7VmaBmNeew;*8B.~nU%R\"></mutation></block></statement></block><block type=\"function_definition\" x=\"1255\" y=\"0\"><mutation name=\"Acceleration\" functionid=\"7VmaBmNeew;*8B.~nU%R\"></mutation><field name=\"function_name\">Acceleration</field><statement name=\"STACK\"><block type=\"variables_set\"><field name=\"VAR\" id=\"aN(`Fs;zaZS[EB-l}~m!\">x</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_acceleration\"><field name=\"NAME\">Dimension.X</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"1J~7m7k?7MyBG%XO7{P_\">y</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_acceleration\"><field name=\"NAME\">Dimension.Y</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"N]R+O:rLGJ8m}jRb_DUr\">z</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_acceleration\"><field name=\"NAME\">Dimension.Z</field></block></value><next><block type=\"serial_writevalue\"><value name=\"name\"><shadow type=\"text\"><field name=\"TEXT\">X</field></shadow></value><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"aN(`Fs;zaZS[EB-l}~m!\">x</field></block></value><next><block type=\"serial_writevalue\"><value name=\"name\"><shadow type=\"text\"><field name=\"TEXT\">Y</field></shadow></value><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"1J~7m7k?7MyBG%XO7{P_\">y</field></block></value><next><block type=\"serial_writevalue\"><value name=\"name\"><shadow type=\"text\"><field name=\"TEXT\">Z</field></shadow></value><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"N]R+O:rLGJ8m}jRb_DUr\">z</field></block></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">100</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"0\" y=\"525\"><mutation name=\"BluetoothSend\" functionid=\"ja9i%l,)@bF,Vh].1xx?\"></mutation><field name=\"function_name\">BluetoothSend</field><statement name=\"STACK\"><block type=\"bluetooth_uart_writenumber\"><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"$W#TD3}i@Qp2NSg=g8)0\">times</field></block></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">1000</field></shadow></value></block></next></block></statement></block></xml>","main.ts":"function Acceleration() {\n        x = input.acceleration(Dimension.X)\n        y = input.acceleration(Dimension.Y)\n        z = input.acceleration(Dimension.Z)\n        serial.writeValue(\"X\", x)\n        serial.writeValue(\"Y\", y)\n        serial.writeValue(\"Z\", z)\n        basic.pause(100) \n}\n\nlet times = 0\nlet z = 0\nlet y = 0\nlet x = 0\nlet SPflag = 0\nlet BTflag = 0 //連接成功，開始偵測\nlet ID = 100; //運動動作ID\n\nlet test = 0\nbluetooth.startUartService()\nbluetooth.setTransmitPower(7)\nbluetooth.onBluetoothConnected(function on_bluetooth_connected() {\n    basic.pause(7000)\n    basic.showIcon(IconNames.Yes)\n})\n\nbluetooth.onBluetoothDisconnected(function on_bluetooth_disconnected() {\n    BTflag = 0\n})\n\n//  傳送動作ID給藍牙裝置\nbluetooth.onUartDataReceived(serial.delimiters(Delimiters.NewLine), function () {\n    let raw = bluetooth.uartReadUntil(serial.delimiters(Delimiters.NewLine))\n    let value = parseInt(raw)\n\n    // 檢查是否為有效的數字\n    if (isNaN(value)) {\n        basic.showIcon(IconNames.Sad) // 顯示錯誤訊息\n    } else {\n        ID = value;\n        switch(value){\n            case 1:\n                Countdown();\n                break;\n            case 0:\n                BTflag = 0;\n                basic.showIcon(IconNames.Asleep)\n            default:\n                break;\n        }\n    }\n})\n\nfunction Countdown(){\n    basic.showNumber(3)\n    pause(1000)\n    basic.showNumber(2)\n    pause(1000)\n    basic.showNumber(1)\n    pause(1000)\n    BTflag = 1;\n}\n\n\nbasic.forever(function on_forever() {\n    if(BTflag == 1){\n        switch(ID){\n           case 1:\n                Arm.Count_Curl(x, y, z)\n                break;\n            default:\n                break\n        }\n        basic.showNumber(times)\n        bluetooth.uartWriteNumber(times)\n        pause(100)\n    } \n})\nbasic.forever(function on_forever2() {\n    if (BTflag == 1) {\n        Acceleration()\n    }\n})\n/*control.inBackground(function on_in_background() {\n    while (true) {\n        if (BTflag == 1) {\n            BluetoothSend()\n        }\n        \n        // BluetoothReceive()\n        basic.pause(100)\n    }\n})\n*/","README.md":"","Back.ts":"\nnamespace Back {\n    export function Count_ShoulderPress(x: number, y: number, z: number) { //肩推\n        basic.pause(10)\n        if (x > 800 || x < -800 || z > 800 || z < -800) {\n            basic.showString('S');\n        }\n        else if (SPflag == 1) {\n            if (y <= -1000) { //包含重力加速度\n                times = times + 1;\n                SPflag = 2;\n            }\n        }\n        else if (y >= -900) { //包含重力加速度\n            SPflag = 1;\n        }\n    }\n}\n","Arm.ts":"namespace Arm{\n    export function Count_Curl(x: number, y: number, z: number) { //彎舉\n        basic.pause(100)\n        if (y >= 550) {\n            times = times + 1\n        }\n    }\n}","main.py":"def Acceleration():\n    global x, y, z\n    x = input.acceleration(Dimension.X)\n    y = input.acceleration(Dimension.Y)\n    z = input.acceleration(Dimension.Z)\n    serial.write_value(\"X\", x)\n    serial.write_value(\"Y\", y)\n    serial.write_value(\"Z\", z)\n    basic.pause(100)\ntimes = 0\nz = 0\ny = 0\nx = 0\nSPflag = 0\nBTflag = 0\ntest = 0\nbluetooth.start_uart_service()\nbluetooth.set_transmit_power(7)\n# serial.writeValue(\"test\", test)\n# BluetoothSend()\n\ndef on_bluetooth_connected():\n    global BTflag\n    basic.pause(7000)\n    BTflag = 1\n    basic.show_icon(IconNames.YES)\nbluetooth.on_bluetooth_connected(on_bluetooth_connected)\n\ndef on_bluetooth_disconnected():\n    global BTflag\n    BTflag = 0\nbluetooth.on_bluetooth_disconnected(on_bluetooth_disconnected)\n\n# 傳送次數資料給藍牙裝置\n# BluetoothSend();\n\ndef on_uart_data_received():\n    received = bluetooth.uart_read_until(serial.delimiters(Delimiters.NEW_LINE))\n    basic.show_string(received)\n    serial.write_string(received)\nbluetooth.on_uart_data_received(serial.delimiters(Delimiters.NEW_LINE),\n    on_uart_data_received)\n\ndef BluetoothSend():\n    global test\n    if test == 0:\n        basic.pause(5000)\n        test = 1\n        serial.write_value(\"test\", test)\n    bluetooth.uart_write_number(times)\n    pause(100)\n# basic.showNumber(times)\n\ndef on_forever():\n    Arm.Count_Curl(x, y, z)\nbasic.forever(on_forever)\n\ndef on_forever2():\n    Acceleration()\nbasic.forever(on_forever2)\n\ndef on_in_background():\n    while True:\n        if BTflag == 1:\n            BluetoothSend()\n        # BluetoothReceive()\n        basic.pause(100)\ncontrol.in_background(on_in_background)\n","pxt.json":"{\n    \"name\": \"p2 - Copy\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"microphone\": \"*\",\n        \"bluetooth\": \"*\",\n        \"datalogger\": \"*\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\",\n        \"Back.ts\",\n        \"Arm.ts\",\n        \"main.py\"\n    ],\n    \"preferredEditor\": \"tsprj\"\n}\n"}},{"timestamp":1747378750996,"editorVersion":"7.0.61","text":{"main.blocks":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"sb2bZ+g4c_#t|_loZLQd\">x</variable><variable id=\"#_0ccTzB2{8#UDLwlhhg\">y</variable><variable id=\"5gGIyo90]!sHc[RgtFJM\">z</variable><variable id=\"964$A`2{Cc+AM^W2k#Bt\">BTflag</variable><variable id=\"u;aSP@j/4WvkbOzNbngh\">raw</variable><variable id=\"zXk3N^64@;fc7GMB(Fsd\">value</variable><variable id=\"kU7Q`R?qrenz4h5?=0V7\">ID</variable><variable id=\"5$1o0}NLIi,0xf1Z{7)G\">times2</variable><variable id=\"E^G^urU^i!f;N6MDdn^k\">test</variable><variable id=\"K;vjAhooSk8])$u:h6rn\">SPflag</variable><variable id=\"emTM-^*~I8NDg~?;8MxH\">times</variable></variables><block type=\"pxt-on-start\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let value = 0\" numlines=\"1\" declaredvars=\"value\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let ID = 0\" numlines=\"1\" declaredvars=\"ID\"></mutation><next><block type=\"variables_set\"><field name=\"VAR\" id=\"E^G^urU^i!f;N6MDdn^k\">test</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let BTflag = 0\" numlines=\"1\" declaredvars=\"BTflag\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">連接成功，開始偵測</comment><next><block type=\"variables_set\"><field name=\"VAR\" id=\"K;vjAhooSk8])$u:h6rn\">SPflag</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let x = 0\" numlines=\"1\" declaredvars=\"x\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let y = 0\" numlines=\"1\" declaredvars=\"y\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let z = 0\" numlines=\"1\" declaredvars=\"z\"></mutation><next><block type=\"variables_set\"><field name=\"VAR\" id=\"emTM-^*~I8NDg~?;8MxH\">times</field><comment pinned=\"false\" h=\"80\" w=\"160\">計算偵測總次數</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"kU7Q`R?qrenz4h5?=0V7\">ID</field><comment pinned=\"false\" h=\"80\" w=\"160\">運動動作ID</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">100</field></shadow></value><next><block type=\"bluetooth_start_uart_service\"><next><block type=\"bluetooth_settransmitpower\"><comment pinned=\"false\" h=\"80\" w=\"160\">bluetooth.setDeviceName(\"TofuBit\")</comment><value name=\"power\"><shadow type=\"math_number\"><field name=\"NUM\">7</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"bluetooth_on_connected\" x=\"371\" y=\"0\"><statement name=\"HANDLER\"><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">7000</field></shadow></value><next><block type=\"basic_show_icon\"><field name=\"i\">IconNames.Yes</field></block></next></block></statement></block><block type=\"bluetooth_on_data_received\" x=\"626\" y=\"0\"><comment pinned=\"false\" h=\"80\" w=\"160\">傳送動作ID給藍牙裝置</comment><value name=\"delimiters\"><shadow type=\"serial_delimiter_conv\"><field name=\"del\">Delimiters.NewLine</field></shadow></value><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"u;aSP@j/4WvkbOzNbngh\">raw</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"bluetooth_uart_read\"><value name=\"del\"><shadow type=\"serial_delimiter_conv\"><field name=\"del\">Delimiters.NewLine</field></shadow></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"zXk3N^64@;fc7GMB(Fsd\">value</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"string_parseint\"><value name=\"text\"><block type=\"variables_get\"><field name=\"VAR\" id=\"u;aSP@j/4WvkbOzNbngh\">raw</field></block></value></block></value><next><block type=\"controls_if\"><mutation else=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">檢查是否為有效的數字</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">isNaN(value)</field></block></value><statement name=\"DO0\"><block type=\"basic_show_icon\"><field name=\"i\">IconNames.Sad</field><comment pinned=\"false\" h=\"80\" w=\"160\">顯示錯誤訊息</comment></block></statement><statement name=\"ELSE\"><block type=\"variables_set\"><field name=\"VAR\" id=\"kU7Q`R?qrenz4h5?=0V7\">ID</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"zXk3N^64@;fc7GMB(Fsd\">value</field></block></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"switch(value){\" line1=\"            case 1:\" line2=\"                Countdown();\" line3=\"                break;\" line4=\"            case 0:\" line5=\"                BTflag = 0;\" line6=\"                basic.showIcon(IconNames.Asleep)\" line7=\"            default:\" line8=\"                break;\" line9=\"        }\" numlines=\"10\"></mutation></block></next></block></statement></block></next></block></next></block></statement></block><block type=\"bluetooth_on_disconnected\" x=\"1232\" y=\"0\"><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"964$A`2{Cc+AM^W2k#Bt\">BTflag</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></statement></block><block type=\"device_forever\" x=\"1512\" y=\"0\"><statement name=\"HANDLER\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"964$A`2{Cc+AM^W2k#Bt\">BTflag</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"switch(ID){\" line1=\"           case 1: //手臂彎舉\" line2=\"                Arm.Count_Curl(x, y, z);\" line3=\"                break;\" line4=\"            case 2: //肩推\" line5=\"                Back.Count_ShoulderPress(x, y, z);\" line6=\"                break;\" line7=\"            default:\" line8=\"                break;\" line9=\"        }\" numlines=\"10\"></mutation><next><block type=\"device_show_number\"><value name=\"number\"><block type=\"variables_get\"><field name=\"VAR\" id=\"5$1o0}NLIi,0xf1Z{7)G\">times2</field></block></value><next><block type=\"bluetooth_uart_writenumber\"><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"5$1o0}NLIi,0xf1Z{7)G\">times2</field></block></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"pause(100)\" numlines=\"1\"></mutation></block></next></block></next></block></next></block></statement></block></statement></block><block type=\"device_forever\" x=\"0\" y=\"875\"><statement name=\"HANDLER\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"964$A`2{Cc+AM^W2k#Bt\">BTflag</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"function_call\"><mutation name=\"Acceleration\" functionid=\"sU!dT0t%tiSUiKE5r)e.\"></mutation></block></statement></block></statement></block><block type=\"function_definition\" x=\"406\" y=\"875\"><mutation name=\"Acceleration\" functionid=\"sU!dT0t%tiSUiKE5r)e.\"></mutation><field name=\"function_name\">Acceleration</field><comment pinned=\"false\" h=\"80\" w=\"160\">control.inBackground(function on_in_background() {\n\nwhile (true) {\n\nif (BTflag == 1) {\n\nBluetoothSend()\n\n}\n\n// BluetoothReceive()\n\nbasic.pause(100)\n\n}\n\n})</comment><statement name=\"STACK\"><block type=\"variables_set\"><field name=\"VAR\" id=\"sb2bZ+g4c_#t|_loZLQd\">x</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_acceleration\"><field name=\"NAME\">Dimension.X</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"#_0ccTzB2{8#UDLwlhhg\">y</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_acceleration\"><field name=\"NAME\">Dimension.Y</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"5gGIyo90]!sHc[RgtFJM\">z</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_acceleration\"><field name=\"NAME\">Dimension.Z</field></block></value><next><block type=\"serial_writevalue\"><value name=\"name\"><shadow type=\"text\"><field name=\"TEXT\">X</field></shadow></value><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"sb2bZ+g4c_#t|_loZLQd\">x</field></block></value><next><block type=\"serial_writevalue\"><value name=\"name\"><shadow type=\"text\"><field name=\"TEXT\">Y</field></shadow></value><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"#_0ccTzB2{8#UDLwlhhg\">y</field></block></value><next><block type=\"serial_writevalue\"><value name=\"name\"><shadow type=\"text\"><field name=\"TEXT\">Z</field></shadow></value><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"5gGIyo90]!sHc[RgtFJM\">z</field></block></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">100</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"828\" y=\"875\"><mutation name=\"Countdown\" functionid=\"$5%riA@$CS_.Cixg;dgY\"></mutation><field name=\"function_name\">Countdown</field><statement name=\"STACK\"><block type=\"device_show_number\"><value name=\"number\"><shadow type=\"math_number\"><field name=\"NUM\">3</field></shadow></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"pause(1000)\" numlines=\"1\"></mutation><next><block type=\"device_show_number\"><value name=\"number\"><shadow type=\"math_number\"><field name=\"NUM\">2</field></shadow></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"pause(1000)\" numlines=\"1\"></mutation><next><block type=\"device_show_number\"><value name=\"number\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"pause(1000)\" numlines=\"1\"></mutation><next><block type=\"variables_set\"><field name=\"VAR\" id=\"964$A`2{Cc+AM^W2k#Bt\">BTflag</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block></xml>","main.ts":"// control.inBackground(function on_in_background() {\n// \n// while (true) {\n// \n// if (BTflag == 1) {\n// \n// BluetoothSend()\n// \n// }\n// \n// // BluetoothReceive()\n// \n// basic.pause(100)\n// \n// }\n// \n// })\nfunction Acceleration () {\n    x = input.acceleration(Dimension.X)\n    y = input.acceleration(Dimension.Y)\n    z = input.acceleration(Dimension.Z)\n    serial.writeValue(\"X\", x)\n    serial.writeValue(\"Y\", y)\n    serial.writeValue(\"Z\", z)\n    basic.pause(100)\n}\nbluetooth.onBluetoothConnected(function () {\n    basic.pause(7000)\n    basic.showIcon(IconNames.Yes)\n})\nbluetooth.onBluetoothDisconnected(function () {\n    BTflag = 0\n})\n// 傳送動作ID給藍牙裝置\nbluetooth.onUartDataReceived(serial.delimiters(Delimiters.NewLine), function () {\n    raw = bluetooth.uartReadUntil(serial.delimiters(Delimiters.NewLine))\n    value = parseInt(raw)\n    // 檢查是否為有效的數字\n    if (isNaN(value)) {\n        // 顯示錯誤訊息\n        basic.showIcon(IconNames.Sad)\n    } else {\n        ID = value\n        switch(value){\n            case 1:\n                Countdown();\n                break;\n            case 0:\n                BTflag = 0;\n                basic.showIcon(IconNames.Asleep)\n            default:\n                break;\n        }\n    }\n})\nfunction Countdown () {\n    basic.showNumber(3)\n    pause(1000)\nbasic.showNumber(2)\n    pause(1000)\nbasic.showNumber(1)\n    pause(1000)\nBTflag = 1\n}\nlet raw = \"\"\nlet value = 0\nlet ID = 0\nlet test = 0\n// 連接成功，開始偵測\nlet BTflag = 0\nlet SPflag = 0\nlet x = 0\nlet y = 0\nlet z = 0\n// 計算偵測總次數\nlet times = 0\n// 運動動作ID\nID = 100\nbluetooth.startUartService()\n// bluetooth.setDeviceName(\"TofuBit\")\nbluetooth.setTransmitPower(7)\nbasic.forever(function () {\n    if (BTflag == 1) {\n        let times2 = 0\n        switch(ID){\n           case 1: //手臂彎舉\n                Arm.Count_Curl(x, y, z);\n                break;\n            case 2: //肩推\n                Back.Count_ShoulderPress(x, y, z);\n                break;\n            default:\n                break;\n        }\nbasic.showNumber(times2)\n        bluetooth.uartWriteNumber(times2)\n        pause(100)\n    }\n})\nbasic.forever(function () {\n    if (BTflag == 0) {\n        Acceleration()\n    }\n    \n})\n\nfunction Count_Elbow_extension(x: number, y: number, z: number){\n    if (x >= 1050) {\n        if(y>=-300){\n            times = times + 1\n        }\n    }\n    basic.pause(100)\n}\n/*basic.forever(function () {\n    Count_Elbow_extension(x , y, z);\n    basic.showNumber(times)\n})\n*/","README.md":"","Back.ts":"\nnamespace Back {\n    export function Count_ShoulderPress(x: number, y: number, z: number, ) { //肩推\n        basic.pause(10)\n        if (x > 800 || x < -800 || z > 800 || z < -800) {\n            basic.showString('S');\n        }\n        else if (SPflag == 1) {\n            if (y <= -1000) { //包含重力加速度\n                times = times + 1;\n                SPflag = 2;\n            }\n        }\n        else if (y >= -900) { //包含重力加速度\n            SPflag = 1;\n        }\n    }\n}\n","Arm.ts":"namespace Arm{\n    export function Count_Curl(x: number, y: number, z: number) { //彎舉\n        basic.pause(100)\n        if (y >= 550) {\n            times = times +1\n        }\n    }\n}","main.py":"def Acceleration():\n    global x, y, z\n    x = input.acceleration(Dimension.X)\n    y = input.acceleration(Dimension.Y)\n    z = input.acceleration(Dimension.Z)\n    serial.write_value(\"X\", x)\n    serial.write_value(\"Y\", y)\n    serial.write_value(\"Z\", z)\n    basic.pause(100)\ntimes = 0\nz = 0\ny = 0\nx = 0\nSPflag = 0\nBTflag = 0\ntest = 0\nbluetooth.start_uart_service()\nbluetooth.set_transmit_power(7)\n# serial.writeValue(\"test\", test)\n# BluetoothSend()\n\ndef on_bluetooth_connected():\n    global BTflag\n    basic.pause(7000)\n    BTflag = 1\n    basic.show_icon(IconNames.YES)\nbluetooth.on_bluetooth_connected(on_bluetooth_connected)\n\ndef on_bluetooth_disconnected():\n    global BTflag\n    BTflag = 0\nbluetooth.on_bluetooth_disconnected(on_bluetooth_disconnected)\n\n# 傳送次數資料給藍牙裝置\n# BluetoothSend();\n\ndef on_uart_data_received():\n    received = bluetooth.uart_read_until(serial.delimiters(Delimiters.NEW_LINE))\n    basic.show_string(received)\n    serial.write_string(received)\nbluetooth.on_uart_data_received(serial.delimiters(Delimiters.NEW_LINE),\n    on_uart_data_received)\n\ndef BluetoothSend():\n    global test\n    if test == 0:\n        basic.pause(5000)\n        test = 1\n        serial.write_value(\"test\", test)\n    bluetooth.uart_write_number(times)\n    pause(100)\n# basic.showNumber(times)\n\ndef on_forever():\n    Arm.Count_Curl(x, y, z)\nbasic.forever(on_forever)\n\ndef on_forever2():\n    Acceleration()\nbasic.forever(on_forever2)\n\ndef on_in_background():\n    while True:\n        if BTflag == 1:\n            BluetoothSend()\n        # BluetoothReceive()\n        basic.pause(100)\ncontrol.in_background(on_in_background)\n","custom.ts":"\n","pxt.json":"{\n    \"name\": \"p2 - Copy\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"microphone\": \"*\",\n        \"bluetooth\": \"*\",\n        \"datalogger\": \"*\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\",\n        \"Back.ts\",\n        \"Arm.ts\",\n        \"main.py\",\n        \"custom.ts\"\n    ],\n    \"preferredEditor\": \"tsprj\",\n    \"yotta\": {\n        \"config\": {\n            \"microbit-dal\": {\n                \"bluetooth\": {\n                    \"open\": 1,\n                    \"whitelist\": 0,\n                    \"security_level\": null\n                }\n            }\n        }\n    }\n}\n"}},{"timestamp":1747676438455,"editorVersion":"7.0.61","text":{"main.blocks":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"sb2bZ+g4c_#t|_loZLQd\">x</variable><variable id=\"#_0ccTzB2{8#UDLwlhhg\">y</variable><variable id=\"5gGIyo90]!sHc[RgtFJM\">z</variable><variable id=\"964$A`2{Cc+AM^W2k#Bt\">BTflag</variable><variable id=\"u;aSP@j/4WvkbOzNbngh\">raw</variable><variable id=\"zXk3N^64@;fc7GMB(Fsd\">value</variable><variable id=\"kU7Q`R?qrenz4h5?=0V7\">ID</variable><variable id=\"5$1o0}NLIi,0xf1Z{7)G\">times2</variable><variable id=\"E^G^urU^i!f;N6MDdn^k\">test</variable><variable id=\"K;vjAhooSk8])$u:h6rn\">SPflag</variable><variable id=\"emTM-^*~I8NDg~?;8MxH\">times</variable></variables><block type=\"pxt-on-start\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let value = 0\" numlines=\"1\" declaredvars=\"value\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let ID = 0\" numlines=\"1\" declaredvars=\"ID\"></mutation><next><block type=\"variables_set\"><field name=\"VAR\" id=\"E^G^urU^i!f;N6MDdn^k\">test</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let BTflag = 0\" numlines=\"1\" declaredvars=\"BTflag\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">連接成功，開始偵測</comment><next><block type=\"variables_set\"><field name=\"VAR\" id=\"K;vjAhooSk8])$u:h6rn\">SPflag</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let x = 0\" numlines=\"1\" declaredvars=\"x\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let y = 0\" numlines=\"1\" declaredvars=\"y\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let z = 0\" numlines=\"1\" declaredvars=\"z\"></mutation><next><block type=\"variables_set\"><field name=\"VAR\" id=\"emTM-^*~I8NDg~?;8MxH\">times</field><comment pinned=\"false\" h=\"80\" w=\"160\">計算偵測總次數</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"kU7Q`R?qrenz4h5?=0V7\">ID</field><comment pinned=\"false\" h=\"80\" w=\"160\">運動動作ID</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">100</field></shadow></value><next><block type=\"bluetooth_start_uart_service\"><next><block type=\"bluetooth_settransmitpower\"><comment pinned=\"false\" h=\"80\" w=\"160\">bluetooth.setDeviceName(\"TofuBit\")</comment><value name=\"power\"><shadow type=\"math_number\"><field name=\"NUM\">7</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"bluetooth_on_connected\" x=\"371\" y=\"0\"><statement name=\"HANDLER\"><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">7000</field></shadow></value><next><block type=\"basic_show_icon\"><field name=\"i\">IconNames.Yes</field></block></next></block></statement></block><block type=\"bluetooth_on_data_received\" x=\"626\" y=\"0\"><comment pinned=\"false\" h=\"80\" w=\"160\">傳送動作ID給藍牙裝置</comment><value name=\"delimiters\"><shadow type=\"serial_delimiter_conv\"><field name=\"del\">Delimiters.NewLine</field></shadow></value><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"u;aSP@j/4WvkbOzNbngh\">raw</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"bluetooth_uart_read\"><value name=\"del\"><shadow type=\"serial_delimiter_conv\"><field name=\"del\">Delimiters.NewLine</field></shadow></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"zXk3N^64@;fc7GMB(Fsd\">value</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"string_parseint\"><value name=\"text\"><block type=\"variables_get\"><field name=\"VAR\" id=\"u;aSP@j/4WvkbOzNbngh\">raw</field></block></value></block></value><next><block type=\"controls_if\"><mutation else=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">檢查是否為有效的數字</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">isNaN(value)</field></block></value><statement name=\"DO0\"><block type=\"basic_show_icon\"><field name=\"i\">IconNames.Sad</field><comment pinned=\"false\" h=\"80\" w=\"160\">顯示錯誤訊息</comment></block></statement><statement name=\"ELSE\"><block type=\"variables_set\"><field name=\"VAR\" id=\"kU7Q`R?qrenz4h5?=0V7\">ID</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"zXk3N^64@;fc7GMB(Fsd\">value</field></block></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"switch(value){\" line1=\"            case 1:\" line2=\"                Countdown();\" line3=\"                break;\" line4=\"            case 0:\" line5=\"                BTflag = 0;\" line6=\"                basic.showIcon(IconNames.Asleep)\" line7=\"            default:\" line8=\"                break;\" line9=\"        }\" numlines=\"10\"></mutation></block></next></block></statement></block></next></block></next></block></statement></block><block type=\"bluetooth_on_disconnected\" x=\"1232\" y=\"0\"><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"964$A`2{Cc+AM^W2k#Bt\">BTflag</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></statement></block><block type=\"device_forever\" x=\"1512\" y=\"0\"><statement name=\"HANDLER\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"964$A`2{Cc+AM^W2k#Bt\">BTflag</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"switch(ID){\" line1=\"           case 1: //手臂彎舉\" line2=\"                Arm.Count_Curl(x, y, z);\" line3=\"                break;\" line4=\"            case 2: //肩推\" line5=\"                Back.Count_ShoulderPress(x, y, z);\" line6=\"                break;\" line7=\"            default:\" line8=\"                break;\" line9=\"        }\" numlines=\"10\"></mutation><next><block type=\"device_show_number\"><value name=\"number\"><block type=\"variables_get\"><field name=\"VAR\" id=\"5$1o0}NLIi,0xf1Z{7)G\">times2</field></block></value><next><block type=\"bluetooth_uart_writenumber\"><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"5$1o0}NLIi,0xf1Z{7)G\">times2</field></block></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"pause(100)\" numlines=\"1\"></mutation></block></next></block></next></block></next></block></statement></block></statement></block><block type=\"device_forever\" x=\"0\" y=\"875\"><statement name=\"HANDLER\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"964$A`2{Cc+AM^W2k#Bt\">BTflag</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"function_call\"><mutation name=\"Acceleration\" functionid=\"sU!dT0t%tiSUiKE5r)e.\"></mutation></block></statement></block></statement></block><block type=\"function_definition\" x=\"406\" y=\"875\"><mutation name=\"Acceleration\" functionid=\"sU!dT0t%tiSUiKE5r)e.\"></mutation><field name=\"function_name\">Acceleration</field><comment pinned=\"false\" h=\"80\" w=\"160\">control.inBackground(function on_in_background() {\n\nwhile (true) {\n\nif (BTflag == 1) {\n\nBluetoothSend()\n\n}\n\n// BluetoothReceive()\n\nbasic.pause(100)\n\n}\n\n})</comment><statement name=\"STACK\"><block type=\"variables_set\"><field name=\"VAR\" id=\"sb2bZ+g4c_#t|_loZLQd\">x</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_acceleration\"><field name=\"NAME\">Dimension.X</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"#_0ccTzB2{8#UDLwlhhg\">y</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_acceleration\"><field name=\"NAME\">Dimension.Y</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"5gGIyo90]!sHc[RgtFJM\">z</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_acceleration\"><field name=\"NAME\">Dimension.Z</field></block></value><next><block type=\"serial_writevalue\"><value name=\"name\"><shadow type=\"text\"><field name=\"TEXT\">X</field></shadow></value><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"sb2bZ+g4c_#t|_loZLQd\">x</field></block></value><next><block type=\"serial_writevalue\"><value name=\"name\"><shadow type=\"text\"><field name=\"TEXT\">Y</field></shadow></value><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"#_0ccTzB2{8#UDLwlhhg\">y</field></block></value><next><block type=\"serial_writevalue\"><value name=\"name\"><shadow type=\"text\"><field name=\"TEXT\">Z</field></shadow></value><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"5gGIyo90]!sHc[RgtFJM\">z</field></block></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">100</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"828\" y=\"875\"><mutation name=\"Countdown\" functionid=\"$5%riA@$CS_.Cixg;dgY\"></mutation><field name=\"function_name\">Countdown</field><statement name=\"STACK\"><block type=\"device_show_number\"><value name=\"number\"><shadow type=\"math_number\"><field name=\"NUM\">3</field></shadow></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"pause(1000)\" numlines=\"1\"></mutation><next><block type=\"device_show_number\"><value name=\"number\"><shadow type=\"math_number\"><field name=\"NUM\">2</field></shadow></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"pause(1000)\" numlines=\"1\"></mutation><next><block type=\"device_show_number\"><value name=\"number\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"pause(1000)\" numlines=\"1\"></mutation><next><block type=\"variables_set\"><field name=\"VAR\" id=\"964$A`2{Cc+AM^W2k#Bt\">BTflag</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block></xml>","main.ts":"// control.inBackground(function on_in_background() {\n// \n// while (true) {\n// \n// if (BTflag == 1) {\n// \n// BluetoothSend()\n// \n// }\n// \n// // BluetoothReceive()\n// \n// basic.pause(100)\n// \n// }\n// \n// })\nfunction Acceleration () {\n    x = input.acceleration(Dimension.X)\n    y = input.acceleration(Dimension.Y)\n    z = input.acceleration(Dimension.Z)\n    serial.writeValue(\"X\", x)\n    serial.writeValue(\"Y\", y)\n    serial.writeValue(\"Z\", z)\n    basic.pause(100)\n}\nbluetooth.onBluetoothConnected(function () {\n    basic.pause(7000)\n    basic.showIcon(IconNames.Yes)\n})\nbluetooth.onBluetoothDisconnected(function () {\n    BTflag = 0\n})\n// 傳送動作ID給藍牙裝置\nbluetooth.onUartDataReceived(serial.delimiters(Delimiters.NewLine), function () {\n    raw = bluetooth.uartReadUntil(serial.delimiters(Delimiters.NewLine))\n    value = parseInt(raw)\n    // 檢查是否為有效的數字\n    if (isNaN(value)) {\n        // 顯示錯誤訊息\n        basic.showIcon(IconNames.Sad)\n    } else {\n        ID = value\n        switch(value){\n            case 1:\n                Countdown();\n                break;\n            case 0:\n                BTflag = 0;\n                basic.showIcon(IconNames.Asleep)\n            default:\n                break;\n        }\n    }\n})\nfunction Countdown () {\n    basic.showNumber(3)\n    pause(1000)\nbasic.showNumber(2)\n    pause(1000)\nbasic.showNumber(1)\n    pause(1000)\nBTflag = 1\n}\nlet raw = \"\"\nlet value = 0\nlet ID = 0\nlet test = 0\n// 連接成功，開始偵測\nlet BTflag = 0\nlet SPflag = 0\nlet x = 0\nlet y = 0\nlet z = 0\n// 計算偵測總次數\nlet times = 0\n// 運動動作ID\nID = 100\nbluetooth.startUartService()\n// bluetooth.setDeviceName(\"TofuBit\")\nbluetooth.setTransmitPower(7)\nbasic.forever(function () {\n    if (BTflag == 1) {\n        let times2 = 0\n        switch(ID){\n           case 1: //手臂彎舉\n                Arm.Count_Curl(x, y, z);\n                break;\n            case 2: //肩推\n                Back.Count_ShoulderPress(x, y, z);\n                break;\n            default:\n                break;\n        }\nbasic.showNumber(times2)\n        bluetooth.uartWriteNumber(times2)\n        pause(100)\n    }\n})\nbasic.forever(function () {\n    if (BTflag == 0) {\n        Acceleration()\n    }\n    \n})\n\nfunction Count_Elbow_extension(x: number, y: number, z: number){\n    if (x >= 1050) {\n        if(y>=-300){\n            times = times + 1\n        }\n    }\n    basic.pause(100)\n}\n/*basic.forever(function () {\n    Count_Elbow_extension(x , y, z);\n    basic.showNumber(times)\n})\n*/","README.md":"","Back.ts":"\nnamespace Back {\n    export function Count_ShoulderPress(x: number, y: number, z: number, ) { //肩推\n        basic.pause(10)\n        if (x > 800 || x < -800 || z > 800 || z < -800) {\n            basic.showString('S');\n        }\n        else if (SPflag == 1) {\n            if (y <= -1000) { //包含重力加速度\n                times = times + 1;\n                SPflag = 2;\n            }\n        }\n        else if (y >= -900) { //包含重力加速度\n            SPflag = 1;\n        }\n    }\n}\n","Arm.ts":"namespace Arm{\n    export function Count_Curl(x: number, y: number, z: number) { //彎舉\n        basic.pause(100)\n        if (y >= 550) {\n            times = times +1\n        }\n    }\n}","main.py":"def Acceleration():\n    global x, y, z\n    x = input.acceleration(Dimension.X)\n    y = input.acceleration(Dimension.Y)\n    z = input.acceleration(Dimension.Z)\n    serial.write_value(\"X\", x)\n    serial.write_value(\"Y\", y)\n    serial.write_value(\"Z\", z)\n    basic.pause(100)\ntimes = 0\nz = 0\ny = 0\nx = 0\nSPflag = 0\nBTflag = 0\ntest = 0\nbluetooth.start_uart_service()\nbluetooth.set_transmit_power(7)\n# serial.writeValue(\"test\", test)\n# BluetoothSend()\n\ndef on_bluetooth_connected():\n    global BTflag\n    basic.pause(7000)\n    BTflag = 1\n    basic.show_icon(IconNames.YES)\nbluetooth.on_bluetooth_connected(on_bluetooth_connected)\n\ndef on_bluetooth_disconnected():\n    global BTflag\n    BTflag = 0\nbluetooth.on_bluetooth_disconnected(on_bluetooth_disconnected)\n\n# 傳送次數資料給藍牙裝置\n# BluetoothSend();\n\ndef on_uart_data_received():\n    received = bluetooth.uart_read_until(serial.delimiters(Delimiters.NEW_LINE))\n    basic.show_string(received)\n    serial.write_string(received)\nbluetooth.on_uart_data_received(serial.delimiters(Delimiters.NEW_LINE),\n    on_uart_data_received)\n\ndef BluetoothSend():\n    global test\n    if test == 0:\n        basic.pause(5000)\n        test = 1\n        serial.write_value(\"test\", test)\n    bluetooth.uart_write_number(times)\n    pause(100)\n# basic.showNumber(times)\n\ndef on_forever():\n    Arm.Count_Curl(x, y, z)\nbasic.forever(on_forever)\n\ndef on_forever2():\n    Acceleration()\nbasic.forever(on_forever2)\n\ndef on_in_background():\n    while True:\n        if BTflag == 1:\n            BluetoothSend()\n        # BluetoothReceive()\n        basic.pause(100)\ncontrol.in_background(on_in_background)\n","custom.ts":"\n","pxt.json":"{\n    \"name\": \"p2 - Copy\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"microphone\": \"*\",\n        \"bluetooth\": \"*\",\n        \"datalogger\": \"*\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\",\n        \"Back.ts\",\n        \"Arm.ts\",\n        \"main.py\",\n        \"custom.ts\"\n    ],\n    \"preferredEditor\": \"tsprj\",\n    \"yotta\": {\n        \"config\": {\n            \"microbit-dal\": {\n                \"bluetooth\": {\n                    \"open\": 1,\n                    \"whitelist\": 0,\n                    \"security_level\": null\n                }\n            }\n        }\n    }\n}\n"}},{"timestamp":1752776845280,"editorVersion":"8.0.8","text":{"main.blocks":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"sb2bZ+g4c_#t|_loZLQd\">x</variable><variable id=\"#_0ccTzB2{8#UDLwlhhg\">y</variable><variable id=\"5gGIyo90]!sHc[RgtFJM\">z</variable><variable id=\"964$A`2{Cc+AM^W2k#Bt\">BTflag</variable><variable id=\"u;aSP@j/4WvkbOzNbngh\">raw</variable><variable id=\"zXk3N^64@;fc7GMB(Fsd\">value</variable><variable id=\"kU7Q`R?qrenz4h5?=0V7\">ID</variable><variable id=\"5$1o0}NLIi,0xf1Z{7)G\">times2</variable><variable id=\"E^G^urU^i!f;N6MDdn^k\">test</variable><variable id=\"K;vjAhooSk8])$u:h6rn\">SPflag</variable><variable id=\"emTM-^*~I8NDg~?;8MxH\">times</variable></variables><block type=\"pxt-on-start\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let value = 0\" numlines=\"1\" declaredvars=\"value\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let ID = 0\" numlines=\"1\" declaredvars=\"ID\"></mutation><next><block type=\"variables_set\"><field name=\"VAR\" id=\"E^G^urU^i!f;N6MDdn^k\">test</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let BTflag = 0\" numlines=\"1\" declaredvars=\"BTflag\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">連接成功，開始偵測</comment><next><block type=\"variables_set\"><field name=\"VAR\" id=\"K;vjAhooSk8])$u:h6rn\">SPflag</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let x = 0\" numlines=\"1\" declaredvars=\"x\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let y = 0\" numlines=\"1\" declaredvars=\"y\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let z = 0\" numlines=\"1\" declaredvars=\"z\"></mutation><next><block type=\"variables_set\"><field name=\"VAR\" id=\"emTM-^*~I8NDg~?;8MxH\">times</field><comment pinned=\"false\" h=\"80\" w=\"160\">計算偵測總次數</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"kU7Q`R?qrenz4h5?=0V7\">ID</field><comment pinned=\"false\" h=\"80\" w=\"160\">運動動作ID</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">100</field></shadow></value><next><block type=\"bluetooth_start_uart_service\"><next><block type=\"bluetooth_settransmitpower\"><comment pinned=\"false\" h=\"80\" w=\"160\">bluetooth.setDeviceName(\"TofuBit\")</comment><value name=\"power\"><shadow type=\"math_number\"><field name=\"NUM\">7</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"bluetooth_on_connected\" x=\"371\" y=\"0\"><statement name=\"HANDLER\"><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">7000</field></shadow></value><next><block type=\"basic_show_icon\"><field name=\"i\">IconNames.Yes</field></block></next></block></statement></block><block type=\"bluetooth_on_data_received\" x=\"626\" y=\"0\"><comment pinned=\"false\" h=\"80\" w=\"160\">傳送動作ID給藍牙裝置</comment><value name=\"delimiters\"><shadow type=\"serial_delimiter_conv\"><field name=\"del\">Delimiters.NewLine</field></shadow></value><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"u;aSP@j/4WvkbOzNbngh\">raw</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"bluetooth_uart_read\"><value name=\"del\"><shadow type=\"serial_delimiter_conv\"><field name=\"del\">Delimiters.NewLine</field></shadow></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"zXk3N^64@;fc7GMB(Fsd\">value</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"string_parseint\"><value name=\"text\"><block type=\"variables_get\"><field name=\"VAR\" id=\"u;aSP@j/4WvkbOzNbngh\">raw</field></block></value></block></value><next><block type=\"controls_if\"><mutation else=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">檢查是否為有效的數字</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">isNaN(value)</field></block></value><statement name=\"DO0\"><block type=\"basic_show_icon\"><field name=\"i\">IconNames.Sad</field><comment pinned=\"false\" h=\"80\" w=\"160\">顯示錯誤訊息</comment></block></statement><statement name=\"ELSE\"><block type=\"variables_set\"><field name=\"VAR\" id=\"kU7Q`R?qrenz4h5?=0V7\">ID</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"zXk3N^64@;fc7GMB(Fsd\">value</field></block></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"switch(value){\" line1=\"            case 1:\" line2=\"                Countdown();\" line3=\"                break;\" line4=\"            case 0:\" line5=\"                BTflag = 0;\" line6=\"                basic.showIcon(IconNames.Asleep)\" line7=\"            default:\" line8=\"                break;\" line9=\"        }\" numlines=\"10\"></mutation></block></next></block></statement></block></next></block></next></block></statement></block><block type=\"bluetooth_on_disconnected\" x=\"1232\" y=\"0\"><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"964$A`2{Cc+AM^W2k#Bt\">BTflag</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></statement></block><block type=\"device_forever\" x=\"1512\" y=\"0\"><statement name=\"HANDLER\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"964$A`2{Cc+AM^W2k#Bt\">BTflag</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"switch(ID){\" line1=\"           case 1: //手臂彎舉\" line2=\"                Arm.Count_Curl(x, y, z);\" line3=\"                break;\" line4=\"            case 2: //肩推\" line5=\"                Back.Count_ShoulderPress(x, y, z);\" line6=\"                break;\" line7=\"            default:\" line8=\"                break;\" line9=\"        }\" numlines=\"10\"></mutation><next><block type=\"device_show_number\"><value name=\"number\"><block type=\"variables_get\"><field name=\"VAR\" id=\"5$1o0}NLIi,0xf1Z{7)G\">times2</field></block></value><next><block type=\"bluetooth_uart_writenumber\"><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"5$1o0}NLIi,0xf1Z{7)G\">times2</field></block></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"pause(100)\" numlines=\"1\"></mutation></block></next></block></next></block></next></block></statement></block></statement></block><block type=\"device_forever\" x=\"0\" y=\"875\"><statement name=\"HANDLER\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"964$A`2{Cc+AM^W2k#Bt\">BTflag</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"function_call\"><mutation name=\"Acceleration\" functionid=\"sU!dT0t%tiSUiKE5r)e.\"></mutation></block></statement></block></statement></block><block type=\"function_definition\" x=\"406\" y=\"875\"><mutation name=\"Acceleration\" functionid=\"sU!dT0t%tiSUiKE5r)e.\"></mutation><field name=\"function_name\">Acceleration</field><comment pinned=\"false\" h=\"80\" w=\"160\">control.inBackground(function on_in_background() {\n\nwhile (true) {\n\nif (BTflag == 1) {\n\nBluetoothSend()\n\n}\n\n// BluetoothReceive()\n\nbasic.pause(100)\n\n}\n\n})</comment><statement name=\"STACK\"><block type=\"variables_set\"><field name=\"VAR\" id=\"sb2bZ+g4c_#t|_loZLQd\">x</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_acceleration\"><field name=\"NAME\">Dimension.X</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"#_0ccTzB2{8#UDLwlhhg\">y</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_acceleration\"><field name=\"NAME\">Dimension.Y</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"5gGIyo90]!sHc[RgtFJM\">z</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_acceleration\"><field name=\"NAME\">Dimension.Z</field></block></value><next><block type=\"serial_writevalue\"><value name=\"name\"><shadow type=\"text\"><field name=\"TEXT\">X</field></shadow></value><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"sb2bZ+g4c_#t|_loZLQd\">x</field></block></value><next><block type=\"serial_writevalue\"><value name=\"name\"><shadow type=\"text\"><field name=\"TEXT\">Y</field></shadow></value><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"#_0ccTzB2{8#UDLwlhhg\">y</field></block></value><next><block type=\"serial_writevalue\"><value name=\"name\"><shadow type=\"text\"><field name=\"TEXT\">Z</field></shadow></value><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"5gGIyo90]!sHc[RgtFJM\">z</field></block></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">100</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"828\" y=\"875\"><mutation name=\"Countdown\" functionid=\"$5%riA@$CS_.Cixg;dgY\"></mutation><field name=\"function_name\">Countdown</field><statement name=\"STACK\"><block type=\"device_show_number\"><value name=\"number\"><shadow type=\"math_number\"><field name=\"NUM\">3</field></shadow></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"pause(1000)\" numlines=\"1\"></mutation><next><block type=\"device_show_number\"><value name=\"number\"><shadow type=\"math_number\"><field name=\"NUM\">2</field></shadow></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"pause(1000)\" numlines=\"1\"></mutation><next><block type=\"device_show_number\"><value name=\"number\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"pause(1000)\" numlines=\"1\"></mutation><next><block type=\"variables_set\"><field name=\"VAR\" id=\"964$A`2{Cc+AM^W2k#Bt\">BTflag</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block></xml>","main.ts":"// control.inBackground(function on_in_background() {\n// \n// while (true) {\n// \n// if (BTflag == 1) {\n// \n// BluetoothSend()\n// \n// }\n// \n// // BluetoothReceive()\n// \n// basic.pause(100)\n// \n// }\n// \n// })\nfunction Acceleration () {\n    x = input.acceleration(Dimension.X)\n    y = input.acceleration(Dimension.Y)\n    z = input.acceleration(Dimension.Z)\n    serial.writeValue(\"X\", x)\n    serial.writeValue(\"Y\", y)\n    serial.writeValue(\"Z\", z)\n    basic.pause(100)\n}\nbluetooth.onBluetoothConnected(function () {\n    basic.pause(7000)\n    basic.showIcon(IconNames.Yes)\n})\nbluetooth.onBluetoothDisconnected(function () {\n    BTflag = 0\n})\n// 傳送動作ID給藍牙裝置\nbluetooth.onUartDataReceived(serial.delimiters(Delimiters.NewLine), function () {\n    raw = bluetooth.uartReadUntil(serial.delimiters(Delimiters.NewLine))\n    value = parseInt(raw)\n    // 檢查是否為有效的數字\n    if (isNaN(value)) {\n        // 顯示錯誤訊息\n        basic.showIcon(IconNames.Sad)\n    } else {\n        ID = value\n        switch(value){\n            case 1:\n                Countdown();\n                break;\n            case 0:\n                BTflag = 0;\n                basic.showIcon(IconNames.Asleep)\n            default:\n                break;\n        }\n    }\n})\nfunction Countdown () {\n    basic.showNumber(3)\n    pause(1000)\nbasic.showNumber(2)\n    pause(1000)\nbasic.showNumber(1)\n    pause(1000)\nBTflag = 1\n}\nlet raw = \"\"\nlet value = 0\nlet ID = 0\nlet test = 0\n// 連接成功，開始偵測\nlet BTflag = 0\nlet SPflag = 0\nlet x = 0\nlet y = 0\nlet z = 0\n// 計算偵測總次數\nlet times = 0\n// 運動動作ID\nID = 100\nbluetooth.startUartService()\nbluetooth.setTransmitPower(7)\nbasic.forever(function () {\n    if (BTflag == 1) {\n        switch(ID){\n           case 1: //手臂彎舉\n                Arm.Count_Curl(x, y, z);\n                break;\n            case 2: //肩推\n                Back.Count_ShoulderPress(x, y, z);\n                break;\n            default:\n                break;\n        }\nbasic.showNumber(times)\n        bluetooth.uartWriteNumber(times)\n        pause(100)\n    }\n})\nbasic.forever(function () {\n    if (BTflag == 1) {\n        Acceleration()\n    }\n    \n})\n\nfunction Count_Elbow_extension(x: number, y: number, z: number){\n    if (x >= 1050) {\n        if(y>=-300){\n            times = times + 1\n        }\n    }\n    basic.pause(100)\n}\n/*basic.forever(function () {\n    Count_Elbow_extension(x , y, z);\n    basic.showNumber(times)\n})\n*/","README.md":"","Back.ts":"\nnamespace Back {\n    export function Count_ShoulderPress(x: number, y: number, z: number, ) { //肩推\n        basic.pause(10)\n        if (x > 800 || x < -800 || z > 800 || z < -800) {\n            basic.showString('S');\n        }\n        else if (SPflag == 1) {\n            if (y <= -1000) { //包含重力加速度\n                times = times + 1;\n                SPflag = 2;\n            }\n        }\n        else if (y >= -900) { //包含重力加速度\n            SPflag = 1;\n        }\n    }\n}\n","Arm.ts":"namespace Arm{\n    export function Count_Curl(x: number, y: number, z: number) { //彎舉\n        basic.pause(100)\n        if (y >= 500) {\n            times = times +1\n        }\n    }\n}","main.py":"def Acceleration():\n    global x, y, z\n    x = input.acceleration(Dimension.X)\n    y = input.acceleration(Dimension.Y)\n    z = input.acceleration(Dimension.Z)\n    serial.write_value(\"X\", x)\n    serial.write_value(\"Y\", y)\n    serial.write_value(\"Z\", z)\n    basic.pause(100)\ntimes = 0\nz = 0\ny = 0\nx = 0\nSPflag = 0\nBTflag = 0\ntest = 0\nbluetooth.start_uart_service()\nbluetooth.set_transmit_power(7)\n# serial.writeValue(\"test\", test)\n# BluetoothSend()\n\ndef on_bluetooth_connected():\n    global BTflag\n    basic.pause(7000)\n    BTflag = 1\n    basic.show_icon(IconNames.YES)\nbluetooth.on_bluetooth_connected(on_bluetooth_connected)\n\ndef on_bluetooth_disconnected():\n    global BTflag\n    BTflag = 0\nbluetooth.on_bluetooth_disconnected(on_bluetooth_disconnected)\n\n# 傳送次數資料給藍牙裝置\n# BluetoothSend();\n\ndef on_uart_data_received():\n    received = bluetooth.uart_read_until(serial.delimiters(Delimiters.NEW_LINE))\n    basic.show_string(received)\n    serial.write_string(received)\nbluetooth.on_uart_data_received(serial.delimiters(Delimiters.NEW_LINE),\n    on_uart_data_received)\n\ndef BluetoothSend():\n    global test\n    if test == 0:\n        basic.pause(5000)\n        test = 1\n        serial.write_value(\"test\", test)\n    bluetooth.uart_write_number(times)\n    pause(100)\n# basic.showNumber(times)\n\ndef on_forever():\n    Arm.Count_Curl(x, y, z)\nbasic.forever(on_forever)\n\ndef on_forever2():\n    Acceleration()\nbasic.forever(on_forever2)\n\ndef on_in_background():\n    while True:\n        if BTflag == 1:\n            BluetoothSend()\n        # BluetoothReceive()\n        basic.pause(100)\ncontrol.in_background(on_in_background)\n","custom.ts":"\n","pxt.json":"{\n    \"name\": \"p2 - Copy\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"microphone\": \"*\",\n        \"bluetooth\": \"*\",\n        \"datalogger\": \"*\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\",\n        \"Back.ts\",\n        \"Arm.ts\",\n        \"main.py\",\n        \"custom.ts\"\n    ],\n    \"preferredEditor\": \"tsprj\",\n    \"yotta\": {\n        \"config\": {\n            \"microbit-dal\": {\n                \"bluetooth\": {\n                    \"open\": 0,\n                    \"whitelist\": 1,\n                    \"security_level\": \"SECURITY_MODE_ENCRYPTION_NO_MITM\"\n                }\n            }\n        }\n    }\n}\n"}},{"timestamp":1752779513357,"editorVersion":"8.0.8","text":{"main.blocks":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"vJz|6UYYYjRVeiLXlbHB\">x</variable><variable id=\"eCQ:)biMP%vty.^C_/N[\">y</variable><variable id=\"D8wV,Qbg_s{hOFHB%bwa\">z</variable><variable id=\"{.9VKjwV`#sUsCPq*0Yb\">BTflag</variable><variable id=\")B39X[MJOqtn?M{i@4.2\">raw</variable><variable id=\"K52EvMj3j6S)=?$+bCc0\">value</variable><variable id=\"+||}0kRcFBcV?A{4+(Ew\">ID</variable><variable id=\"`Gf.ZcYj65F#Drn*|q`s\">times</variable><variable id=\"}nD!Nara.~SxEU%qv%Ai\">SPflag</variable><variable id=\"-MX8sd#E!#LR$sNVfzZl\">test</variable></variables><comment x=\"1241\" y=\"875\" w=\"177.59375\" h=\"120\">\n計算偵測總次數\n</comment><comment x=\"1463\" y=\"875\" w=\"320\" h=\"160\">\nbasic.forever(function () {\nCount_Elbow_extension(x , y, z);\nbasic.showNumber(times)\n})\n</comment><block type=\"pxt-on-start\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let z = 0\" numlines=\"1\" declaredvars=\"z\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let y = 0\" numlines=\"1\" declaredvars=\"y\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let x = 0\" numlines=\"1\" declaredvars=\"x\"></mutation><next><block type=\"variables_set\"><field name=\"VAR\" id=\"}nD!Nara.~SxEU%qv%Ai\">SPflag</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let BTflag = 0\" numlines=\"1\" declaredvars=\"BTflag\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">連接成功，開始偵測</comment><next><block type=\"variables_set\"><field name=\"VAR\" id=\"-MX8sd#E!#LR$sNVfzZl\">test</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let ID = 0\" numlines=\"1\" declaredvars=\"ID\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let value = 0\" numlines=\"1\" declaredvars=\"value\"></mutation><next><block type=\"variables_set\"><field name=\"VAR\" id=\"+||}0kRcFBcV?A{4+(Ew\">ID</field><comment pinned=\"false\" h=\"80\" w=\"160\">運動動作ID</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">100</field></shadow></value><next><block type=\"bluetooth_start_uart_service\"><next><block type=\"bluetooth_settransmitpower\"><value name=\"power\"><shadow type=\"math_number\"><field name=\"NUM\">7</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"bluetooth_on_connected\" x=\"371\" y=\"0\"><statement name=\"HANDLER\"><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">7000</field></shadow></value><next><block type=\"basic_show_icon\"><field name=\"i\">IconNames.Yes</field></block></next></block></statement></block><block type=\"bluetooth_on_data_received\" x=\"626\" y=\"0\"><comment pinned=\"false\" h=\"80\" w=\"160\">傳送動作ID給藍牙裝置</comment><value name=\"delimiters\"><shadow type=\"serial_delimiter_conv\"><field name=\"del\">Delimiters.NewLine</field></shadow></value><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\")B39X[MJOqtn?M{i@4.2\">raw</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"bluetooth_uart_read\"><value name=\"del\"><shadow type=\"serial_delimiter_conv\"><field name=\"del\">Delimiters.NewLine</field></shadow></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"K52EvMj3j6S)=?$+bCc0\">value</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"string_parseint\"><value name=\"text\"><block type=\"variables_get\"><field name=\"VAR\" id=\")B39X[MJOqtn?M{i@4.2\">raw</field></block></value></block></value><next><block type=\"controls_if\"><mutation else=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">檢查是否為有效的數字</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">isNaN(value)</field></block></value><statement name=\"DO0\"><block type=\"basic_show_icon\"><field name=\"i\">IconNames.Sad</field><comment pinned=\"false\" h=\"80\" w=\"160\">顯示錯誤訊息</comment></block></statement><statement name=\"ELSE\"><block type=\"variables_set\"><field name=\"VAR\" id=\"+||}0kRcFBcV?A{4+(Ew\">ID</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"K52EvMj3j6S)=?$+bCc0\">value</field></block></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"switch(value){\" line1=\"            case 1:\" line2=\"                Countdown();\" line3=\"                break;\" line4=\"            case 0:\" line5=\"                BTflag = 0;\" line6=\"                basic.showIcon(IconNames.Asleep)\" line7=\"            default:\" line8=\"                break;\" line9=\"        }\" numlines=\"10\"></mutation></block></next></block></statement></block></next></block></next></block></statement></block><block type=\"bluetooth_on_disconnected\" x=\"1232\" y=\"0\"><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"{.9VKjwV`#sUsCPq*0Yb\">BTflag</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></statement></block><block type=\"device_forever\" x=\"1512\" y=\"0\"><statement name=\"HANDLER\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"{.9VKjwV`#sUsCPq*0Yb\">BTflag</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"switch(ID){\" line1=\"           case 1: //手臂彎舉\" line2=\"                Arm.Count_Curl(x, y, z);\" line3=\"                break;\" line4=\"            case 2: //肩推\" line5=\"                Back.Count_ShoulderPress(x, y, z);\" line6=\"                break;\" line7=\"            default:\" line8=\"                break;\" line9=\"        }\" numlines=\"10\"></mutation><next><block type=\"device_show_number\"><value name=\"number\"><block type=\"variables_get\"><field name=\"VAR\" id=\"`Gf.ZcYj65F#Drn*|q`s\">times</field></block></value><next><block type=\"bluetooth_uart_writenumber\"><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"`Gf.ZcYj65F#Drn*|q`s\">times</field></block></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"pause(100)\" numlines=\"1\"></mutation></block></next></block></next></block></next></block></statement></block></statement></block><block type=\"device_forever\" x=\"2045\" y=\"0\"><statement name=\"HANDLER\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"{.9VKjwV`#sUsCPq*0Yb\">BTflag</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"function_call\"><mutation name=\"Acceleration\" functionid=\"QlTm+Wt0#:1PAAvL{###\"></mutation></block></statement></block></statement></block><block type=\"function_definition\" x=\"0\" y=\"875\"><mutation name=\"Count_Elbow_extension\" functionid=\"s#bLm_?VX1#!|!m},Yi_\"><arg name=\"x\" id=\"kauyf4bhf6a0jhgs4qlm6\" type=\"number\"></arg><arg name=\"y\" id=\"3j7zotcadwmmbyp19kdj\" type=\"number\"></arg><arg name=\"z\" id=\"br4dc99rpmqa2smkfupmu\" type=\"number\"></arg></mutation><field name=\"function_name\">Count_Elbow_extension</field><value name=\"kauyf4bhf6a0jhgs4qlm6\"><block type=\"argument_reporter_number\" deletable=\"false\"><field name=\"VALUE\">x</field></block></value><value name=\"3j7zotcadwmmbyp19kdj\"><block type=\"argument_reporter_number\" deletable=\"false\"><field name=\"VALUE\">y</field></block></value><value name=\"br4dc99rpmqa2smkfupmu\"><block type=\"argument_reporter_number\" deletable=\"false\"><field name=\"VALUE\">z</field></block></value><statement name=\"STACK\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GTE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">x</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1050</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GTE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">y</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">-300</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"`Gf.ZcYj65F#Drn*|q`s\">times</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"`Gf.ZcYj65F#Drn*|q`s\">times</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value></block></statement></block></statement><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">100</field></shadow></value></block></next></block></statement></block><block type=\"function_definition\" x=\"540\" y=\"875\"><mutation name=\"Acceleration\" functionid=\"QlTm+Wt0#:1PAAvL{###\"></mutation><field name=\"function_name\">Acceleration</field><comment pinned=\"false\" h=\"80\" w=\"160\">control.inBackground(function on_in_background() {\n\nwhile (true) {\n\nif (BTflag == 1) {\n\nBluetoothSend()\n\n}\n\n// BluetoothReceive()\n\nbasic.pause(100)\n\n}\n\n})</comment><statement name=\"STACK\"><block type=\"variables_set\"><field name=\"VAR\" id=\"vJz|6UYYYjRVeiLXlbHB\">x</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_acceleration\"><field name=\"NAME\">Dimension.X</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"eCQ:)biMP%vty.^C_/N[\">y</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_acceleration\"><field name=\"NAME\">Dimension.Y</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"D8wV,Qbg_s{hOFHB%bwa\">z</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_acceleration\"><field name=\"NAME\">Dimension.Z</field></block></value><next><block type=\"serial_writevalue\"><value name=\"name\"><shadow type=\"text\"><field name=\"TEXT\">X</field></shadow></value><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"vJz|6UYYYjRVeiLXlbHB\">x</field></block></value><next><block type=\"serial_writevalue\"><value name=\"name\"><shadow type=\"text\"><field name=\"TEXT\">Y</field></shadow></value><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"eCQ:)biMP%vty.^C_/N[\">y</field></block></value><next><block type=\"serial_writevalue\"><value name=\"name\"><shadow type=\"text\"><field name=\"TEXT\">Z</field></shadow></value><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"D8wV,Qbg_s{hOFHB%bwa\">z</field></block></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">100</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"962\" y=\"875\"><mutation name=\"Countdown\" functionid=\"0pREG*_nrxO`m^!*5c,Z\"></mutation><field name=\"function_name\">Countdown</field><statement name=\"STACK\"><block type=\"device_show_number\"><value name=\"number\"><shadow type=\"math_number\"><field name=\"NUM\">3</field></shadow></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"pause(1000)\" numlines=\"1\"></mutation><next><block type=\"device_show_number\"><value name=\"number\"><shadow type=\"math_number\"><field name=\"NUM\">2</field></shadow></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"pause(1000)\" numlines=\"1\"></mutation><next><block type=\"device_show_number\"><value name=\"number\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"pause(1000)\" numlines=\"1\"></mutation><next><block type=\"variables_set\"><field name=\"VAR\" id=\"{.9VKjwV`#sUsCPq*0Yb\">BTflag</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block></xml>","main.ts":"/**\n * 計算偵測總次數\n */\n/**\n * basic.forever(function () {\n * \n * Count_Elbow_extension(x , y, z);\n * \n * basic.showNumber(times)\n * \n * })\n */\n// control.inBackground(function on_in_background() {\n// \n// while (true) {\n// \n// if (BTflag == 1) {\n// \n// BluetoothSend()\n// \n// }\n// \n// // BluetoothReceive()\n// \n// basic.pause(100)\n// \n// }\n// \n// })\nfunction Acceleration () {\n    x = input.acceleration(Dimension.X)\n    y = input.acceleration(Dimension.Y)\n    z = input.acceleration(Dimension.Z)\n    serial.writeValue(\"X\", x)\n    serial.writeValue(\"Y\", y)\n    serial.writeValue(\"Z\", z)\n    basic.pause(100)\n}\nfunction Count_Elbow_extension (x: number, y: number, z: number) {\n    if (x >= 1050) {\n        if (y >= -300) {\n            times = times + 1\n        }\n    }\n    basic.pause(100)\n}\nbluetooth.onBluetoothConnected(function () {\n    basic.pause(7000)\n    basic.showIcon(IconNames.Yes)\n})\nbluetooth.onBluetoothDisconnected(function () {\n    BTflag = 0\n})\n// 傳送動作ID給藍牙裝置\nbluetooth.onUartDataReceived(serial.delimiters(Delimiters.NewLine), function () {\n    raw = bluetooth.uartReadUntil(serial.delimiters(Delimiters.NewLine))\n    value = parseInt(raw)\n    // 檢查是否為有效的數字\n    if (isNaN(value)) {\n        // 顯示錯誤訊息\n        basic.showIcon(IconNames.Sad)\n    } else {\n        ID = value\n        switch(value){\n            case 1:\n                Countdown();\n                break;\n            case 0:\n                BTflag = 0;\n                basic.showIcon(IconNames.Asleep)\n            default:\n                break;\n        }\n    }\n})\nfunction Countdown () {\n    basic.showNumber(3)\n    pause(1000)\nbasic.showNumber(2)\n    pause(1000)\nbasic.showNumber(1)\n    pause(1000)\nBTflag = 1\n}\nlet raw = \"\"\nlet times = 0\nlet z = 0\nlet y = 0\nlet x = 0\nlet SPflag = 0\n// 連接成功，開始偵測\nlet BTflag = 0\nlet test = 0\nlet ID = 0\nlet value = 0\n// 運動動作ID\nID = 100\nbluetooth.startUartService()\nbluetooth.setTransmitPower(7)\nbasic.forever(function () {\n    if (BTflag == 1) {\n        switch(ID){\n           case 1: //手臂彎舉\n                Arm.Count_Curl(x, y, z);\n                break;\n            case 2: //肩推\n                Back.Count_ShoulderPress(x, y, z);\n                break;\n            default:\n                break;\n        }\nbasic.showNumber(times)\n        bluetooth.uartWriteNumber(times)\n        pause(100)\n    }\n})\nbasic.forever(function () {\n    if (BTflag == 1) {\n        Acceleration()\n    }\n})\n","README.md":"","Back.ts":"\nnamespace Back {\n    export function Count_ShoulderPress(x: number, y: number, z: number, ) { //肩推\n        basic.pause(10)\n        if (x > 800 || x < -800 || z > 800 || z < -800) {\n            basic.showString('S');\n        } \n        else if (SPflag == 1) {\n            if (y <= -1000) { //包含重力加速度\n                times = times + 1;\n                SPflag = 2;\n            }\n        }\n        else if (y >= -900) { //包含重力加速度\n            SPflag = 1;\n        }\n    }\n}\n","Arm.ts":"namespace Arm{\n    export function Count_Curl(x: number, y: number, z: number) { //彎舉\n        basic.pause(100)\n        if (y >= 500) {\n            times = times +1\n        }\n    }\n}","main.py":"def Acceleration():\n    global x, y, z\n    x = input.acceleration(Dimension.X)\n    y = input.acceleration(Dimension.Y)\n    z = input.acceleration(Dimension.Z)\n    serial.write_value(\"X\", x)\n    serial.write_value(\"Y\", y)\n    serial.write_value(\"Z\", z)\n    basic.pause(100)\ntimes = 0\nz = 0\ny = 0\nx = 0\nSPflag = 0\nBTflag = 0\ntest = 0\nbluetooth.start_uart_service()\nbluetooth.set_transmit_power(7)\n# serial.writeValue(\"test\", test)\n# BluetoothSend()\n\ndef on_bluetooth_connected():\n    global BTflag\n    basic.pause(7000)\n    BTflag = 1\n    basic.show_icon(IconNames.YES)\nbluetooth.on_bluetooth_connected(on_bluetooth_connected)\n\ndef on_bluetooth_disconnected():\n    global BTflag\n    BTflag = 0\nbluetooth.on_bluetooth_disconnected(on_bluetooth_disconnected)\n\n# 傳送次數資料給藍牙裝置\n# BluetoothSend();\n\ndef on_uart_data_received():\n    received = bluetooth.uart_read_until(serial.delimiters(Delimiters.NEW_LINE))\n    basic.show_string(received)\n    serial.write_string(received)\nbluetooth.on_uart_data_received(serial.delimiters(Delimiters.NEW_LINE),\n    on_uart_data_received)\n\ndef BluetoothSend():\n    global test\n    if test == 0:\n        basic.pause(5000)\n        test = 1\n        serial.write_value(\"test\", test)\n    bluetooth.uart_write_number(times)\n    pause(100)\n# basic.showNumber(times)\n\ndef on_forever():\n    Arm.Count_Curl(x, y, z)\nbasic.forever(on_forever)\n\ndef on_forever2():\n    Acceleration()\nbasic.forever(on_forever2)\n\ndef on_in_background():\n    while True:\n        if BTflag == 1:\n            BluetoothSend()\n        # BluetoothReceive()\n        basic.pause(100)\ncontrol.in_background(on_in_background)\n","custom.ts":"\n","pxt.json":"{\n    \"name\": \"p2 - Copy\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"microphone\": \"*\",\n        \"bluetooth\": \"*\",\n        \"datalogger\": \"*\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\",\n        \"Back.ts\",\n        \"Arm.ts\",\n        \"main.py\",\n        \"custom.ts\"\n    ],\n    \"preferredEditor\": \"tsprj\",\n    \"yotta\": {\n        \"config\": {\n            \"microbit-dal\": {\n                \"bluetooth\": {\n                    \"open\": 1,\n                    \"whitelist\": 0,\n                    \"security_level\": null\n                }\n            }\n        }\n    }\n}\n"}},{"timestamp":1752781465925,"editorVersion":"8.0.8","text":{"main.blocks":"<xml xmlns=\"https://developers.google.com/blockly/xml\"><variables><variable id=\"vJz|6UYYYjRVeiLXlbHB\">x</variable><variable id=\"eCQ:)biMP%vty.^C_/N[\">y</variable><variable id=\"D8wV,Qbg_s{hOFHB%bwa\">z</variable><variable id=\"{.9VKjwV`#sUsCPq*0Yb\">BTflag</variable><variable id=\")B39X[MJOqtn?M{i@4.2\">raw</variable><variable id=\"K52EvMj3j6S)=?$+bCc0\">value</variable><variable id=\"+||}0kRcFBcV?A{4+(Ew\">ID</variable><variable id=\"`Gf.ZcYj65F#Drn*|q`s\">times</variable><variable id=\"}nD!Nara.~SxEU%qv%Ai\">SPflag</variable><variable id=\"-MX8sd#E!#LR$sNVfzZl\">test</variable></variables><comment x=\"1241\" y=\"875\" w=\"177.59375\" h=\"120\">\n計算偵測總次數\n</comment><comment x=\"1463\" y=\"875\" w=\"320\" h=\"160\">\nbasic.forever(function () {\nCount_Elbow_extension(x , y, z);\nbasic.showNumber(times)\n})\n</comment><block type=\"pxt-on-start\" x=\"0\" y=\"0\"><statement name=\"HANDLER\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let z = 0\" numlines=\"1\" declaredvars=\"z\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let y = 0\" numlines=\"1\" declaredvars=\"y\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let x = 0\" numlines=\"1\" declaredvars=\"x\"></mutation><next><block type=\"variables_set\"><field name=\"VAR\" id=\"}nD!Nara.~SxEU%qv%Ai\">SPflag</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let BTflag = 0\" numlines=\"1\" declaredvars=\"BTflag\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">連接成功，開始偵測</comment><next><block type=\"variables_set\"><field name=\"VAR\" id=\"-MX8sd#E!#LR$sNVfzZl\">test</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let ID = 0\" numlines=\"1\" declaredvars=\"ID\"></mutation><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"let value = 0\" numlines=\"1\" declaredvars=\"value\"></mutation><next><block type=\"variables_set\"><field name=\"VAR\" id=\"+||}0kRcFBcV?A{4+(Ew\">ID</field><comment pinned=\"false\" h=\"80\" w=\"160\">運動動作ID</comment><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">100</field></shadow></value><next><block type=\"bluetooth_start_uart_service\"><next><block type=\"bluetooth_settransmitpower\"><value name=\"power\"><shadow type=\"math_number\"><field name=\"NUM\">7</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"bluetooth_on_connected\" x=\"371\" y=\"0\"><statement name=\"HANDLER\"><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">7000</field></shadow></value><next><block type=\"basic_show_icon\"><field name=\"i\">IconNames.Yes</field></block></next></block></statement></block><block type=\"bluetooth_on_data_received\" x=\"626\" y=\"0\"><comment pinned=\"false\" h=\"80\" w=\"160\">傳送動作ID給藍牙裝置</comment><value name=\"delimiters\"><shadow type=\"serial_delimiter_conv\"><field name=\"del\">Delimiters.NewLine</field></shadow></value><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\")B39X[MJOqtn?M{i@4.2\">raw</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"bluetooth_uart_read\"><value name=\"del\"><shadow type=\"serial_delimiter_conv\"><field name=\"del\">Delimiters.NewLine</field></shadow></value></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"K52EvMj3j6S)=?$+bCc0\">value</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"string_parseint\"><value name=\"text\"><block type=\"variables_get\"><field name=\"VAR\" id=\")B39X[MJOqtn?M{i@4.2\">raw</field></block></value></block></value><next><block type=\"controls_if\"><mutation else=\"1\"></mutation><comment pinned=\"false\" h=\"80\" w=\"160\">檢查是否為有效的數字</comment><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"typescript_expression\"><field name=\"EXPRESSION\">isNaN(value)</field></block></value><statement name=\"DO0\"><block type=\"basic_show_icon\"><field name=\"i\">IconNames.Sad</field><comment pinned=\"false\" h=\"80\" w=\"160\">顯示錯誤訊息</comment></block></statement><statement name=\"ELSE\"><block type=\"variables_set\"><field name=\"VAR\" id=\"+||}0kRcFBcV?A{4+(Ew\">ID</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"K52EvMj3j6S)=?$+bCc0\">value</field></block></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"switch(value){\" line1=\"            case 1:\" line2=\"                Countdown();\" line3=\"                break;\" line4=\"            case 0:\" line5=\"                BTflag = 0;\" line6=\"                basic.showIcon(IconNames.Asleep)\" line7=\"            default:\" line8=\"                break;\" line9=\"        }\" numlines=\"10\"></mutation></block></next></block></statement></block></next></block></next></block></statement></block><block type=\"bluetooth_on_disconnected\" x=\"1232\" y=\"0\"><statement name=\"HANDLER\"><block type=\"variables_set\"><field name=\"VAR\" id=\"{.9VKjwV`#sUsCPq*0Yb\">BTflag</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow></value></block></statement></block><block type=\"device_forever\" x=\"1512\" y=\"0\"><statement name=\"HANDLER\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"{.9VKjwV`#sUsCPq*0Yb\">BTflag</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"switch(ID){\" line1=\"           case 1: //手臂彎舉\" line2=\"                Arm.Count_Curl(x, y, z);\" line3=\"                break;\" line4=\"            case 2: //肩推\" line5=\"                Back.Count_ShoulderPress(x, y, z);\" line6=\"                break;\" line7=\"            default:\" line8=\"                break;\" line9=\"        }\" numlines=\"10\"></mutation><next><block type=\"device_show_number\"><value name=\"number\"><block type=\"variables_get\"><field name=\"VAR\" id=\"`Gf.ZcYj65F#Drn*|q`s\">times</field></block></value><next><block type=\"bluetooth_uart_writenumber\"><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"`Gf.ZcYj65F#Drn*|q`s\">times</field></block></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"pause(100)\" numlines=\"1\"></mutation></block></next></block></next></block></next></block></statement></block></statement></block><block type=\"device_forever\" x=\"2045\" y=\"0\"><statement name=\"HANDLER\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">EQ</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"{.9VKjwV`#sUsCPq*0Yb\">BTflag</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"function_call\"><mutation name=\"Acceleration\" functionid=\"QlTm+Wt0#:1PAAvL{###\"></mutation></block></statement></block></statement></block><block type=\"function_definition\" x=\"0\" y=\"875\"><mutation name=\"Count_Elbow_extension\" functionid=\"s#bLm_?VX1#!|!m},Yi_\"><arg name=\"x\" id=\"kauyf4bhf6a0jhgs4qlm6\" type=\"number\"></arg><arg name=\"y\" id=\"3j7zotcadwmmbyp19kdj\" type=\"number\"></arg><arg name=\"z\" id=\"br4dc99rpmqa2smkfupmu\" type=\"number\"></arg></mutation><field name=\"function_name\">Count_Elbow_extension</field><value name=\"kauyf4bhf6a0jhgs4qlm6\"><block type=\"argument_reporter_number\" deletable=\"false\"><field name=\"VALUE\">x</field></block></value><value name=\"3j7zotcadwmmbyp19kdj\"><block type=\"argument_reporter_number\" deletable=\"false\"><field name=\"VALUE\">y</field></block></value><value name=\"br4dc99rpmqa2smkfupmu\"><block type=\"argument_reporter_number\" deletable=\"false\"><field name=\"VALUE\">z</field></block></value><statement name=\"STACK\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GTE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">x</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1050</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"controls_if\"><value name=\"IF0\"><shadow type=\"logic_boolean\"><field name=\"BOOL\">TRUE</field></shadow><block type=\"logic_compare\"><field name=\"OP\">GTE</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"argument_reporter_number\"><field name=\"VALUE\">y</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">-300</field></shadow></value></block></value><statement name=\"DO0\"><block type=\"variables_set\"><field name=\"VAR\" id=\"`Gf.ZcYj65F#Drn*|q`s\">times</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"math_arithmetic\"><field name=\"OP\">ADD</field><value name=\"A\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"variables_get\"><field name=\"VAR\" id=\"`Gf.ZcYj65F#Drn*|q`s\">times</field></block></value><value name=\"B\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></value></block></statement></block></statement><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">100</field></shadow></value></block></next></block></statement></block><block type=\"function_definition\" x=\"540\" y=\"875\"><mutation name=\"Acceleration\" functionid=\"QlTm+Wt0#:1PAAvL{###\"></mutation><field name=\"function_name\">Acceleration</field><comment pinned=\"false\" h=\"80\" w=\"160\">control.inBackground(function on_in_background() {\n\nwhile (true) {\n\nif (BTflag == 1) {\n\nBluetoothSend()\n\n}\n\n// BluetoothReceive()\n\nbasic.pause(100)\n\n}\n\n})</comment><statement name=\"STACK\"><block type=\"variables_set\"><field name=\"VAR\" id=\"vJz|6UYYYjRVeiLXlbHB\">x</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_acceleration\"><field name=\"NAME\">Dimension.X</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"eCQ:)biMP%vty.^C_/N[\">y</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_acceleration\"><field name=\"NAME\">Dimension.Y</field></block></value><next><block type=\"variables_set\"><field name=\"VAR\" id=\"D8wV,Qbg_s{hOFHB%bwa\">z</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">0</field></shadow><block type=\"device_acceleration\"><field name=\"NAME\">Dimension.Z</field></block></value><next><block type=\"serial_writevalue\"><value name=\"name\"><shadow type=\"text\"><field name=\"TEXT\">X</field></shadow></value><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"vJz|6UYYYjRVeiLXlbHB\">x</field></block></value><next><block type=\"serial_writevalue\"><value name=\"name\"><shadow type=\"text\"><field name=\"TEXT\">Y</field></shadow></value><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"eCQ:)biMP%vty.^C_/N[\">y</field></block></value><next><block type=\"serial_writevalue\"><value name=\"name\"><shadow type=\"text\"><field name=\"TEXT\">Z</field></shadow></value><value name=\"value\"><block type=\"variables_get\"><field name=\"VAR\" id=\"D8wV,Qbg_s{hOFHB%bwa\">z</field></block></value><next><block type=\"device_pause\"><value name=\"pause\"><shadow type=\"timePicker\"><field name=\"ms\">100</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type=\"function_definition\" x=\"962\" y=\"875\"><mutation name=\"Countdown\" functionid=\"0pREG*_nrxO`m^!*5c,Z\"></mutation><field name=\"function_name\">Countdown</field><statement name=\"STACK\"><block type=\"device_show_number\"><value name=\"number\"><shadow type=\"math_number\"><field name=\"NUM\">3</field></shadow></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"pause(1000)\" numlines=\"1\"></mutation><next><block type=\"device_show_number\"><value name=\"number\"><shadow type=\"math_number\"><field name=\"NUM\">2</field></shadow></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"pause(1000)\" numlines=\"1\"></mutation><next><block type=\"device_show_number\"><value name=\"number\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value><next><block type=\"typescript_statement\"><mutation xmlns=\"http://www.w3.org/1999/xhtml\" line0=\"pause(1000)\" numlines=\"1\"></mutation><next><block type=\"variables_set\"><field name=\"VAR\" id=\"{.9VKjwV`#sUsCPq*0Yb\">BTflag</field><value name=\"VALUE\"><shadow type=\"math_number\"><field name=\"NUM\">1</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block></xml>","main.ts":"/**\n * 計算偵測總次數\n */\n/**\n * basic.forever(function () {\n * \n * Count_Elbow_extension(x , y, z);\n * \n * basic.showNumber(times)\n * \n * })\n */\n// control.inBackground(function on_in_background() {\n// \n// while (true) {\n// \n// if (BTflag == 1) {\n// \n// BluetoothSend()\n// \n// }\n// \n// // BluetoothReceive()\n// \n// basic.pause(100)\n// \n// }\n// \n// })\nfunction Acceleration () {\n    x = input.acceleration(Dimension.X)\n    y = input.acceleration(Dimension.Y)\n    z = input.acceleration(Dimension.Z)\n    serial.writeValue(\"X\", x)\n    serial.writeValue(\"Y\", y)\n    serial.writeValue(\"Z\", z)\n    basic.pause(100)\n}\nfunction Count_Elbow_extension (x: number, y: number, z: number) {\n    if (x >= 1050) {\n        if (y >= -300) {\n            times = times + 1\n        }\n    }\n    basic.pause(100)\n}\nbluetooth.onBluetoothConnected(function () {\n    basic.pause(7000)\n    basic.showIcon(IconNames.Yes)\n})\nbluetooth.onBluetoothDisconnected(function () {\n    BTflag = 0\n})\n// 傳送動作ID給藍牙裝置\nbluetooth.onUartDataReceived(serial.delimiters(Delimiters.NewLine), function () {\n    raw = bluetooth.uartReadUntil(serial.delimiters(Delimiters.NewLine))\n    value = parseInt(raw)\n    // 檢查是否為有效的數字\n    if (isNaN(value)) {\n        // 顯示錯誤訊息\n        basic.showIcon(IconNames.Sad)\n    } else {\n        ID = value\n        switch(value){\n            case 1:\n                Countdown();\n                break;\n            case 0:\n                BTflag = 0;\n                basic.showIcon(IconNames.Asleep)\n            default:\n                break;\n        }\n    }\n})\nfunction Countdown () {\n    basic.showNumber(3)\n    pause(1000)\nbasic.showNumber(2)\n    pause(1000)\nbasic.showNumber(1)\n    pause(1000)\nBTflag = 1\n}\nlet raw = \"\"\nlet times = 0\nlet z = 0\nlet y = 0\nlet x = 0\nlet SPflag = 0\n// 連接成功，開始偵測\nlet BTflag = 0\nlet test = 0\nlet ID = 0\nlet value = 0\n// 運動動作ID\nID = 100\nbluetooth.startUartService()\nbluetooth.setTransmitPower(7)\nbasic.forever(function () {\n    if (BTflag == 1) {\n        switch(ID){\n           case 1: //手臂彎舉\n                Arm.Count_Curl(x, y, z);\n                break;\n            case 2: //肩推\n                Back.Count_ShoulderPress(x, y, z);\n                break;\n            default:\n                break;\n        }\nbasic.showNumber(times)\n        bluetooth.uartWriteNumber(times)\n        pause(100)\n    }\n})\nbasic.forever(function () {\n    if (BTflag == 1) {\n        Acceleration()\n    }\n})\n","README.md":"","Back.ts":"\nnamespace Back {\n    export function Count_ShoulderPress(x: number, y: number, z: number, ) { //肩推\n        basic.pause(10)\n        if (x > 800 || x < -800 || z > 800 || z < -800) {\n            basic.showString('S');\n        } \n        else if (SPflag == 1) {\n            if (y <= -1000) { //包含重力加速度\n                times = times + 1;\n                SPflag = 2;\n            }\n        }\n        else if (y >= -900) { //包含重力加速度\n            SPflag = 1;\n        }\n    }\n}\n","Arm.ts":"namespace Arm{\n    export function Count_Curl(x: number, y: number, z: number) { //彎舉\n        basic.pause(100)\n        if (y >= 500) {\n            times = times +1\n        }\n    }\n}","main.py":"def Acceleration():\n    global x, y, z\n    x = input.acceleration(Dimension.X)\n    y = input.acceleration(Dimension.Y)\n    z = input.acceleration(Dimension.Z)\n    serial.write_value(\"X\", x)\n    serial.write_value(\"Y\", y)\n    serial.write_value(\"Z\", z)\n    basic.pause(100)\ntimes = 0\nz = 0\ny = 0\nx = 0\nSPflag = 0\nBTflag = 0\ntest = 0\nbluetooth.start_uart_service()\nbluetooth.set_transmit_power(7)\n# serial.writeValue(\"test\", test)\n# BluetoothSend()\n\ndef on_bluetooth_connected():\n    global BTflag\n    basic.pause(7000)\n    BTflag = 1\n    basic.show_icon(IconNames.YES)\nbluetooth.on_bluetooth_connected(on_bluetooth_connected)\n\ndef on_bluetooth_disconnected():\n    global BTflag\n    BTflag = 0\nbluetooth.on_bluetooth_disconnected(on_bluetooth_disconnected)\n\n# 傳送次數資料給藍牙裝置\n# BluetoothSend();\n\ndef on_uart_data_received():\n    received = bluetooth.uart_read_until(serial.delimiters(Delimiters.NEW_LINE))\n    basic.show_string(received)\n    serial.write_string(received)\nbluetooth.on_uart_data_received(serial.delimiters(Delimiters.NEW_LINE),\n    on_uart_data_received)\n\ndef BluetoothSend():\n    global test\n    if test == 0:\n        basic.pause(5000)\n        test = 1\n        serial.write_value(\"test\", test)\n    bluetooth.uart_write_number(times)\n    pause(100)\n# basic.showNumber(times)\n\ndef on_forever():\n    Arm.Count_Curl(x, y, z)\nbasic.forever(on_forever)\n\ndef on_forever2():\n    Acceleration()\nbasic.forever(on_forever2)\n\ndef on_in_background():\n    while True:\n        if BTflag == 1:\n            BluetoothSend()\n        # BluetoothReceive()\n        basic.pause(100)\ncontrol.in_background(on_in_background)\n","custom.ts":"\n","pxt.json":"{\n    \"name\": \"p2 - Copy\",\n    \"description\": \"\",\n    \"dependencies\": {\n        \"core\": \"*\",\n        \"microphone\": \"*\",\n        \"bluetooth\": \"*\",\n        \"datalogger\": \"*\"\n    },\n    \"files\": [\n        \"main.blocks\",\n        \"main.ts\",\n        \"README.md\",\n        \"Back.ts\",\n        \"Arm.ts\",\n        \"main.py\",\n        \"custom.ts\"\n    ],\n    \"preferredEditor\": \"tsprj\",\n    \"yotta\": {\n        \"config\": {\n            \"microbit-dal\": {\n                \"bluetooth\": {\n                    \"open\": 0,\n                    \"whitelist\": 1,\n                    \"security_level\": \"SECURITY_MODE_ENCRYPTION_NO_MITM\"\n                }\n            }\n        }\n    }\n}\n"}}],"shares":[{"id":"90477-95300-02184-15817","timestamp":1746905393170},{"id":"52405-85694-77525-50581","timestamp":1746965059329}],"lastSaveTime":1752781465957}